<html><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1252"><title>Video for Linux Two API Specification</title><meta name="generator" content="DocBook XSL Stylesheets V1.73.2"></head><body vlink="#840084" text="black" link="#0000FF" bgcolor="white" alink="#0000FF"><div class="book" lang="en"><div class="titlepage"><div><div><h1 class="title"><a name="v4l2spec"></a>Video for Linux Two API Specification</h1></div><div><h2 class="subtitle">Revision 2.6.32</h2></div><div><div class="authorgroup"><div class="author"><h3 class="author"><span class="firstname">Michael</span> <span class="othername">H</span> <span class="surname">Schimek</span></h3><div class="affiliation"><div class="address"><p><br>
	&nbsp;&nbsp;&nbsp;&nbsp;<code class="email">&lt;<a class="email" href="mailto:mschimek@gmx.at">mschimek@gmx.at</a>&gt;</code><br>
	&nbsp;&nbsp;</p></div></div></div><div class="author"><h3 class="author"><span class="firstname">Bill</span> <span class="surname">Dirks</span></h3><span class="contrib">Original author of the V4L2 API and
documentation.</span>&nbsp;</div><div class="author"><h3 class="author"><span class="firstname">Hans</span> <span class="surname">Verkuil</span></h3><span class="contrib">Designed and documented the VIDIOC_LOG_STATUS ioctl,
the extended control ioctls and major parts of the sliced VBI
API.</span>&nbsp;<div class="affiliation"><div class="address"><p><br>
	&nbsp;&nbsp;&nbsp;&nbsp;<code class="email">&lt;<a class="email" href="mailto:hverkuil@xs4all.nl">hverkuil@xs4all.nl</a>&gt;</code><br>
	&nbsp;&nbsp;</p></div></div></div><div class="author"><h3 class="author"><span class="firstname">Martin</span> <span class="surname">Rubli</span></h3><span class="contrib">Designed and documented the VIDIOC_ENUM_FRAMESIZES
and VIDIOC_ENUM_FRAMEINTERVALS ioctls.</span>&nbsp;</div><div class="author"><h3 class="author"><span class="firstname">Andy</span> <span class="surname">Walls</span></h3><span class="contrib">Documented the fielded V4L2_MPEG_STREAM_VBI_FMT_IVTV
MPEG stream embedded, sliced VBI data format in this specification.
</span>&nbsp;<div class="affiliation"><div class="address"><p><br>
	&nbsp;&nbsp;&nbsp;&nbsp;<code class="email">&lt;<a class="email" href="mailto:awalls@radix.net">awalls@radix.net</a>&gt;</code><br>
	&nbsp;&nbsp;</p></div></div></div><div class="author"><h3 class="author"><span class="firstname">Mauro</span> <span class="surname">Carvalho Chehab</span></h3><span class="contrib">Documented libv4l, designed and added v4l2grab example,
Remote Controller chapter
	</span>&nbsp;<div class="affiliation"><div class="address"><p><br>
	&nbsp;&nbsp;&nbsp;&nbsp;<code class="email">&lt;<a class="email" href="mailto:mchehab@redhat.com">mchehab@redhat.com</a>&gt;</code><br>
	&nbsp;&nbsp;</p></div></div></div></div></div><div><p class="copyright">Copyright
 © 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009 Bill
 Dirks, Michael H. Schimek, Hans Verkuil, Martin
Rubli, Andy Walls, Mauro Carvalho Chehab</p></div><div><div class="legalnotice"><a name="id2708313"></a><p>This document is copyrighted © 1999-2009 by Bill
Dirks, Michael H. Schimek, Hans Verkuil, Martin Rubli, Andy Walls and
Mauro Carvalho Chehab.</p><p>Permission is granted to copy, distribute and/or modify
this document under the terms of the GNU Free Documentation License,
Version 1.1 or any later version published by the Free Software
Foundation; with no Invariant Sections, with no Front-Cover Texts, and
with no Back-Cover Texts. A copy of the license is included in the
appendix entitled "GNU Free Documentation License".</p><p>Programming examples can be used and distributed without
restrictions.</p></div></div><div><div class="revhistory"><table summary="Revision history" width="100%" border="1"><tbody><tr><th colspan="3" valign="top" align="left"><b>Revision History</b></th></tr><tr><td align="left">Revision 2.6.32</td><td align="left">2009-08-31</td><td align="left">mcc</td></tr><tr><td colspan="3" align="left">Now, revisions will match the kernel version where
the V4L2 API changes will be used by the Linux Kernel.
Also added Remote Controller chapter.</td></tr><tr><td align="left">Revision 0.29</td><td align="left">2009-08-26</td><td align="left">ev</td></tr><tr><td colspan="3" align="left">Added documentation for string controls and for FM Transmitter controls.</td></tr><tr><td align="left">Revision 0.28</td><td align="left">2009-08-26</td><td align="left">gl</td></tr><tr><td colspan="3" align="left">Added V4L2_CID_BAND_STOP_FILTER documentation.</td></tr><tr><td align="left">Revision 0.27</td><td align="left">2009-08-15</td><td align="left">mcc</td></tr><tr><td colspan="3" align="left">Added libv4l and Remote Controller documentation;
added v4l2grab and keytable application examples.</td></tr><tr><td align="left">Revision 0.26</td><td align="left">2009-07-23</td><td align="left">hv</td></tr><tr><td colspan="3" align="left">Finalized the RDS capture API. Added modulator and RDS encoder
capabilities. Added support for string controls.</td></tr><tr><td align="left">Revision 0.25</td><td align="left">2009-01-18</td><td align="left">hv</td></tr><tr><td colspan="3" align="left">Added pixel formats VYUY, NV16 and NV61, and changed
the debug ioctls VIDIOC_DBG_G/S_REGISTER and VIDIOC_DBG_G_CHIP_IDENT.
Added camera controls V4L2_CID_ZOOM_ABSOLUTE, V4L2_CID_ZOOM_RELATIVE,
V4L2_CID_ZOOM_CONTINUOUS and V4L2_CID_PRIVACY.</td></tr><tr><td align="left">Revision 0.24</td><td align="left">2008-03-04</td><td align="left">mhs</td></tr><tr><td colspan="3" align="left">Added pixel formats Y16 and SBGGR16, new controls
and a camera controls class. Removed VIDIOC_G/S_MPEGCOMP.</td></tr><tr><td align="left">Revision 0.23</td><td align="left">2007-08-30</td><td align="left">mhs</td></tr><tr><td colspan="3" align="left">Fixed a typo in VIDIOC_DBG_G/S_REGISTER.
Clarified the byte order of packed pixel formats.</td></tr><tr><td align="left">Revision 0.22</td><td align="left">2007-08-29</td><td align="left">mhs</td></tr><tr><td colspan="3" align="left">Added the Video Output Overlay interface, new MPEG
controls, V4L2_FIELD_INTERLACED_TB and V4L2_FIELD_INTERLACED_BT,
VIDIOC_DBG_G/S_REGISTER, VIDIOC_(TRY_)ENCODER_CMD,
VIDIOC_G_CHIP_IDENT, VIDIOC_G_ENC_INDEX, new pixel formats.
Clarifications in the cropping chapter, about RGB pixel formats, the
mmap(), poll(), select(), read() and write() functions. Typographical
fixes.</td></tr><tr><td align="left">Revision 0.21</td><td align="left">2006-12-19</td><td align="left">mhs</td></tr><tr><td colspan="3" align="left">Fixed a link in the VIDIOC_G_EXT_CTRLS section.</td></tr><tr><td align="left">Revision 0.20</td><td align="left">2006-11-24</td><td align="left">mhs</td></tr><tr><td colspan="3" align="left">Clarified the purpose of the audioset field in
struct v4l2_input and v4l2_output.</td></tr><tr><td align="left">Revision 0.19</td><td align="left">2006-10-19</td><td align="left">mhs</td></tr><tr><td colspan="3" align="left">Documented V4L2_PIX_FMT_RGB444.</td></tr><tr><td align="left">Revision 0.18</td><td align="left">2006-10-18</td><td align="left">mhs</td></tr><tr><td colspan="3" align="left">Added the description of extended controls by Hans
Verkuil. Linked V4L2_PIX_FMT_MPEG to V4L2_CID_MPEG_STREAM_TYPE.</td></tr><tr><td align="left">Revision 0.17</td><td align="left">2006-10-12</td><td align="left">mhs</td></tr><tr><td colspan="3" align="left">Corrected V4L2_PIX_FMT_HM12 description.</td></tr><tr><td align="left">Revision 0.16</td><td align="left">2006-10-08</td><td align="left">mhs</td></tr><tr><td colspan="3" align="left">VIDIOC_ENUM_FRAMESIZES and
VIDIOC_ENUM_FRAMEINTERVALS are now part of the API.</td></tr><tr><td align="left">Revision 0.15</td><td align="left">2006-09-23</td><td align="left">mhs</td></tr><tr><td colspan="3" align="left">Cleaned up the bibliography, added BT.653 and
BT.1119. capture.c/start_capturing() for user pointer I/O did not
initialize the buffer index. Documented the V4L MPEG and MJPEG
VID_TYPEs and V4L2_PIX_FMT_SBGGR8. Updated the list of reserved pixel
formats. See the history chapter for API changes.</td></tr><tr><td align="left">Revision 0.14</td><td align="left">2006-09-14</td><td align="left">mr</td></tr><tr><td colspan="3" align="left">Added VIDIOC_ENUM_FRAMESIZES and
VIDIOC_ENUM_FRAMEINTERVALS proposal for frame format enumeration of
digital devices.</td></tr><tr><td align="left">Revision 0.13</td><td align="left">2006-04-07</td><td align="left">mhs</td></tr><tr><td colspan="3" align="left">Corrected the description of struct v4l2_window
clips. New V4L2_STD_ and V4L2_TUNER_MODE_LANG1_LANG2
defines.</td></tr><tr><td align="left">Revision 0.12</td><td align="left">2006-02-03</td><td align="left">mhs</td></tr><tr><td colspan="3" align="left">Corrected the description of struct
v4l2_captureparm and v4l2_outputparm.</td></tr><tr><td align="left">Revision 0.11</td><td align="left">2006-01-27</td><td align="left">mhs</td></tr><tr><td colspan="3" align="left">Improved the description of struct
v4l2_tuner.</td></tr><tr><td align="left">Revision 0.10</td><td align="left">2006-01-10</td><td align="left">mhs</td></tr><tr><td colspan="3" align="left">VIDIOC_G_INPUT and VIDIOC_S_PARM
clarifications.</td></tr><tr><td align="left">Revision 0.9</td><td align="left">2005-11-27</td><td align="left">mhs</td></tr><tr><td colspan="3" align="left">Improved the 525 line numbering diagram. Hans
Verkuil and I rewrote the sliced VBI section. He also contributed a
VIDIOC_LOG_STATUS page. Fixed VIDIOC_S_STD call in the video standard
selection example. Various updates.</td></tr><tr><td align="left">Revision 0.8</td><td align="left">2004-10-04</td><td align="left">mhs</td></tr><tr><td colspan="3" align="left">Somehow a piece of junk slipped into the capture
example, removed.</td></tr><tr><td align="left">Revision 0.7</td><td align="left">2004-09-19</td><td align="left">mhs</td></tr><tr><td colspan="3" align="left">Fixed video standard selection, control
enumeration, downscaling and aspect example. Added read and user
pointer i/o to video capture example.</td></tr><tr><td align="left">Revision 0.6</td><td align="left">2004-08-01</td><td align="left">mhs</td></tr><tr><td colspan="3" align="left">v4l2_buffer changes, added video capture example,
various corrections.</td></tr><tr><td align="left">Revision 0.5</td><td align="left">2003-11-05</td><td align="left">mhs</td></tr><tr><td colspan="3" align="left">Pixel format erratum.</td></tr><tr><td align="left">Revision 0.4</td><td align="left">2003-09-17</td><td align="left">mhs</td></tr><tr><td colspan="3" align="left">Corrected source and Makefile to generate a PDF.
SGML fixes. Added latest API changes. Closed gaps in the history
chapter.</td></tr><tr><td align="left">Revision 0.3</td><td align="left">2003-02-05</td><td align="left">mhs</td></tr><tr><td colspan="3" align="left">Another draft, more corrections.</td></tr><tr><td align="left">Revision 0.2</td><td align="left">2003-01-15</td><td align="left">mhs</td></tr><tr><td colspan="3" align="left">Second draft, with corrections pointed out by Gerd
Knorr.</td></tr><tr><td align="left">Revision 0.1</td><td align="left">2002-12-01</td><td align="left">mhs</td></tr><tr><td colspan="3" align="left">First draft, based on documentation by Bill Dirks
and discussions on the V4L mailing list.</td></tr></tbody></table></div></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="preface"><a href="#id2710266">Introduction</a></span></dt><dt><span class="chapter"><a href="#common">1. Common API Elements</a></span></dt><dd><dl><dt><span class="section"><a href="#open">1.1. Opening and Closing Devices</a></span></dt><dd><dl><dt><span class="section"><a href="#id2758256">1.1.1. Device Naming</a></span></dt><dt><span class="section"><a href="#related">1.1.2. Related Devices</a></span></dt><dt><span class="section"><a href="#id2758585">1.1.3. Multiple Opens</a></span></dt><dt><span class="section"><a href="#id2758695">1.1.4. Shared Data Streams</a></span></dt><dt><span class="section"><a href="#id2758710">1.1.5. Functions</a></span></dt></dl></dd><dt><span class="section"><a href="#querycap">1.2. Querying Capabilities</a></span></dt><dt><span class="section"><a href="#app-pri">1.3. Application Priority</a></span></dt><dt><span class="section"><a href="#video">1.4. Video Inputs and Outputs</a></span></dt><dt><span class="section"><a href="#audio">1.5. Audio Inputs and Outputs</a></span></dt><dt><span class="section"><a href="#tuner">1.6. Tuners and Modulators</a></span></dt><dd><dl><dt><span class="section"><a href="#id2759348">1.6.1. Tuners</a></span></dt><dt><span class="section"><a href="#id2759449">1.6.2. Modulators</a></span></dt><dt><span class="section"><a href="#id2759504">1.6.3. Radio Frequency</a></span></dt><dt><span class="section"><a href="#id2759537">1.6.4. Satellite Receivers</a></span></dt></dl></dd><dt><span class="section"><a href="#standard">1.7. Video Standards</a></span></dt><dt><span class="section"><a href="#control">1.8. User Controls</a></span></dt><dt><span class="section"><a href="#extended-controls">1.9. Extended Controls</a></span></dt><dd><dl><dt><span class="section"><a href="#id2761800">1.9.1. Introduction</a></span></dt><dt><span class="section"><a href="#id2760619">1.9.2. The Extended Control API</a></span></dt><dt><span class="section"><a href="#id2762121">1.9.3. Enumerating Extended Controls</a></span></dt><dt><span class="section"><a href="#id2762247">1.9.4. Creating Control Panels</a></span></dt><dt><span class="section"><a href="#mpeg-controls">1.9.5. MPEG Control Reference</a></span></dt><dd><dl><dt><span class="section"><a href="#id2762299">1.9.5.1. Generic MPEG Controls</a></span></dt><dt><span class="section"><a href="#id2764786">1.9.5.2. CX2341x MPEG Controls</a></span></dt></dl></dd><dt><span class="section"><a href="#camera-controls">1.9.6. Camera Control Reference</a></span></dt><dt><span class="section"><a href="#fm-tx-controls">1.9.7. FM Transmitter Control Reference</a></span></dt></dl></dd><dt><span class="section"><a href="#format">1.10. Data Formats</a></span></dt><dd><dl><dt><span class="section"><a href="#id2772276">1.10.1. Data Format Negotiation</a></span></dt><dt><span class="section"><a href="#id2772464">1.10.2. Image Format Enumeration</a></span></dt></dl></dd><dt><span class="section"><a href="#crop">1.11. Image Cropping, Insertion and Scaling</a></span></dt><dd><dl><dt><span class="section"><a href="#id2772614">1.11.1. Cropping Structures</a></span></dt><dt><span class="section"><a href="#id2772775">1.11.2. Scaling Adjustments</a></span></dt><dt><span class="section"><a href="#id2772867">1.11.3. Examples</a></span></dt></dl></dd><dt><span class="section"><a href="#streaming-par">1.12. Streaming Parameters</a></span></dt></dl></dd><dt><span class="chapter"><a href="#pixfmt">2. Image Formats</a></span></dt><dd><dl><dt><span class="section"><a href="#id2783248">2.1. Standard Image Formats</a></span></dt><dt><span class="section"><a href="#colorspaces">2.2. Colorspaces</a></span></dt><dt><span class="section"><a href="#pixfmt-indexed">2.3. Indexed Format</a></span></dt><dt><span class="section"><a href="#pixfmt-rgb">2.4. RGB Formats</a></span></dt><dt><span class="section"><a href="#yuv-formats">2.5. YUV Formats</a></span></dt><dt><span class="section"><a href="#id2809728">2.6. Compressed Formats</a></span></dt><dt><span class="section"><a href="#pixfmt-reserved">2.7. Reserved Format Identifiers</a></span></dt></dl></dd><dt><span class="chapter"><a href="#io">3. Input/Output</a></span></dt><dd><dl><dt><span class="section"><a href="#rw">3.1. Read/Write</a></span></dt><dt><span class="section"><a href="#mmap">3.2. Streaming I/O (Memory Mapping)</a></span></dt><dt><span class="section"><a href="#userp">3.3. Streaming I/O (User Pointers)</a></span></dt><dt><span class="section"><a href="#async">3.4. Asynchronous I/O</a></span></dt><dt><span class="section"><a href="#buffer">3.5. Buffers</a></span></dt><dd><dl><dt><span class="section"><a href="#id2828863">3.5.1. Timecodes</a></span></dt></dl></dd><dt><span class="section"><a href="#field-order">3.6. Field Order</a></span></dt></dl></dd><dt><span class="chapter"><a href="#devices">4. Interfaces</a></span></dt><dd><dl><dt><span class="section"><a href="#capture">4.1. Video Capture Interface</a></span></dt><dd><dl><dt><span class="section"><a href="#id2832544">4.1.1. Querying Capabilities</a></span></dt><dt><span class="section"><a href="#id2833213">4.1.2. Supplemental Functions</a></span></dt><dt><span class="section"><a href="#id2833276">4.1.3. Image Format Negotiation</a></span></dt><dt><span class="section"><a href="#id2833480">4.1.4. Reading Images</a></span></dt></dl></dd><dt><span class="section"><a href="#overlay">4.2. Video Overlay Interface</a></span></dt><dd><dl><dt><span class="section"><a href="#id2832938">4.2.1. Querying Capabilities</a></span></dt><dt><span class="section"><a href="#id2832974">4.2.2. Supplemental Functions</a></span></dt><dt><span class="section"><a href="#id2834133">4.2.3. Setup</a></span></dt><dt><span class="section"><a href="#id2834281">4.2.4. Overlay Window</a></span></dt><dt><span class="section"><a href="#id2835130">4.2.5. Enabling Overlay</a></span></dt></dl></dd><dt><span class="section"><a href="#output">4.3. Video Output Interface</a></span></dt><dd><dl><dt><span class="section"><a href="#id2835830">4.3.1. Querying Capabilities</a></span></dt><dt><span class="section"><a href="#id2836485">4.3.2. Supplemental Functions</a></span></dt><dt><span class="section"><a href="#id2836545">4.3.3. Image Format Negotiation</a></span></dt><dt><span class="section"><a href="#id2836748">4.3.4. Writing Images</a></span></dt></dl></dd><dt><span class="section"><a href="#osd">4.4. Video Output Overlay Interface</a></span></dt><dd><dl><dt><span class="section"><a href="#id2837258">4.4.1. Querying Capabilities</a></span></dt><dt><span class="section"><a href="#id2837295">4.4.2. Framebuffer</a></span></dt><dt><span class="section"><a href="#id2837430">4.4.3. Overlay Window and Scaling</a></span></dt><dt><span class="section"><a href="#id2837604">4.4.4. Enabling Overlay</a></span></dt></dl></dd><dt><span class="section"><a href="#codec">4.5. Codec Interface</a></span></dt><dt><span class="section"><a href="#effect">4.6. Effect Devices Interface</a></span></dt><dt><span class="section"><a href="#raw-vbi">4.7. Raw VBI Data Interface</a></span></dt><dd><dl><dt><span class="section"><a href="#id2838368">4.7.1. Querying Capabilities</a></span></dt><dt><span class="section"><a href="#id2838408">4.7.2. Supplemental Functions</a></span></dt><dt><span class="section"><a href="#id2838449">4.7.3. Raw VBI Format Negotiation</a></span></dt><dt><span class="section"><a href="#id2839246">4.7.4. Reading and writing VBI images</a></span></dt></dl></dd><dt><span class="section"><a href="#sliced">4.8. Sliced VBI Data Interface</a></span></dt><dd><dl><dt><span class="section"><a href="#id2840502">4.8.1. Querying Capabilities</a></span></dt><dt><span class="section"><a href="#id2840549">4.8.2. Supplemental Functions</a></span></dt><dt><span class="section"><a href="#sliced-vbi-format-negotitation">4.8.3. Sliced VBI Format Negotiation</a></span></dt><dt><span class="section"><a href="#id2841542">4.8.4. Reading and writing sliced VBI data</a></span></dt><dt><span class="section"><a href="#id2841898">4.8.5. Sliced VBI Data in MPEG Streams</a></span></dt><dd><dl><dt><span class="section"><a href="#id2841979">4.8.5.1. MPEG Stream Embedded, Sliced VBI Data Format: NONE</a></span></dt><dt><span class="section"><a href="#id2842004">4.8.5.2. MPEG Stream Embedded, Sliced VBI Data Format: IVTV</a></span></dt></dl></dd></dl></dd><dt><span class="section"><a href="#ttx">4.9. Teletext Interface</a></span></dt><dt><span class="section"><a href="#radio">4.10. Radio Interface</a></span></dt><dd><dl><dt><span class="section"><a href="#id2845746">4.10.1. Querying Capabilities</a></span></dt><dt><span class="section"><a href="#id2846040">4.10.2. Supplemental Functions</a></span></dt><dt><span class="section"><a href="#id2846072">4.10.3. Programming</a></span></dt></dl></dd><dt><span class="section"><a href="#rds">4.11. RDS Interface</a></span></dt><dd><dl><dt><span class="section"><a href="#id2845546">4.11.1. Querying Capabilities</a></span></dt><dt><span class="section"><a href="#id2846459">4.11.2. Reading RDS data</a></span></dt></dl></dd></dl></dd><dt><span class="reference"><a href="#user-func">I. Function Reference</a></span></dt><dd><dl><dt><span class="refentrytitle"><a href="#func-close">V4L2 close()</a></span><span class="refpurpose"> — Close a V4L2 device</span></dt><dt><span class="refentrytitle"><a href="#func-ioctl">V4L2 ioctl()</a></span><span class="refpurpose"> — Program a V4L2 device</span></dt><dt><span class="refentrytitle"><a href="#vidioc-cropcap">ioctl VIDIOC_CROPCAP</a></span><span class="refpurpose"> — Information about the video cropping and scaling abilities</span></dt><dt><span class="refentrytitle"><a href="#vidioc-dbg-g-chip-ident">ioctl VIDIOC_DBG_G_CHIP_IDENT</a></span><span class="refpurpose"> — Identify the chips on a TV card</span></dt><dt><span class="refentrytitle"><a href="#vidioc-dbg-g-register">ioctl VIDIOC_DBG_G_REGISTER, VIDIOC_DBG_S_REGISTER</a></span><span class="refpurpose"> — Read or write hardware registers</span></dt><dt><span class="refentrytitle"><a href="#vidioc-encoder-cmd">ioctl VIDIOC_ENCODER_CMD, VIDIOC_TRY_ENCODER_CMD</a></span><span class="refpurpose"> — Execute an encoder command</span></dt><dt><span class="refentrytitle"><a href="#vidioc-enumaudio">ioctl VIDIOC_ENUMAUDIO</a></span><span class="refpurpose"> — Enumerate audio inputs</span></dt><dt><span class="refentrytitle"><a href="#vidioc-enumaudioout">ioctl VIDIOC_ENUMAUDOUT</a></span><span class="refpurpose"> — Enumerate audio outputs</span></dt><dt><span class="refentrytitle"><a href="#vidioc-enum-fmt">ioctl VIDIOC_ENUM_FMT</a></span><span class="refpurpose"> — Enumerate image formats</span></dt><dt><span class="refentrytitle"><a href="#vidioc-enum-framesizes">ioctl VIDIOC_ENUM_FRAMESIZES</a></span><span class="refpurpose"> — Enumerate frame sizes</span></dt><dt><span class="refentrytitle"><a href="#vidioc-enum-frameintervals">ioctl VIDIOC_ENUM_FRAMEINTERVALS</a></span><span class="refpurpose"> — Enumerate frame intervals</span></dt><dt><span class="refentrytitle"><a href="#vidioc-enuminput">ioctl VIDIOC_ENUMINPUT</a></span><span class="refpurpose"> — Enumerate video inputs</span></dt><dt><span class="refentrytitle"><a href="#vidioc-enumoutput">ioctl VIDIOC_ENUMOUTPUT</a></span><span class="refpurpose"> — Enumerate video outputs</span></dt><dt><span class="refentrytitle"><a href="#vidioc-enumstd">ioctl VIDIOC_ENUMSTD</a></span><span class="refpurpose"> — Enumerate supported video standards</span></dt><dt><span class="refentrytitle"><a href="#vidioc-g-audio">ioctl VIDIOC_G_AUDIO, VIDIOC_S_AUDIO</a></span><span class="refpurpose"> — Query or select the current audio input and its
attributes</span></dt><dt><span class="refentrytitle"><a href="#vidioc-g-audioout">ioctl VIDIOC_G_AUDOUT, VIDIOC_S_AUDOUT</a></span><span class="refpurpose"> — Query or select the current audio output</span></dt><dt><span class="refentrytitle"><a href="#vidioc-g-crop">ioctl VIDIOC_G_CROP, VIDIOC_S_CROP</a></span><span class="refpurpose"> — Get or set the current cropping rectangle</span></dt><dt><span class="refentrytitle"><a href="#vidioc-g-ctrl">ioctl VIDIOC_G_CTRL, VIDIOC_S_CTRL</a></span><span class="refpurpose"> — Get or set the value of a control</span></dt><dt><span class="refentrytitle"><a href="#vidioc-g-enc-index">ioctl VIDIOC_G_ENC_INDEX</a></span><span class="refpurpose"> — Get meta data about a compressed video stream</span></dt><dt><span class="refentrytitle"><a href="#vidioc-g-ext-ctrls">ioctl VIDIOC_G_EXT_CTRLS, VIDIOC_S_EXT_CTRLS,
VIDIOC_TRY_EXT_CTRLS</a></span><span class="refpurpose"> — Get or set the value of several controls, try control
values</span></dt><dt><span class="refentrytitle"><a href="#vidioc-g-fbuf">ioctl VIDIOC_G_FBUF, VIDIOC_S_FBUF</a></span><span class="refpurpose"> — Get or set frame buffer overlay parameters</span></dt><dt><span class="refentrytitle"><a href="#vidioc-g-fmt">ioctl VIDIOC_G_FMT, VIDIOC_S_FMT,
VIDIOC_TRY_FMT</a></span><span class="refpurpose"> — Get or set the data format, try a format</span></dt><dt><span class="refentrytitle"><a href="#vidioc-g-frequency">ioctl VIDIOC_G_FREQUENCY, VIDIOC_S_FREQUENCY</a></span><span class="refpurpose"> — Get or set tuner or modulator radio
frequency</span></dt><dt><span class="refentrytitle"><a href="#vidioc-g-input">ioctl VIDIOC_G_INPUT, VIDIOC_S_INPUT</a></span><span class="refpurpose"> — Query or select the current video input</span></dt><dt><span class="refentrytitle"><a href="#vidioc-g-jpegcomp">ioctl VIDIOC_G_JPEGCOMP, VIDIOC_S_JPEGCOMP</a></span><span class="refpurpose"></span></dt><dt><span class="refentrytitle"><a href="#vidioc-g-modulator">ioctl VIDIOC_G_MODULATOR, VIDIOC_S_MODULATOR</a></span><span class="refpurpose"> — Get or set modulator attributes</span></dt><dt><span class="refentrytitle"><a href="#vidioc-g-output">ioctl VIDIOC_G_OUTPUT, VIDIOC_S_OUTPUT</a></span><span class="refpurpose"> — Query or select the current video output</span></dt><dt><span class="refentrytitle"><a href="#vidioc-g-parm">ioctl VIDIOC_G_PARM, VIDIOC_S_PARM</a></span><span class="refpurpose"> — Get or set streaming parameters</span></dt><dt><span class="refentrytitle"><a href="#vidioc-g-priority">ioctl VIDIOC_G_PRIORITY, VIDIOC_S_PRIORITY</a></span><span class="refpurpose"> — Query or request the access priority associated with a
file descriptor</span></dt><dt><span class="refentrytitle"><a href="#vidioc-g-sliced-vbi-cap">ioctl VIDIOC_G_SLICED_VBI_CAP</a></span><span class="refpurpose"> — Query sliced VBI capabilities</span></dt><dt><span class="refentrytitle"><a href="#vidioc-g-std">ioctl VIDIOC_G_STD, VIDIOC_S_STD</a></span><span class="refpurpose"> — Query or select the video standard of the current input</span></dt><dt><span class="refentrytitle"><a href="#vidioc-g-tuner">ioctl VIDIOC_G_TUNER, VIDIOC_S_TUNER</a></span><span class="refpurpose"> — Get or set tuner attributes</span></dt><dt><span class="refentrytitle"><a href="#vidioc-log-status">ioctl VIDIOC_LOG_STATUS</a></span><span class="refpurpose"> — Log driver status information</span></dt><dt><span class="refentrytitle"><a href="#vidioc-overlay">ioctl VIDIOC_OVERLAY</a></span><span class="refpurpose"> — Start or stop video overlay</span></dt><dt><span class="refentrytitle"><a href="#vidioc-qbuf">ioctl VIDIOC_QBUF, VIDIOC_DQBUF</a></span><span class="refpurpose"> — Exchange a buffer with the driver</span></dt><dt><span class="refentrytitle"><a href="#vidioc-querybuf">ioctl VIDIOC_QUERYBUF</a></span><span class="refpurpose"> — Query the status of a buffer</span></dt><dt><span class="refentrytitle"><a href="#vidioc-querycap">ioctl VIDIOC_QUERYCAP</a></span><span class="refpurpose"> — Query device capabilities</span></dt><dt><span class="refentrytitle"><a href="#vidioc-queryctrl">ioctl VIDIOC_QUERYCTRL, VIDIOC_QUERYMENU</a></span><span class="refpurpose"> — Enumerate controls and menu control items</span></dt><dt><span class="refentrytitle"><a href="#vidioc-querystd">ioctl VIDIOC_QUERYSTD</a></span><span class="refpurpose"> — Sense the video standard received by the current
input</span></dt><dt><span class="refentrytitle"><a href="#vidioc-reqbufs">ioctl VIDIOC_REQBUFS</a></span><span class="refpurpose"> — Initiate Memory Mapping or User Pointer I/O</span></dt><dt><span class="refentrytitle"><a href="#vidioc-s-hw-freq-seek">ioctl VIDIOC_S_HW_FREQ_SEEK</a></span><span class="refpurpose"> — Perform a hardware frequency seek</span></dt><dt><span class="refentrytitle"><a href="#vidioc-streamon">ioctl VIDIOC_STREAMON, VIDIOC_STREAMOFF</a></span><span class="refpurpose"> — Start or stop streaming I/O</span></dt><dt><span class="refentrytitle"><a href="#func-mmap">V4L2 mmap()</a></span><span class="refpurpose"> — Map device memory into application address space</span></dt><dt><span class="refentrytitle"><a href="#func-munmap">V4L2 munmap()</a></span><span class="refpurpose"> — Unmap device memory</span></dt><dt><span class="refentrytitle"><a href="#func-open">V4L2 open()</a></span><span class="refpurpose"> — Open a V4L2 device</span></dt><dt><span class="refentrytitle"><a href="#func-poll">V4L2 poll()</a></span><span class="refpurpose"> — Wait for some event on a file descriptor</span></dt><dt><span class="refentrytitle"><a href="#func-read">V4L2 read()</a></span><span class="refpurpose"> — Read from a V4L2 device</span></dt><dt><span class="refentrytitle"><a href="#func-select">V4L2 select()</a></span><span class="refpurpose"> — Synchronous I/O multiplexing</span></dt><dt><span class="refentrytitle"><a href="#func-write">V4L2 write()</a></span><span class="refpurpose"> — Write to a V4L2 device</span></dt></dl></dd><dt><span class="chapter"><a href="#driver">5. V4L2 Driver Programming</a></span></dt><dt><span class="chapter"><a href="#libv4l">6. Libv4l Userspace Library</a></span></dt><dd><dl><dt><span class="section"><a href="#libv4l-introduction">6.1. Introduction</a></span></dt><dd><dl><dt><span class="section"><a href="#id2907456">6.1.1. libv4lconvert</a></span></dt><dt><span class="section"><a href="#id2908851">6.1.2. libv4l1</a></span></dt><dt><span class="section"><a href="#id2908871">6.1.3. libv4l2</a></span></dt><dd><dl><dt><span class="section"><a href="#libv4l-ops">6.1.3.1. Libv4l device control functions</a></span></dt></dl></dd><dt><span class="section"><a href="#id2909128">6.1.4. v4l1compat.so wrapper library</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#remote_controllers">7. Remote Controllers</a></span></dt><dd><dl><dt><span class="section"><a href="#Remote_controllers_Intro">7.1. Introduction</a></span></dt><dt><span class="section"><a href="#Remote_controllers_table_change">7.2. Changing default Remote Controller mappings</a></span></dt></dl></dd><dt><span class="chapter"><a href="#compat">8. Changes</a></span></dt><dd><dl><dt><span class="section"><a href="#diff-v4l">8.1. Differences between V4L and V4L2</a></span></dt><dd><dl><dt><span class="section"><a href="#id2911568">8.1.1. Opening and Closing Devices</a></span></dt><dt><span class="section"><a href="#id2912447">8.1.2. Querying Capabilities</a></span></dt><dt><span class="section"><a href="#id2913006">8.1.3. Video Sources</a></span></dt><dt><span class="section"><a href="#id2913233">8.1.4. Tuning</a></span></dt><dt><span class="section"><a href="#v4l-image-properties">8.1.5. Image Properties</a></span></dt><dt><span class="section"><a href="#id2914039">8.1.6. Audio</a></span></dt><dt><span class="section"><a href="#id2914361">8.1.7. Frame Buffer Overlay</a></span></dt><dt><span class="section"><a href="#id2914637">8.1.8. Cropping</a></span></dt><dt><span class="section"><a href="#id2914781">8.1.9. Reading Images, Memory Mapping</a></span></dt><dd><dl><dt><span class="section"><a href="#id2914787">8.1.9.1. Capturing using the read method</a></span></dt><dt><span class="section"><a href="#id2914897">8.1.9.2. Capturing using memory mapping</a></span></dt></dl></dd><dt><span class="section"><a href="#id2915129">8.1.10. Reading Raw VBI Data</a></span></dt><dt><span class="section"><a href="#id2915343">8.1.11. Miscellaneous</a></span></dt></dl></dd><dt><span class="section"><a href="#hist-v4l2">8.2. Changes of the V4L2 API</a></span></dt><dd><dl><dt><span class="section"><a href="#id2915404">8.2.1. Early Versions</a></span></dt><dt><span class="section"><a href="#id2915618">8.2.2. V4L2 Version 0.16 1999-01-31</a></span></dt><dt><span class="section"><a href="#id2915632">8.2.3. V4L2 Version 0.18 1999-03-16</a></span></dt><dt><span class="section"><a href="#id2915649">8.2.4. V4L2 Version 0.19 1999-06-05</a></span></dt><dt><span class="section"><a href="#id2915693">8.2.5. V4L2 Version 0.20 (1999-09-10)</a></span></dt><dt><span class="section"><a href="#id2915997">8.2.6. V4L2 Version 0.20 incremental changes</a></span></dt><dt><span class="section"><a href="#id2916246">8.2.7. V4L2 Version 0.20 2000-11-23</a></span></dt><dt><span class="section"><a href="#id2916393">8.2.8. V4L2 Version 0.20 2002-07-25</a></span></dt><dt><span class="section"><a href="#id2916404">8.2.9. V4L2 in Linux 2.5.46, 2002-10</a></span></dt><dt><span class="section"><a href="#id2918007">8.2.10. V4L2 2003-06-19</a></span></dt><dt><span class="section"><a href="#id2918191">8.2.11. V4L2 2003-11-05</a></span></dt><dt><span class="section"><a href="#id2918349">8.2.12. V4L2 in Linux 2.6.6, 2004-05-09</a></span></dt><dt><span class="section"><a href="#id2918384">8.2.13. V4L2 in Linux 2.6.8</a></span></dt><dt><span class="section"><a href="#id2918431">8.2.14. V4L2 spec erratum 2004-08-01</a></span></dt><dt><span class="section"><a href="#id2918511">8.2.15. V4L2 in Linux 2.6.14</a></span></dt><dt><span class="section"><a href="#id2918551">8.2.16. V4L2 in Linux 2.6.15</a></span></dt><dt><span class="section"><a href="#id2918661">8.2.17. V4L2 spec erratum 2005-11-27</a></span></dt><dt><span class="section"><a href="#id2918702">8.2.18. V4L2 spec erratum 2006-01-10</a></span></dt><dt><span class="section"><a href="#id2918752">8.2.19. V4L2 spec erratum 2006-02-03</a></span></dt><dt><span class="section"><a href="#id2918794">8.2.20. V4L2 spec erratum 2006-02-04</a></span></dt><dt><span class="section"><a href="#id2918842">8.2.21. V4L2 in Linux 2.6.17</a></span></dt><dt><span class="section"><a href="#id2918921">8.2.22. V4L2 spec erratum 2006-09-23 (Draft 0.15)</a></span></dt><dt><span class="section"><a href="#id2919089">8.2.23. V4L2 in Linux 2.6.18</a></span></dt><dt><span class="section"><a href="#id2919182">8.2.24. V4L2 in Linux 2.6.19</a></span></dt><dt><span class="section"><a href="#id2919267">8.2.25. V4L2 spec erratum 2006-10-12 (Draft 0.17)</a></span></dt><dt><span class="section"><a href="#id2919300">8.2.26. V4L2 in Linux 2.6.21</a></span></dt><dt><span class="section"><a href="#id2919329">8.2.27. V4L2 in Linux 2.6.22</a></span></dt><dt><span class="section"><a href="#id2919453">8.2.28. V4L2 in Linux 2.6.24</a></span></dt><dt><span class="section"><a href="#id2919493">8.2.29. V4L2 in Linux 2.6.25</a></span></dt><dt><span class="section"><a href="#id2919671">8.2.30. V4L2 in Linux 2.6.26</a></span></dt><dt><span class="section"><a href="#id2919715">8.2.31. V4L2 in Linux 2.6.27</a></span></dt><dt><span class="section"><a href="#id2919785">8.2.32. V4L2 in Linux 2.6.28</a></span></dt><dt><span class="section"><a href="#id2919840">8.2.33. V4L2 in Linux 2.6.29</a></span></dt><dt><span class="section"><a href="#id2919930">8.2.34. V4L2 in Linux 2.6.30</a></span></dt><dt><span class="section"><a href="#id2919966">8.2.35. V4L2 in Linux 2.6.32</a></span></dt></dl></dd><dt><span class="section"><a href="#other">8.3. Relation of V4L2 to other Linux multimedia APIs</a></span></dt><dd><dl><dt><span class="section"><a href="#xvideo">8.3.1. X Video Extension</a></span></dt><dt><span class="section"><a href="#id2920165">8.3.2. Digital Video</a></span></dt><dt><span class="section"><a href="#id2920186">8.3.3. Audio Interfaces</a></span></dt></dl></dd><dt><span class="section"><a href="#experimental">8.4. Experimental API Elements</a></span></dt><dt><span class="section"><a href="#obsolete">8.5. Obsolete API Elements</a></span></dt></dl></dd><dt><span class="appendix"><a href="#videodev">A. Video For Linux Two Header File</a></span></dt><dt><span class="appendix"><a href="#capture-example">B. Video Capture Example</a></span></dt><dt><span class="appendix"><a href="#v4l2grab-example">C. Video Grabber example using libv4l</a></span></dt><dt><span class="appendix"><a href="#fdl">D. GNU Free Documentation License</a></span></dt><dd><dl><dt><span class="sect1"><a href="#fdl-preamble">D.1. 0. PREAMBLE</a></span></dt><dt><span class="sect1"><a href="#fdl-section1">D.2. 1. APPLICABILITY AND DEFINITIONS</a></span></dt><dt><span class="sect1"><a href="#fdl-section2">D.3. 2. VERBATIM COPYING</a></span></dt><dt><span class="sect1"><a href="#fdl-section3">D.4. 3. COPYING IN QUANTITY</a></span></dt><dt><span class="sect1"><a href="#fdl-section4">D.5. 4. MODIFICATIONS</a></span></dt><dt><span class="sect1"><a href="#fdl-section5">D.6. 5. COMBINING DOCUMENTS</a></span></dt><dt><span class="sect1"><a href="#fdl-section6">D.7. 6. COLLECTIONS OF DOCUMENTS</a></span></dt><dt><span class="sect1"><a href="#fdl-section7">D.8. 7. AGGREGATION WITH INDEPENDENT WORKS</a></span></dt><dt><span class="sect1"><a href="#fdl-section8">D.9. 8. TRANSLATION</a></span></dt><dt><span class="sect1"><a href="#fdl-section9">D.10. 9. TERMINATION</a></span></dt><dt><span class="sect1"><a href="#fdl-section10">D.11. 10. FUTURE REVISIONS OF THIS LICENSE</a></span></dt><dt><span class="sect1"><a href="#fdl-using">D.12. Addendum</a></span></dt></dl></dd><dt><span class="index"><a href="#id2931940">List of Types</a></span></dt><dt><span class="bibliography"><a href="#id2933674">References</a></span></dt></dl></div><div class="list-of-figures"><p><b>List of Figures</b></p><dl><dt>1.1. <a href="#crop-scale">Image Cropping, Insertion and Scaling</a></dt><dt>3.1. <a href="#fieldseq-tb">Field Order, Top Field First Transmitted</a></dt><dt>3.2. <a href="#fieldseq-bt">Field Order, Bottom Field First Transmitted</a></dt><dt>4.1. <a href="#vbi-hsync">Line synchronization</a></dt><dt>4.2. <a href="#vbi-525">ITU-R 525 line numbering (M/NTSC and M/PAL)</a></dt><dt>4.3. <a href="#vbi-625">ITU-R 625 line numbering</a></dt></dl></div><div class="list-of-tables"><p><b>List of Tables</b></p><dl><dt>1.1. <a href="#control-id">Control IDs</a></dt><dt>1.2. <a href="#mpeg-control-id">MPEG Control IDs</a></dt><dt>1.3. <a href="#cx2341x-control-id">CX2341x Control IDs</a></dt><dt>1.4. <a href="#camera-control-id">Camera Control IDs</a></dt><dt>1.5. <a href="#fm-tx-control-id">FM_TX Control IDs</a></dt><dt>2.1. <a href="#v4l2-pix-format">struct <span class="structname">v4l2_pix_format</span></a></dt><dt>2.2. <a href="#v4l2-colorspace">enum v4l2_colorspace</a></dt><dt>2.3. <a href="#id2784532">Indexed Image Format</a></dt><dt>2.4. <a href="#rgb-formats">Packed RGB Image Formats</a></dt><dt>2.5. <a href="#rgb-formats-corrected">Packed RGB Image Formats (corrected)</a></dt><dt>2.6. <a href="#id2795038">Packed YUV Image Formats</a></dt><dt>2.7. <a href="#compressed-formats">Compressed Image Formats</a></dt><dt>2.8. <a href="#reserved-formats">Reserved Image Formats</a></dt><dt>3.1. <a href="#v4l2-buffer">struct <span class="structname">v4l2_buffer</span></a></dt><dt>3.2. <a href="#v4l2-buf-type">enum v4l2_buf_type</a></dt><dt>3.3. <a href="#buffer-flags">Buffer Flags</a></dt><dt>3.4. <a href="#v4l2-memory">enum v4l2_memory</a></dt><dt>3.5. <a href="#v4l2-timecode">struct <span class="structname">v4l2_timecode</span></a></dt><dt>3.6. <a href="#timecode-type">Timecode Types</a></dt><dt>3.7. <a href="#timecode-flags">Timecode Flags</a></dt><dt>3.8. <a href="#v4l2-field">enum v4l2_field</a></dt><dt>4.1. <a href="#v4l2-window">struct <span class="structname">v4l2_window</span></a></dt><dt>4.2. <a href="#v4l2-clip">struct <span class="structname">v4l2_clip</span></a></dt><dt>4.3. <a href="#v4l2-rect">struct <span class="structname">v4l2_rect</span></a></dt><dt>4.4. <a href="#v4l2-vbi-format">struct <span class="structname">v4l2_vbi_format</span></a></dt><dt>4.5. <a href="#vbifmt-flags">Raw VBI Format Flags</a></dt><dt>4.6. <a href="#v4l2-sliced-vbi-format">struct
<span class="structname">v4l2_sliced_vbi_format</span></a></dt><dt>4.7. <a href="#vbi-services2">Sliced VBI services</a></dt><dt>4.8. <a href="#v4l2-sliced-vbi-data">struct
<span class="structname">v4l2_sliced_vbi_data</span></a></dt><dt>4.9. <a href="#v4l2-mpeg-vbi-fmt-ivtv">struct <span class="structname">v4l2_mpeg_vbi_fmt_ivtv</span>
      </a></dt><dt>4.10. <a href="#v4l2-mpeg-vbi-fmt-ivtv-magic">Magic Constants for struct&nbsp;v4l2_mpeg_vbi_fmt_ivtv
	<em class="structfield"><code>magic</code></em> field</a></dt><dt>4.11. <a href="#v4l2-mpeg-vbi-itv0">struct <span class="structname">v4l2_mpeg_vbi_itv0</span>
      </a></dt><dt>4.12. <a href="#v4l2-mpeg-vbi-ITV0-1">struct <span class="structname">v4l2_mpeg_vbi_ITV0</span>
      </a></dt><dt>4.13. <a href="#v4l2-mpeg-vbi-itv0-line">struct <span class="structname">v4l2_mpeg_vbi_itv0_line</span>
      </a></dt><dt>4.14. <a href="#ITV0-Line-Identifier-Constants">Line Identifiers for struct <span class="structname">
v4l2_mpeg_vbi_itv0_line</span> <em class="structfield"><code>id
</code></em> field</a></dt><dt>4.15. <a href="#v4l2-rds-data">struct
<span class="structname">v4l2_rds_data</span></a></dt><dt>4.16. <a href="#v4l2-rds-block">Block description</a></dt><dt>4.17. <a href="#v4l2-rds-block-codes">Block defines</a></dt><dt>39. <a href="#v4l2-cropcap">struct <span class="structname">v4l2_cropcap</span></a></dt><dt>40. <a href="#v4l2-rect-crop">struct <span class="structname">v4l2_rect</span></a></dt><dt>41. <a href="#ident-v4l2-dbg-match">struct <span class="structname">v4l2_dbg_match</span></a></dt><dt>42. <a href="#v4l2-dbg-chip-ident">struct <span class="structname">v4l2_dbg_chip_ident</span></a></dt><dt>43. <a href="#ident-chip-match-types">Chip Match Types</a></dt><dt>44. <a href="#chip-ids">Chip Identifiers</a></dt><dt>45. <a href="#v4l2-dbg-match">struct <span class="structname">v4l2_dbg_match</span></a></dt><dt>46. <a href="#v4l2-dbg-register">struct <span class="structname">v4l2_dbg_register</span></a></dt><dt>47. <a href="#chip-match-types">Chip Match Types</a></dt><dt>48. <a href="#v4l2-encoder-cmd">struct <span class="structname">v4l2_encoder_cmd</span></a></dt><dt>49. <a href="#encoder-cmds">Encoder Commands</a></dt><dt>50. <a href="#encoder-flags">Encoder Command Flags</a></dt><dt>51. <a href="#v4l2-fmtdesc">struct <span class="structname">v4l2_fmtdesc</span></a></dt><dt>52. <a href="#fmtdesc-flags">Image Format Description Flags</a></dt><dt>53. <a href="#v4l2-frmsize-discrete">struct <span class="structname">v4l2_frmsize_discrete</span></a></dt><dt>54. <a href="#v4l2-frmsize-stepwise">struct <span class="structname">v4l2_frmsize_stepwise</span></a></dt><dt>55. <a href="#v4l2-frmsizeenum">struct <span class="structname">v4l2_frmsizeenum</span></a></dt><dt>56. <a href="#v4l2-frmsizetypes">enum <span class="structname">v4l2_frmsizetypes</span></a></dt><dt>57. <a href="#v4l2-frmival-stepwise">struct <span class="structname">v4l2_frmival_stepwise</span></a></dt><dt>58. <a href="#v4l2-frmivalenum">struct <span class="structname">v4l2_frmivalenum</span></a></dt><dt>59. <a href="#v4l2-frmivaltypes">enum <span class="structname">v4l2_frmivaltypes</span></a></dt><dt>60. <a href="#v4l2-input">struct <span class="structname">v4l2_input</span></a></dt><dt>61. <a href="#input-type">Input Types</a></dt><dt>62. <a href="#input-status">Input Status Flags</a></dt><dt>63. <a href="#v4l2-output">struct <span class="structname">v4l2_output</span></a></dt><dt>64. <a href="#output-type">Output Type</a></dt><dt>65. <a href="#v4l2-standard">struct <span class="structname">v4l2_standard</span></a></dt><dt>66. <a href="#v4l2-fract">struct <span class="structname">v4l2_fract</span></a></dt><dt>67. <a href="#v4l2-std-id">typedef <span class="structname">v4l2_std_id</span></a></dt><dt>68. <a href="#video-standards">Video Standards (based on [])</a></dt><dt>69. <a href="#v4l2-audio">struct <span class="structname">v4l2_audio</span></a></dt><dt>70. <a href="#audio-capability">Audio Capability Flags</a></dt><dt>71. <a href="#audio-mode">Audio Mode Flags</a></dt><dt>72. <a href="#v4l2-audioout">struct <span class="structname">v4l2_audioout</span></a></dt><dt>73. <a href="#v4l2-crop">struct <span class="structname">v4l2_crop</span></a></dt><dt>74. <a href="#v4l2-control">struct <span class="structname">v4l2_control</span></a></dt><dt>75. <a href="#v4l2-enc-idx">struct <span class="structname">v4l2_enc_idx</span></a></dt><dt>76. <a href="#v4l2-enc-idx-entry">struct <span class="structname">v4l2_enc_idx_entry</span></a></dt><dt>77. <a href="#enc-idx-flags">Index Entry Flags</a></dt><dt>78. <a href="#v4l2-ext-control">struct <span class="structname">v4l2_ext_control</span></a></dt><dt>79. <a href="#v4l2-ext-controls">struct <span class="structname">v4l2_ext_controls</span></a></dt><dt>80. <a href="#ctrl-class">Control classes</a></dt><dt>81. <a href="#v4l2-framebuffer">struct <span class="structname">v4l2_framebuffer</span></a></dt><dt>82. <a href="#framebuffer-cap">Frame Buffer Capability Flags</a></dt><dt>83. <a href="#framebuffer-flags">Frame Buffer Flags</a></dt><dt>84. <a href="#v4l2-format">struct <span class="structname">v4l2_format</span></a></dt><dt>85. <a href="#v4l2-frequency">struct <span class="structname">v4l2_frequency</span></a></dt><dt>86. <a href="#v4l2-jpegcompression">struct <span class="structname">v4l2_jpegcompression</span></a></dt><dt>87. <a href="#jpeg-markers">JPEG Markers Flags</a></dt><dt>88. <a href="#v4l2-modulator">struct <span class="structname">v4l2_modulator</span></a></dt><dt>89. <a href="#modulator-txsubchans">Modulator Audio Transmission Flags</a></dt><dt>90. <a href="#v4l2-streamparm">struct <span class="structname">v4l2_streamparm</span></a></dt><dt>91. <a href="#v4l2-captureparm">struct <span class="structname">v4l2_captureparm</span></a></dt><dt>92. <a href="#v4l2-outputparm">struct <span class="structname">v4l2_outputparm</span></a></dt><dt>93. <a href="#parm-caps">Streaming Parameters Capabilites</a></dt><dt>94. <a href="#parm-flags">Capture Parameters Flags</a></dt><dt>95. <a href="#v4l2-priority">enum v4l2_priority</a></dt><dt>96. <a href="#v4l2-sliced-vbi-cap">struct <span class="structname">v4l2_sliced_vbi_cap</span></a></dt><dt>97. <a href="#vbi-services">Sliced VBI services</a></dt><dt>98. <a href="#v4l2-tuner">struct <span class="structname">v4l2_tuner</span></a></dt><dt>99. <a href="#v4l2-tuner-type">enum v4l2_tuner_type</a></dt><dt>100. <a href="#tuner-capability">Tuner and Modulator Capability Flags</a></dt><dt>101. <a href="#tuner-rxsubchans">Tuner Audio Reception Flags</a></dt><dt>102. <a href="#tuner-audmode">Tuner Audio Modes</a></dt><dt>103. <a href="#tuner-matrix">Tuner Audio Matrix</a></dt><dt>104. <a href="#v4l2-capability">struct <span class="structname">v4l2_capability</span></a></dt><dt>105. <a href="#device-capabilities">Device Capabilities Flags</a></dt><dt>106. <a href="#v4l2-queryctrl">struct <span class="structname">v4l2_queryctrl</span></a></dt><dt>107. <a href="#v4l2-querymenu">struct <span class="structname">v4l2_querymenu</span></a></dt><dt>108. <a href="#v4l2-ctrl-type">enum v4l2_ctrl_type</a></dt><dt>109. <a href="#control-flags">Control Flags</a></dt><dt>110. <a href="#v4l2-requestbuffers">struct <span class="structname">v4l2_requestbuffers</span></a></dt><dt>111. <a href="#v4l2-hw-freq-seek">struct <span class="structname">v4l2_hw_freq_seek</span></a></dt><dt>7.1. <a href="#rc_standard_keymap">IR default keymapping</a></dt><dt>7.2. <a href="#rc_keymap_notes">Notes</a></dt><dt>8.1. <a href="#v4l-dev">V4L Device Types, Names and Numbers</a></dt></dl></div><div class="list-of-examples"><p><b>List of Examples</b></p><dl><dt>1.1. <a href="#id2758967">Information about the current video input</a></dt><dt>1.2. <a href="#id2759043">Switching to the first video input</a></dt><dt>1.3. <a href="#id2759275">Information about the current audio input</a></dt><dt>1.4. <a href="#id2759304">Switching to the first audio input</a></dt><dt>1.5. <a href="#id2759900">Information about the current video standard</a></dt><dt>1.6. <a href="#id2759920">Listing the video standards supported by the current
input</a></dt><dt>1.7. <a href="#id2760034">Selecting a new video standard</a></dt><dt>1.8. <a href="#id2761594">Enumerating all controls</a></dt><dt>1.9. <a href="#id2761692">Changing controls</a></dt><dt>1.10. <a href="#id2772888">Resetting the cropping parameters</a></dt><dt>1.11. <a href="#id2772952">Simple downscaling</a></dt><dt>1.12. <a href="#id2773008">Selecting an output area</a></dt><dt>1.13. <a href="#id2773058">Current scaling factor and pixel aspect</a></dt><dt>2.1. <a href="#id2783644">ITU-R Rec. BT.601 color conversion</a></dt><dt>2.2. <a href="#id2787260"><code class="constant">V4L2_PIX_FMT_BGR24</code> 4 × 4 pixel
image</a></dt><dt>2.3. <a href="#id2793280"><code class="constant">V4L2_PIX_FMT_SBGGR8</code> 4 × 4
pixel image</a></dt><dt>2.4. <a href="#id2793375"><code class="constant">V4L2_PIX_FMT_SGBRG8</code> 4 × 4
pixel image</a></dt><dt>2.5. <a href="#id2793621"><code class="constant">V4L2_PIX_FMT_SGRBG8</code> 4 ×
4 pixel image</a></dt><dt>2.6. <a href="#id2794283"><code class="constant">V4L2_PIX_FMT_SBGGR16</code> 4 × 4
pixel image</a></dt><dt>2.7. <a href="#id2797550"><code class="constant">V4L2_PIX_FMT_GREY</code> 4 × 4
pixel image</a></dt><dt>2.8. <a href="#id2797635"><code class="constant">V4L2_PIX_FMT_Y16</code> 4 × 4
pixel image</a></dt><dt>2.9. <a href="#id2798584"><code class="constant">V4L2_PIX_FMT_YUYV</code> 4 × 4
pixel image</a></dt><dt>2.10. <a href="#id2799185"><code class="constant">V4L2_PIX_FMT_UYVY</code> 4 × 4
pixel image</a></dt><dt>2.11. <a href="#id2800106"><code class="constant">V4L2_PIX_FMT_YVYU</code> 4 × 4
pixel image</a></dt><dt>2.12. <a href="#id2801028"><code class="constant">V4L2_PIX_FMT_VYUY</code> 4 × 4
pixel image</a></dt><dt>2.13. <a href="#id2802002"><code class="constant">V4L2_PIX_FMT_Y41P</code> 8 × 4
pixel image</a></dt><dt>2.14. <a href="#id2804236"><code class="constant">V4L2_PIX_FMT_YVU420</code> 4 × 4
pixel image</a></dt><dt>2.15. <a href="#id2805248"><code class="constant">V4L2_PIX_FMT_YVU410</code> 4 × 4
pixel image</a></dt><dt>2.16. <a href="#id2805168"><code class="constant">V4L2_PIX_FMT_YUV422P</code> 4 × 4
pixel image</a></dt><dt>2.17. <a href="#id2807201"><code class="constant">V4L2_PIX_FMT_YUV411P</code> 4 × 4
pixel image</a></dt><dt>2.18. <a href="#id2808213"><code class="constant">V4L2_PIX_FMT_NV12</code> 4 × 4
pixel image</a></dt><dt>2.19. <a href="#id2809220"><code class="constant">V4L2_PIX_FMT_NV16</code> 4 × 4
pixel image</a></dt><dt>3.1. <a href="#id2826704">Mapping buffers</a></dt><dt>3.2. <a href="#id2827286">Initiating streaming I/O with user pointers</a></dt><dt>4.1. <a href="#id2837380">Finding a framebuffer device for OSD</a></dt></dl></div><div class="preface" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="id2710266"></a>Introduction</h2></div></div></div><p>Video For Linux Two is the second version of the Video For
Linux API, a kernel interface for analog radio and video capture and
output drivers.</p><p>Early drivers used ad-hoc interfaces. These were replaced in
Linux 2.2 by Alan Cox' V4L API, based on the interface of the bttv
driver. In 1999 Bill Dirks started the development of V4L2 to fix some
shortcomings of V4L and to support a wider range of devices. The API
was revised again in 2002 prior to its inclusion in Linux 2.5/2.6, and
work continues on improvements and additions while maintaining
compatibility with existing drivers and applications. In 2006/2007
efforts began on FreeBSD drivers with a V4L2 interface.</p><p>This book documents the V4L2 API. Intended audience are
driver and application writers.</p><p>If you have questions or ideas regarding the API, please
write to the linux-media mailing list: <a class="ulink" href="https://www.linuxtv.org/lists.php" target="_top">https://linuxtv.org/lists.php</a>.</p><p>The latest version of this document and the DocBook SGML
sources are part of the <a class="ulink" href="https://www.linuxtv.org/repo/" target="_top">https://linuxtv.org/repo/</a> repository. The online version is
available here: <a class="ulink" href="https://www.linuxtv.org/downloads/video4linux/API/V4L2_API" target="_top">https://linuxtv.org/downloads/video4linux/API/V4L2_API</a>.</p></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="common"></a>Chapter&nbsp;1.&nbsp;Common API Elements</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#open">1.1. Opening and Closing Devices</a></span></dt><dd><dl><dt><span class="section"><a href="#id2758256">1.1.1. Device Naming</a></span></dt><dt><span class="section"><a href="#related">1.1.2. Related Devices</a></span></dt><dt><span class="section"><a href="#id2758585">1.1.3. Multiple Opens</a></span></dt><dt><span class="section"><a href="#id2758695">1.1.4. Shared Data Streams</a></span></dt><dt><span class="section"><a href="#id2758710">1.1.5. Functions</a></span></dt></dl></dd><dt><span class="section"><a href="#querycap">1.2. Querying Capabilities</a></span></dt><dt><span class="section"><a href="#app-pri">1.3. Application Priority</a></span></dt><dt><span class="section"><a href="#video">1.4. Video Inputs and Outputs</a></span></dt><dt><span class="section"><a href="#audio">1.5. Audio Inputs and Outputs</a></span></dt><dt><span class="section"><a href="#tuner">1.6. Tuners and Modulators</a></span></dt><dd><dl><dt><span class="section"><a href="#id2759348">1.6.1. Tuners</a></span></dt><dt><span class="section"><a href="#id2759449">1.6.2. Modulators</a></span></dt><dt><span class="section"><a href="#id2759504">1.6.3. Radio Frequency</a></span></dt><dt><span class="section"><a href="#id2759537">1.6.4. Satellite Receivers</a></span></dt></dl></dd><dt><span class="section"><a href="#standard">1.7. Video Standards</a></span></dt><dt><span class="section"><a href="#control">1.8. User Controls</a></span></dt><dt><span class="section"><a href="#extended-controls">1.9. Extended Controls</a></span></dt><dd><dl><dt><span class="section"><a href="#id2761800">1.9.1. Introduction</a></span></dt><dt><span class="section"><a href="#id2760619">1.9.2. The Extended Control API</a></span></dt><dt><span class="section"><a href="#id2762121">1.9.3. Enumerating Extended Controls</a></span></dt><dt><span class="section"><a href="#id2762247">1.9.4. Creating Control Panels</a></span></dt><dt><span class="section"><a href="#mpeg-controls">1.9.5. MPEG Control Reference</a></span></dt><dd><dl><dt><span class="section"><a href="#id2762299">1.9.5.1. Generic MPEG Controls</a></span></dt><dt><span class="section"><a href="#id2764786">1.9.5.2. CX2341x MPEG Controls</a></span></dt></dl></dd><dt><span class="section"><a href="#camera-controls">1.9.6. Camera Control Reference</a></span></dt><dt><span class="section"><a href="#fm-tx-controls">1.9.7. FM Transmitter Control Reference</a></span></dt></dl></dd><dt><span class="section"><a href="#format">1.10. Data Formats</a></span></dt><dd><dl><dt><span class="section"><a href="#id2772276">1.10.1. Data Format Negotiation</a></span></dt><dt><span class="section"><a href="#id2772464">1.10.2. Image Format Enumeration</a></span></dt></dl></dd><dt><span class="section"><a href="#crop">1.11. Image Cropping, Insertion and Scaling</a></span></dt><dd><dl><dt><span class="section"><a href="#id2772614">1.11.1. Cropping Structures</a></span></dt><dt><span class="section"><a href="#id2772775">1.11.2. Scaling Adjustments</a></span></dt><dt><span class="section"><a href="#id2772867">1.11.3. Examples</a></span></dt></dl></dd><dt><span class="section"><a href="#streaming-par">1.12. Streaming Parameters</a></span></dt></dl></div><p>Programming a V4L2 device consists of these
steps:</p><div class="itemizedlist"><ul type="disc"><li><p>Opening the device</p></li><li><p>Changing device properties, selecting a video and audio
input, video standard, picture brightness a.&nbsp;o.</p></li><li><p>Negotiating a data format</p></li><li><p>Negotiating an input/output method</p></li><li><p>The actual input/output loop</p></li><li><p>Closing the device</p></li></ul></div><p>In practice most steps are optional and can be executed out of
order. It depends on the V4L2 device type, you can read about the
details in <a class="xref" href="#devices" title="Chapter&nbsp;4.&nbsp;Interfaces">Chapter&nbsp;4, <i>Interfaces</i></a>. In this chapter we will discuss
the basic concepts applicable to all devices.</p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="open"></a>1.1.&nbsp;Opening and Closing Devices</h2></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2758256"></a>1.1.1.&nbsp;Device Naming</h3></div></div></div><p>V4L2 drivers are implemented as kernel modules, loaded
manually by the system administrator or automatically when a device is
first opened. The driver modules plug into the "videodev" kernel
module. It provides helper functions and a common application
interface specified in this document.</p><p>Each driver thus loaded registers one or more device nodes
with major number 81 and a minor number between 0 and 255. Assigning
minor numbers to V4L2 devices is entirely up to the system administrator,
this is primarily intended to solve conflicts between devices.<sup>[<a name="id2758276" href="#ftn.id2758276" class="footnote">1</a>]</sup> The module options to select minor numbers are named
after the device special file with a "_nr" suffix. For example "video_nr"
for <code class="filename">/dev/video</code> video capture devices. The number is
an offset to the base minor number associated with the device type.
<sup>[<a name="id2758298" href="#ftn.id2758298" class="footnote">2</a>]</sup> When the driver supports multiple devices of the same
type more than one minor number can be assigned, separated by commas:
</p><div class="informalexample"><pre class="screen">&gt; insmod mydriver.o video_nr=0,1 radio_nr=0,1</pre></div><p>In <code class="filename">/etc/modules.conf</code> this may be
written as: </p><div class="informalexample"><pre class="screen">alias char-major-81-0 mydriver
alias char-major-81-1 mydriver
alias char-major-81-64 mydriver              <a name="alias"></a><img src="Video%20for%20Linux%20Two%20API%20Specification_files/1.html" alt="1" border="0">
options mydriver video_nr=0,1 radio_nr=0,1   <a name="options"></a><img src="Video%20for%20Linux%20Two%20API%20Specification_files/2.html" alt="2" border="0">
	  </pre><div class="calloutlist"><table summary="Callout list" border="0"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#alias"><img src="Video%20for%20Linux%20Two%20API%20Specification_files/1.html" alt="1" border="0"></a> </p></td><td valign="top" align="left"><p>When an application attempts to open a device
special file with major number 81 and minor number 0, 1, or 64, load
"mydriver" (and the "videodev" module it depends upon).</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#options"><img src="Video%20for%20Linux%20Two%20API%20Specification_files/2.html" alt="2" border="0"></a> </p></td><td valign="top" align="left"><p>Register the first two video capture devices with
minor number 0 and 1 (base number is 0), the first two radio device
with minor number 64 and 65 (base 64).</p></td></tr></tbody></table></div></div><p> When no minor number is given as module
option the driver supplies a default. <a class="xref" href="#devices" title="Chapter&nbsp;4.&nbsp;Interfaces">Chapter&nbsp;4, <i>Interfaces</i></a>
recommends the base minor numbers to be used for the various device
types. Obviously minor numbers must be unique. When the number is
already in use the <span class="emphasis"><em>offending device</em></span> will not be
registered. </p><p>By convention system administrators create various
character device special files with these major and minor numbers in
the <code class="filename">/dev</code> directory. The names recomended for the
different V4L2 device types are listed in <a class="xref" href="#devices" title="Chapter&nbsp;4.&nbsp;Interfaces">Chapter&nbsp;4, <i>Interfaces</i></a>.
</p><p>The creation of character special files (with
<span class="application">mknod</span>) is a privileged operation and
devices cannot be opened by major and minor number. That means
applications cannot <span class="emphasis"><em>reliable</em></span> scan for loaded or
installed drivers. The user must enter a device name, or the
application can try the conventional device names.</p><p>Under the device filesystem (devfs) the minor number
options are ignored. V4L2 drivers (or by proxy the "videodev" module)
automatically create the required device files in the
<code class="filename">/dev/v4l</code> directory using the conventional device
names above.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="related"></a>1.1.2.&nbsp;Related Devices</h3></div></div></div><p>Devices can support several related functions. For example
video capturing, video overlay and VBI capturing are related because
these functions share, amongst other, the same video input and tuner
frequency. V4L and earlier versions of V4L2 used the same device name
and minor number for video capturing and overlay, but different ones
for VBI. Experience showed this approach has several problems<sup>[<a name="id2758454" href="#ftn.id2758454" class="footnote">3</a>]</sup>, and to make things worse the V4L videodev module
used to prohibit multiple opens of a device.</p><p>As a remedy the present version of the V4L2 API relaxed the
concept of device types with specific names and minor numbers. For
compatibility with old applications drivers must still register different
minor numbers to assign a default function to the device. But if related
functions are supported by the driver they must be available under all
registered minor numbers. The desired function can be selected after
opening the device as described in <a class="xref" href="#devices" title="Chapter&nbsp;4.&nbsp;Interfaces">Chapter&nbsp;4, <i>Interfaces</i></a>.</p><p>Imagine a driver supporting video capturing, video
overlay, raw VBI capturing, and FM radio reception. It registers three
devices with minor number 0, 64 and 224 (this numbering scheme is
inherited from the V4L API). Regardless if
<code class="filename">/dev/video</code> (81, 0) or
<code class="filename">/dev/vbi</code> (81, 224) is opened the application can
select any one of the video capturing, overlay or VBI capturing
functions. Without programming (e.&nbsp;g. reading from the device
with <span class="application">dd</span> or <span class="application">cat</span>)
<code class="filename">/dev/video</code> captures video images, while
<code class="filename">/dev/vbi</code> captures raw VBI data.
<code class="filename">/dev/radio</code> (81, 64) is invariable a radio device,
unrelated to the video functions. Being unrelated does not imply the
devices can be used at the same time, however. The <a class="link" href="#func-open" title="V4L2 open()"><code class="function">open()</code></a>
function may very well return an <span class="errorcode">EBUSY</span> error code.</p><p>Besides video input or output the hardware may also
support audio sampling or playback. If so, these functions are
implemented as OSS or ALSA PCM devices and eventually OSS or ALSA
audio mixer. The V4L2 API makes no provisions yet to find these
related devices. If you have an idea please write to the linux-media
mailing list: <a class="ulink" href="https://www.linuxtv.org/lists.php" target="_top">https://linuxtv.org/lists.php</a>.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2758585"></a>1.1.3.&nbsp;Multiple Opens</h3></div></div></div><p>In general, V4L2 devices can be opened more than once.
When this is supported by the driver, users can for example start a
"panel" application to change controls like brightness or audio
volume, while another application captures video and audio. In other words, panel
applications are comparable to an OSS or ALSA audio mixer application.
When a device supports multiple functions like capturing and overlay
<span class="emphasis"><em>simultaneously</em></span>, multiple opens allow concurrent
use of the device by forked processes or specialized applications.</p><p>Multiple opens are optional, although drivers should
permit at least concurrent accesses without data exchange, i.&nbsp;e. panel
applications. This implies <a class="link" href="#func-open" title="V4L2 open()"><code class="function">open()</code></a> can return an <span class="errorcode">EBUSY</span> error code when the
device is already in use, as well as <a class="link" href="#func-ioctl" title="V4L2 ioctl()"><code class="function">ioctl()</code></a> functions initiating
data exchange (namely the <a class="link" href="#vidioc-g-fmt" title="ioctl VIDIOC_G_FMT, VIDIOC_S_FMT, VIDIOC_TRY_FMT"><code class="constant">VIDIOC_S_FMT</code></a> ioctl), and the <a class="link" href="#func-read" title="V4L2 read()"><code class="function">read()</code></a>
and <a class="link" href="#func-write" title="V4L2 write()"><code class="function">write()</code></a> functions.</p><p>Mere opening a V4L2 device does not grant exclusive
access.<sup>[<a name="id2758670" href="#ftn.id2758670" class="footnote">4</a>]</sup> Initiating data exchange however assigns the right
to read or write the requested type of data, and to change related
properties, to this file descriptor. Applications can request
additional access privileges using the priority mechanism described in
<a class="xref" href="#app-pri" title="1.3.&nbsp;Application Priority">Section&nbsp;1.3, “Application Priority”</a>.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2758695"></a>1.1.4.&nbsp;Shared Data Streams</h3></div></div></div><p>V4L2 drivers should not support multiple applications
reading or writing the same data stream on a device by copying
buffers, time multiplexing or similar means. This is better handled by
a proxy application in user space. When the driver supports stream
sharing anyway it must be implemented transparently. The V4L2 API does
not specify how conflicts are solved. </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2758710"></a>1.1.5.&nbsp;Functions</h3></div></div></div><p>To open and close V4L2 devices applications use the
<a class="link" href="#func-open" title="V4L2 open()"><code class="function">open()</code></a> and <a class="link" href="#func-close" title="V4L2 close()"><code class="function">close()</code></a> function, respectively. Devices are
programmed using the <a class="link" href="#func-ioctl" title="V4L2 ioctl()"><code class="function">ioctl()</code></a> function as explained in the
following sections.</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="querycap"></a>1.2.&nbsp;Querying Capabilities</h2></div></div></div><p>Because V4L2 covers a wide variety of devices not all
aspects of the API are equally applicable to all types of devices.
Furthermore devices of the same type have different capabilities and
this specification permits the omission of a few complicated and less
important parts of the API.</p><p>The <a class="link" href="#vidioc-querycap" title="ioctl VIDIOC_QUERYCAP"><code class="constant">VIDIOC_QUERYCAP</code></a> ioctl is available to check if the kernel
device is compatible with this specification, and to query the <a class="link" href="#devices" title="Chapter&nbsp;4.&nbsp;Interfaces">functions</a> and <a class="link" href="#io" title="Chapter&nbsp;3.&nbsp;Input/Output">I/O
methods</a> supported by the device. Other features can be queried
by calling the respective ioctl, for example <a class="link" href="#vidioc-enuminput" title="ioctl VIDIOC_ENUMINPUT"><code class="constant">VIDIOC_ENUMINPUT</code></a>
to learn about the number, types and names of video connectors on the
device. Although abstraction is a major objective of this API, the
ioctl also allows driver specific applications to reliable identify
the driver.</p><p>All V4L2 drivers must support
<code class="constant">VIDIOC_QUERYCAP</code>. Applications should always call
this ioctl after opening the device.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="app-pri"></a>1.3.&nbsp;Application Priority</h2></div></div></div><p>When multiple applications share a device it may be
desirable to assign them different priorities. Contrary to the
traditional "rm -rf /" school of thought a video recording application
could for example block other applications from changing video
controls or switching the current TV channel. Another objective is to
permit low priority applications working in background, which can be
preempted by user controlled applications and automatically regain
control of the device at a later time.</p><p>Since these features cannot be implemented entirely in user
space V4L2 defines the <a class="link" href="#vidioc-g-priority" title="ioctl VIDIOC_G_PRIORITY, VIDIOC_S_PRIORITY"><code class="constant">VIDIOC_G_PRIORITY</code></a> and <a class="link" href="#vidioc-g-priority" title="ioctl VIDIOC_G_PRIORITY, VIDIOC_S_PRIORITY"><code class="constant">VIDIOC_S_PRIORITY</code></a>
ioctls to request and query the access priority associate with a file
descriptor. Opening a device assigns a medium priority, compatible
with earlier versions of V4L2 and drivers not supporting these ioctls.
Applications requiring a different priority will usually call
<code class="constant">VIDIOC_S_PRIORITY</code> after verifying the device with
the <a class="link" href="#vidioc-querycap" title="ioctl VIDIOC_QUERYCAP"><code class="constant">VIDIOC_QUERYCAP</code></a> ioctl.</p><p>Ioctls changing driver properties, such as <a class="link" href="#vidioc-g-input" title="ioctl VIDIOC_G_INPUT, VIDIOC_S_INPUT"><code class="constant">VIDIOC_S_INPUT</code></a>,
return an <span class="errorcode">EBUSY</span> error code after another application obtained higher priority.
An event mechanism to notify applications about asynchronous property
changes has been proposed but not added yet.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="video"></a>1.4.&nbsp;Video Inputs and Outputs</h2></div></div></div><p>Video inputs and outputs are physical connectors of a
device. These can be for example RF connectors (antenna/cable), CVBS
a.k.a. Composite Video, S-Video or RGB connectors. Only video and VBI
capture devices have inputs, output devices have outputs, at least one
each. Radio devices have no video inputs or outputs.</p><p>To learn about the number and attributes of the
available inputs and outputs applications can enumerate them with the
<a class="link" href="#vidioc-enuminput" title="ioctl VIDIOC_ENUMINPUT"><code class="constant">VIDIOC_ENUMINPUT</code></a> and <a class="link" href="#vidioc-enumoutput" title="ioctl VIDIOC_ENUMOUTPUT"><code class="constant">VIDIOC_ENUMOUTPUT</code></a> ioctl, respectively. The
struct&nbsp;<a class="link" href="#v4l2-input" title="Table&nbsp;60.&nbsp;struct v4l2_input">v4l2_input</a> returned by the <code class="constant">VIDIOC_ENUMINPUT</code>
ioctl also contains signal status information applicable when the
current video input is queried.</p><p>The <a class="link" href="#vidioc-g-input" title="ioctl VIDIOC_G_INPUT, VIDIOC_S_INPUT"><code class="constant">VIDIOC_G_INPUT</code></a> and <a class="link" href="#vidioc-g-output" title="ioctl VIDIOC_G_OUTPUT, VIDIOC_S_OUTPUT"><code class="constant">VIDIOC_G_OUTPUT</code></a> ioctl return the
index of the current video input or output. To select a different
input or output applications call the <a class="link" href="#vidioc-g-input" title="ioctl VIDIOC_G_INPUT, VIDIOC_S_INPUT"><code class="constant">VIDIOC_S_INPUT</code></a> and
<a class="link" href="#vidioc-g-output" title="ioctl VIDIOC_G_OUTPUT, VIDIOC_S_OUTPUT"><code class="constant">VIDIOC_S_OUTPUT</code></a> ioctl. Drivers must implement all the input ioctls
when the device has one or more inputs, all the output ioctls when the
device has one or more outputs.</p><div class="example"><a name="id2758967"></a><p class="title"><b>Example&nbsp;1.1.&nbsp;Information about the current video input</b></p><div class="example-contents"><pre class="programlisting">struct&nbsp;<a class="link" href="#v4l2-input" title="Table&nbsp;60.&nbsp;struct v4l2_input">v4l2_input</a> input;
int index;

if (-1 == ioctl (fd, <a class="link" href="#vidioc-g-input" title="ioctl VIDIOC_G_INPUT, VIDIOC_S_INPUT"><code class="constant">VIDIOC_G_INPUT</code></a>, &amp;index)) {
	perror ("VIDIOC_G_INPUT");
	exit (EXIT_FAILURE);
}

memset (&amp;input, 0, sizeof (input));
input.index = index;

if (-1 == ioctl (fd, <a class="link" href="#vidioc-enuminput" title="ioctl VIDIOC_ENUMINPUT"><code class="constant">VIDIOC_ENUMINPUT</code></a>, &amp;input)) {
	perror ("VIDIOC_ENUMINPUT");
	exit (EXIT_FAILURE);
}

printf ("Current input: %s\n", input.name);
      </pre></div></div><br class="example-break"><div class="example"><a name="id2759043"></a><p class="title"><b>Example&nbsp;1.2.&nbsp;Switching to the first video input</b></p><div class="example-contents"><pre class="programlisting">int index;

index = 0;

if (-1 == ioctl (fd, <a class="link" href="#vidioc-g-input" title="ioctl VIDIOC_G_INPUT, VIDIOC_S_INPUT"><code class="constant">VIDIOC_S_INPUT</code></a>, &amp;index)) {
	perror ("VIDIOC_S_INPUT");
	exit (EXIT_FAILURE);
}
      </pre></div></div><br class="example-break"></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="audio"></a>1.5.&nbsp;Audio Inputs and Outputs</h2></div></div></div><p>Audio inputs and outputs are physical connectors of a
device. Video capture devices have inputs, output devices have
outputs, zero or more each. Radio devices have no audio inputs or
outputs. They have exactly one tuner which in fact
<span class="emphasis"><em>is</em></span> an audio source, but this API associates
tuners with video inputs or outputs only, and radio devices have
none of these.<sup>[<a name="id2759087" href="#ftn.id2759087" class="footnote">5</a>]</sup> A connector on a TV card to loop back the received
audio signal to a sound card is not considered an audio output.</p><p>Audio and video inputs and outputs are associated. Selecting
a video source also selects an audio source. This is most evident when
the video and audio source is a tuner. Further audio connectors can
combine with more than one video input or output. Assumed two
composite video inputs and two audio inputs exist, there may be up to
four valid combinations. The relation of video and audio connectors
is defined in the <em class="structfield"><code>audioset</code></em> field of the
respective struct&nbsp;<a class="link" href="#v4l2-input" title="Table&nbsp;60.&nbsp;struct v4l2_input">v4l2_input</a> or struct&nbsp;<a class="link" href="#v4l2-output" title="Table&nbsp;63.&nbsp;struct v4l2_output">v4l2_output</a>, where each bit represents
the index number, starting at zero, of one audio input or output.</p><p>To learn about the number and attributes of the
available inputs and outputs applications can enumerate them with the
<a class="link" href="#vidioc-enumaudio" title="ioctl VIDIOC_ENUMAUDIO"><code class="constant">VIDIOC_ENUMAUDIO</code></a> and <a class="link" href="#vidioc-enumaudioout" title="ioctl VIDIOC_ENUMAUDOUT"><code class="constant">VIDIOC_ENUMAUDOUT</code></a> ioctl, respectively. The
struct&nbsp;<a class="link" href="#v4l2-audio" title="Table&nbsp;69.&nbsp;struct v4l2_audio">v4l2_audio</a> returned by the <code class="constant">VIDIOC_ENUMAUDIO</code> ioctl
also contains signal status information applicable when the current
audio input is queried.</p><p>The <a class="link" href="#vidioc-g-audio" title="ioctl VIDIOC_G_AUDIO, VIDIOC_S_AUDIO"><code class="constant">VIDIOC_G_AUDIO</code></a> and <a class="link" href="#vidioc-g-audioout" title="ioctl VIDIOC_G_AUDOUT, VIDIOC_S_AUDOUT"><code class="constant">VIDIOC_G_AUDOUT</code></a> ioctl report
the current audio input and output, respectively. Note that, unlike
<a class="link" href="#vidioc-g-input" title="ioctl VIDIOC_G_INPUT, VIDIOC_S_INPUT"><code class="constant">VIDIOC_G_INPUT</code></a> and <a class="link" href="#vidioc-g-output" title="ioctl VIDIOC_G_OUTPUT, VIDIOC_S_OUTPUT"><code class="constant">VIDIOC_G_OUTPUT</code></a> these ioctls return a structure
as <code class="constant">VIDIOC_ENUMAUDIO</code> and
<code class="constant">VIDIOC_ENUMAUDOUT</code> do, not just an index.</p><p>To select an audio input and change its properties
applications call the <a class="link" href="#vidioc-g-audio" title="ioctl VIDIOC_G_AUDIO, VIDIOC_S_AUDIO"><code class="constant">VIDIOC_S_AUDIO</code></a> ioctl. To select an audio
output (which presently has no changeable properties) applications
call the <a class="link" href="#vidioc-g-audioout" title="ioctl VIDIOC_G_AUDOUT, VIDIOC_S_AUDOUT"><code class="constant">VIDIOC_S_AUDOUT</code></a> ioctl.</p><p>Drivers must implement all input ioctls when the device
has one or more inputs, all output ioctls when the device has one
or more outputs. When the device has any audio inputs or outputs the
driver must set the <code class="constant">V4L2_CAP_AUDIO</code> flag in the
struct&nbsp;<a class="link" href="#v4l2-capability" title="Table&nbsp;104.&nbsp;struct v4l2_capability">v4l2_capability</a> returned by the <a class="link" href="#vidioc-querycap" title="ioctl VIDIOC_QUERYCAP"><code class="constant">VIDIOC_QUERYCAP</code></a> ioctl.</p><div class="example"><a name="id2759275"></a><p class="title"><b>Example&nbsp;1.3.&nbsp;Information about the current audio input</b></p><div class="example-contents"><pre class="programlisting">struct&nbsp;<a class="link" href="#v4l2-audio" title="Table&nbsp;69.&nbsp;struct v4l2_audio">v4l2_audio</a> audio;

memset (&amp;audio, 0, sizeof (audio));

if (-1 == ioctl (fd, <a class="link" href="#vidioc-g-audio" title="ioctl VIDIOC_G_AUDIO, VIDIOC_S_AUDIO"><code class="constant">VIDIOC_G_AUDIO</code></a>, &amp;audio)) {
	perror ("VIDIOC_G_AUDIO");
	exit (EXIT_FAILURE);
}

printf ("Current input: %s\n", audio.name);
      </pre></div></div><br class="example-break"><div class="example"><a name="id2759304"></a><p class="title"><b>Example&nbsp;1.4.&nbsp;Switching to the first audio input</b></p><div class="example-contents"><pre class="programlisting">struct&nbsp;<a class="link" href="#v4l2-audio" title="Table&nbsp;69.&nbsp;struct v4l2_audio">v4l2_audio</a> audio;

memset (&amp;audio, 0, sizeof (audio)); /* clear audio.mode, audio.reserved */

audio.index = 0;

if (-1 == ioctl (fd, <a class="link" href="#vidioc-g-audio" title="ioctl VIDIOC_G_AUDIO, VIDIOC_S_AUDIO"><code class="constant">VIDIOC_S_AUDIO</code></a>, &amp;audio)) {
	perror ("VIDIOC_S_AUDIO");
	exit (EXIT_FAILURE);
}
      </pre></div></div><br class="example-break"></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tuner"></a>1.6.&nbsp;Tuners and Modulators</h2></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2759348"></a>1.6.1.&nbsp;Tuners</h3></div></div></div><p>Video input devices can have one or more tuners
demodulating a RF signal. Each tuner is associated with one or more
video inputs, depending on the number of RF connectors on the tuner.
The <em class="structfield"><code>type</code></em> field of the respective
struct&nbsp;<a class="link" href="#v4l2-input" title="Table&nbsp;60.&nbsp;struct v4l2_input">v4l2_input</a> returned by the <a class="link" href="#vidioc-enuminput" title="ioctl VIDIOC_ENUMINPUT"><code class="constant">VIDIOC_ENUMINPUT</code></a> ioctl is set to
<code class="constant">V4L2_INPUT_TYPE_TUNER</code> and its
<em class="structfield"><code>tuner</code></em> field contains the index number of
the tuner.</p><p>Radio devices have exactly one tuner with index zero, no
video inputs.</p><p>To query and change tuner properties applications use the
<a class="link" href="#vidioc-g-tuner" title="ioctl VIDIOC_G_TUNER, VIDIOC_S_TUNER"><code class="constant">VIDIOC_G_TUNER</code></a> and <a class="link" href="#vidioc-g-tuner" title="ioctl VIDIOC_G_TUNER, VIDIOC_S_TUNER"><code class="constant">VIDIOC_S_TUNER</code></a> ioctl, respectively. The
struct&nbsp;<a class="link" href="#v4l2-tuner" title="Table&nbsp;98.&nbsp;struct v4l2_tuner">v4l2_tuner</a> returned by <code class="constant">VIDIOC_G_TUNER</code> also
contains signal status information applicable when the tuner of the
current video input, or a radio tuner is queried. Note that
<code class="constant">VIDIOC_S_TUNER</code> does not switch the current tuner,
when there is more than one at all. The tuner is solely determined by
the current video input. Drivers must support both ioctls and set the
<code class="constant">V4L2_CAP_TUNER</code> flag in the struct&nbsp;<a class="link" href="#v4l2-capability" title="Table&nbsp;104.&nbsp;struct v4l2_capability">v4l2_capability</a>
returned by the <a class="link" href="#vidioc-querycap" title="ioctl VIDIOC_QUERYCAP"><code class="constant">VIDIOC_QUERYCAP</code></a> ioctl when the device has one or
more tuners.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2759449"></a>1.6.2.&nbsp;Modulators</h3></div></div></div><p>Video output devices can have one or more modulators, uh,
modulating a video signal for radiation or connection to the antenna
input of a TV set or video recorder. Each modulator is associated with
one or more video outputs, depending on the number of RF connectors on
the modulator. The <em class="structfield"><code>type</code></em> field of the
respective struct&nbsp;<a class="link" href="#v4l2-output" title="Table&nbsp;63.&nbsp;struct v4l2_output">v4l2_output</a> returned by the <a class="link" href="#vidioc-enumoutput" title="ioctl VIDIOC_ENUMOUTPUT"><code class="constant">VIDIOC_ENUMOUTPUT</code></a> ioctl is
set to <code class="constant">V4L2_OUTPUT_TYPE_MODULATOR</code> and its
<em class="structfield"><code>modulator</code></em> field contains the index number
of the modulator. This specification does not define radio output
devices.</p><p>To query and change modulator properties applications use
the <a class="link" href="#vidioc-g-modulator" title="ioctl VIDIOC_G_MODULATOR, VIDIOC_S_MODULATOR"><code class="constant">VIDIOC_G_MODULATOR</code></a> and <a class="link" href="#vidioc-g-modulator" title="ioctl VIDIOC_G_MODULATOR, VIDIOC_S_MODULATOR"><code class="constant">VIDIOC_S_MODULATOR</code></a> ioctl. Note that
<code class="constant">VIDIOC_S_MODULATOR</code> does not switch the current
modulator, when there is more than one at all. The modulator is solely
determined by the current video output. Drivers must support both
ioctls and set the <code class="constant">V4L2_CAP_MODULATOR</code> flag in
the struct&nbsp;<a class="link" href="#v4l2-capability" title="Table&nbsp;104.&nbsp;struct v4l2_capability">v4l2_capability</a> returned by the <a class="link" href="#vidioc-querycap" title="ioctl VIDIOC_QUERYCAP"><code class="constant">VIDIOC_QUERYCAP</code></a> ioctl when the
device has one or more modulators.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2759504"></a>1.6.3.&nbsp;Radio Frequency</h3></div></div></div><p>To get and set the tuner or modulator radio frequency
applications use the <a class="link" href="#vidioc-g-frequency" title="ioctl VIDIOC_G_FREQUENCY, VIDIOC_S_FREQUENCY"><code class="constant">VIDIOC_G_FREQUENCY</code></a> and <a class="link" href="#vidioc-g-frequency" title="ioctl VIDIOC_G_FREQUENCY, VIDIOC_S_FREQUENCY"><code class="constant">VIDIOC_S_FREQUENCY</code></a>
ioctl which both take a pointer to a struct&nbsp;<a class="link" href="#v4l2-frequency" title="Table&nbsp;85.&nbsp;struct v4l2_frequency">v4l2_frequency</a>. These ioctls
are used for TV and radio devices alike. Drivers must support both
ioctls when the tuner or modulator ioctls are supported, or
when the device is a radio device.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2759537"></a>1.6.4.&nbsp;Satellite Receivers</h3></div></div></div><p>To be discussed. See also 
proposals by Peter Schlaf, video4linux-list@redhat.com on 23 Oct 2002,
subject: "Re: [V4L] Re: v4l2 api".</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="standard"></a>1.7.&nbsp;Video Standards</h2></div></div></div><p>Video devices typically support one or more different video
standards or variations of standards. Each video input and output may
support another set of standards. This set is reported by the
<em class="structfield"><code>std</code></em> field of struct&nbsp;<a class="link" href="#v4l2-input" title="Table&nbsp;60.&nbsp;struct v4l2_input">v4l2_input</a> and
struct&nbsp;<a class="link" href="#v4l2-output" title="Table&nbsp;63.&nbsp;struct v4l2_output">v4l2_output</a> returned by the <a class="link" href="#vidioc-enuminput" title="ioctl VIDIOC_ENUMINPUT"><code class="constant">VIDIOC_ENUMINPUT</code></a> and
<a class="link" href="#vidioc-enumoutput" title="ioctl VIDIOC_ENUMOUTPUT"><code class="constant">VIDIOC_ENUMOUTPUT</code></a> ioctl, respectively.</p><p>V4L2 defines one bit for each analog video standard
currently in use worldwide, and sets aside bits for driver defined
standards, e.&nbsp;g. hybrid standards to watch NTSC video tapes on PAL TVs
and vice versa. Applications can use the predefined bits to select a
particular standard, although presenting the user a menu of supported
standards is preferred. To enumerate and query the attributes of the
supported standards applications use the <a class="link" href="#vidioc-enumstd" title="ioctl VIDIOC_ENUMSTD"><code class="constant">VIDIOC_ENUMSTD</code></a> ioctl.</p><p>Many of the defined standards are actually just variations
of a few major standards. The hardware may in fact not distinguish
between them, or do so internal and switch automatically. Therefore
enumerated standards also contain sets of one or more standard
bits.</p><p>Assume a hypothetic tuner capable of demodulating B/PAL,
G/PAL and I/PAL signals. The first enumerated standard is a set of B
and G/PAL, switched automatically depending on the selected radio
frequency in UHF or VHF band. Enumeration gives a "PAL-B/G" or "PAL-I"
choice. Similar a Composite input may collapse standards, enumerating
"PAL-B/G/H/I", "NTSC-M" and "SECAM-D/K".<sup>[<a name="id2759675" href="#ftn.id2759675" class="footnote">6</a>]</sup></p><p>To query and select the standard used by the current video
input or output applications call the <a class="link" href="#vidioc-g-std" title="ioctl VIDIOC_G_STD, VIDIOC_S_STD"><code class="constant">VIDIOC_G_STD</code></a> and
<a class="link" href="#vidioc-g-std" title="ioctl VIDIOC_G_STD, VIDIOC_S_STD"><code class="constant">VIDIOC_S_STD</code></a> ioctl, respectively. The <span class="emphasis"><em>received</em></span>
standard can be sensed with the <a class="link" href="#vidioc-querystd" title="ioctl VIDIOC_QUERYSTD"><code class="constant">VIDIOC_QUERYSTD</code></a> ioctl. Note parameter of all these ioctls is a pointer to a <a class="link" href="#v4l2-std-id" title="Table&nbsp;67.&nbsp;typedef v4l2_std_id">v4l2_std_id</a> type (a standard set), <span class="emphasis"><em>not</em></span> an index into the standard enumeration.<sup>[<a name="id2759727" href="#ftn.id2759727" class="footnote">7</a>]</sup> Drivers must implement all video standard ioctls
when the device has one or more video inputs or outputs.</p><p>Special rules apply to USB cameras where the notion of video
standards makes little sense. More generally any capture device,
output devices accordingly, which is </p><div class="itemizedlist"><ul type="disc"><li><p>incapable of capturing fields or frames at the nominal
rate of the video standard, or</p></li><li><p>where <a class="link" href="#buffer" title="3.5.&nbsp;Buffers">timestamps</a> refer
to the instant the field or frame was received by the driver, not the
capture time, or</p></li><li><p>where <a class="link" href="#buffer" title="3.5.&nbsp;Buffers">sequence numbers</a>
refer to the frames received by the driver, not the captured
frames.</p></li></ul></div><p> Here the driver shall set the
<em class="structfield"><code>std</code></em> field of struct&nbsp;<a class="link" href="#v4l2-input" title="Table&nbsp;60.&nbsp;struct v4l2_input">v4l2_input</a> and struct&nbsp;<a class="link" href="#v4l2-output" title="Table&nbsp;63.&nbsp;struct v4l2_output">v4l2_output</a>
to zero, the <code class="constant">VIDIOC_G_STD</code>,
<code class="constant">VIDIOC_S_STD</code>,
<code class="constant">VIDIOC_QUERYSTD</code> and
<code class="constant">VIDIOC_ENUMSTD</code> ioctls shall return the
<span class="errorcode">EINVAL</span> error code.<sup>[<a name="id2759883" href="#ftn.id2759883" class="footnote">8</a>]</sup></p><div class="example"><a name="id2759900"></a><p class="title"><b>Example&nbsp;1.5.&nbsp;Information about the current video standard</b></p><div class="example-contents"><pre class="programlisting"><a class="link" href="#v4l2-std-id" title="Table&nbsp;67.&nbsp;typedef v4l2_std_id">v4l2_std_id</a> std_id;
struct&nbsp;<a class="link" href="#v4l2-standard" title="Table&nbsp;65.&nbsp;struct v4l2_standard">v4l2_standard</a> standard;

if (-1 == ioctl (fd, <a class="link" href="#vidioc-g-std" title="ioctl VIDIOC_G_STD, VIDIOC_S_STD"><code class="constant">VIDIOC_G_STD</code></a>, &amp;std_id)) {
	/* Note when VIDIOC_ENUMSTD always returns EINVAL this
	   is no video device or it falls under the USB exception,
	   and VIDIOC_G_STD returning EINVAL is no error. */

	perror ("VIDIOC_G_STD");
	exit (EXIT_FAILURE);
}

memset (&amp;standard, 0, sizeof (standard));
standard.index = 0;

while (0 == ioctl (fd, <a class="link" href="#vidioc-enumstd" title="ioctl VIDIOC_ENUMSTD"><code class="constant">VIDIOC_ENUMSTD</code></a>, &amp;standard)) {
	if (standard.id &amp; std_id) {
	       printf ("Current video standard: %s\n", standard.name);
	       exit (EXIT_SUCCESS);
	}

	standard.index++;
}

/* EINVAL indicates the end of the enumeration, which cannot be
   empty unless this device falls under the USB exception. */

if (errno == EINVAL || standard.index == 0) {
	perror ("VIDIOC_ENUMSTD");
	exit (EXIT_FAILURE);
}
      </pre></div></div><br class="example-break"><div class="example"><a name="id2759920"></a><p class="title"><b>Example&nbsp;1.6.&nbsp;Listing the video standards supported by the current
input</b></p><div class="example-contents"><pre class="programlisting">struct&nbsp;<a class="link" href="#v4l2-input" title="Table&nbsp;60.&nbsp;struct v4l2_input">v4l2_input</a> input;
struct&nbsp;<a class="link" href="#v4l2-standard" title="Table&nbsp;65.&nbsp;struct v4l2_standard">v4l2_standard</a> standard;

memset (&amp;input, 0, sizeof (input));

if (-1 == ioctl (fd, <a class="link" href="#vidioc-g-input" title="ioctl VIDIOC_G_INPUT, VIDIOC_S_INPUT"><code class="constant">VIDIOC_G_INPUT</code></a>, &amp;input.index)) {
	perror ("VIDIOC_G_INPUT");
	exit (EXIT_FAILURE);
}

if (-1 == ioctl (fd, <a class="link" href="#vidioc-enuminput" title="ioctl VIDIOC_ENUMINPUT"><code class="constant">VIDIOC_ENUMINPUT</code></a>, &amp;input)) {
	perror ("VIDIOC_ENUM_INPUT");
	exit (EXIT_FAILURE);
}

printf ("Current input %s supports:\n", input.name);

memset (&amp;standard, 0, sizeof (standard));
standard.index = 0;

while (0 == ioctl (fd, <a class="link" href="#vidioc-enumstd" title="ioctl VIDIOC_ENUMSTD"><code class="constant">VIDIOC_ENUMSTD</code></a>, &amp;standard)) {
	if (standard.id &amp; input.std)
		printf ("%s\n", standard.name);

	standard.index++;
}

/* EINVAL indicates the end of the enumeration, which cannot be
   empty unless this device falls under the USB exception. */

if (errno != EINVAL || standard.index == 0) {
	perror ("VIDIOC_ENUMSTD");
	exit (EXIT_FAILURE);
}
      </pre></div></div><br class="example-break"><div class="example"><a name="id2760034"></a><p class="title"><b>Example&nbsp;1.7.&nbsp;Selecting a new video standard</b></p><div class="example-contents"><pre class="programlisting">struct&nbsp;<a class="link" href="#v4l2-input" title="Table&nbsp;60.&nbsp;struct v4l2_input">v4l2_input</a> input;
<a class="link" href="#v4l2-std-id" title="Table&nbsp;67.&nbsp;typedef v4l2_std_id">v4l2_std_id</a> std_id;

memset (&amp;input, 0, sizeof (input));

if (-1 == ioctl (fd, <a class="link" href="#vidioc-g-input" title="ioctl VIDIOC_G_INPUT, VIDIOC_S_INPUT"><code class="constant">VIDIOC_G_INPUT</code></a>, &amp;input.index)) {
	perror ("VIDIOC_G_INPUT");
	exit (EXIT_FAILURE);
}

if (-1 == ioctl (fd, <a class="link" href="#vidioc-enuminput" title="ioctl VIDIOC_ENUMINPUT"><code class="constant">VIDIOC_ENUMINPUT</code></a>, &amp;input)) {
	perror ("VIDIOC_ENUM_INPUT");
	exit (EXIT_FAILURE);
}

if (0 == (input.std &amp; V4L2_STD_PAL_BG)) {
	fprintf (stderr, "Oops. B/G PAL is not supported.\n");
	exit (EXIT_FAILURE);
}

/* Note this is also supposed to work when only B
   <span class="emphasis"><em>or</em></span> G/PAL is supported. */

std_id = V4L2_STD_PAL_BG;

if (-1 == ioctl (fd, <a class="link" href="#vidioc-g-std" title="ioctl VIDIOC_G_STD, VIDIOC_S_STD"><code class="constant">VIDIOC_S_STD</code></a>, &amp;std_id)) {
	perror ("VIDIOC_S_STD");
	exit (EXIT_FAILURE);
}
      </pre></div></div><br class="example-break"></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="control"></a>1.8.&nbsp;User Controls</h2></div></div></div><p>Devices typically have a number of user-settable controls
such as brightness, saturation and so on, which would be presented to
the user on a graphical user interface. But, different devices
will have different controls available, and furthermore, the range of
possible values, and the default value will vary from device to
device. The control ioctls provide the information and a mechanism to
create a nice user interface for these controls that will work
correctly with any device.</p><p>All controls are accessed using an ID value. V4L2 defines
several IDs for specific purposes. Drivers can also implement their
own custom controls using <code class="constant">V4L2_CID_PRIVATE_BASE</code>
and higher values. The pre-defined control IDs have the prefix
<code class="constant">V4L2_CID_</code>, and are listed in <a class="xref" href="#control-id" title="Table&nbsp;1.1.&nbsp;Control IDs">Table&nbsp;1.1, “Control IDs”</a>. The ID is used when querying the attributes of
a control, and when getting or setting the current value.</p><p>Generally applications should present controls to the user
without assumptions about their purpose. Each control comes with a
name string the user is supposed to understand. When the purpose is
non-intuitive the driver writer should provide a user manual, a user
interface plug-in or a driver specific panel application. Predefined
IDs were introduced to change a few controls programmatically, for
example to mute a device during a channel switch.</p><p>Drivers may enumerate different controls after switching
the current video input or output, tuner or modulator, or audio input
or output. Different in the sense of other bounds, another default and
current value, step size or other menu items. A control with a certain
<span class="emphasis"><em>custom</em></span> ID can also change name and
type.<sup>[<a name="id2760770" href="#ftn.id2760770" class="footnote">9</a>]</sup> Control values are stored globally, they do not
change when switching except to stay within the reported bounds. They
also do not change e.&nbsp;g. when the device is opened or closed, when the
tuner radio frequency is changed or generally never without
application request. Since V4L2 specifies no event mechanism, panel
applications intended to cooperate with other panel applications (be
they built into a larger application, as a TV viewer) may need to
regularly poll control values to update their user
interface.<sup>[<a name="id2759822" href="#ftn.id2759822" class="footnote">10</a>]</sup></p><div class="table"><a name="control-id"></a><p class="title"><b>Table&nbsp;1.1.&nbsp;Control IDs</b></p><div class="table-contents"><table summary="Control IDs" width="100%" border="0"><colgroup><col><col><col></colgroup><thead><tr><th>ID</th><th>Type</th><th>Description</th></tr></thead><tbody valign="top"><tr><td valign="top"><code class="constant">V4L2_CID_BASE</code></td><td valign="top">&nbsp;</td><td valign="top">First predefined ID, equal to
<code class="constant">V4L2_CID_BRIGHTNESS</code>.</td></tr><tr><td valign="top"><code class="constant">V4L2_CID_USER_BASE</code></td><td valign="top">&nbsp;</td><td valign="top">Synonym of <code class="constant">V4L2_CID_BASE</code>.</td></tr><tr><td valign="top"><code class="constant">V4L2_CID_BRIGHTNESS</code></td><td valign="top">integer</td><td valign="top">Picture brightness, or more precisely, the black
level.</td></tr><tr><td valign="top"><code class="constant">V4L2_CID_CONTRAST</code></td><td valign="top">integer</td><td valign="top">Picture contrast or luma gain.</td></tr><tr><td valign="top"><code class="constant">V4L2_CID_SATURATION</code></td><td valign="top">integer</td><td valign="top">Picture color saturation or chroma gain.</td></tr><tr><td valign="top"><code class="constant">V4L2_CID_HUE</code></td><td valign="top">integer</td><td valign="top">Hue or color balance.</td></tr><tr><td valign="top"><code class="constant">V4L2_CID_AUDIO_VOLUME</code></td><td valign="top">integer</td><td valign="top">Overall audio volume. Note some drivers also
provide an OSS or ALSA mixer interface.</td></tr><tr><td valign="top"><code class="constant">V4L2_CID_AUDIO_BALANCE</code></td><td valign="top">integer</td><td valign="top">Audio stereo balance. Minimum corresponds to all
the way left, maximum to right.</td></tr><tr><td valign="top"><code class="constant">V4L2_CID_AUDIO_BASS</code></td><td valign="top">integer</td><td valign="top">Audio bass adjustment.</td></tr><tr><td valign="top"><code class="constant">V4L2_CID_AUDIO_TREBLE</code></td><td valign="top">integer</td><td valign="top">Audio treble adjustment.</td></tr><tr><td valign="top"><code class="constant">V4L2_CID_AUDIO_MUTE</code></td><td valign="top">boolean</td><td valign="top">Mute audio, i.&nbsp;e. set the volume to zero, however
without affecting <code class="constant">V4L2_CID_AUDIO_VOLUME</code>. Like
ALSA drivers, V4L2 drivers must mute at load time to avoid excessive
noise. Actually the entire device should be reset to a low power
consumption state.</td></tr><tr><td valign="top"><code class="constant">V4L2_CID_AUDIO_LOUDNESS</code></td><td valign="top">boolean</td><td valign="top">Loudness mode (bass boost).</td></tr><tr><td valign="top"><code class="constant">V4L2_CID_BLACK_LEVEL</code></td><td valign="top">integer</td><td valign="top">Another name for brightness (not a synonym of
<code class="constant">V4L2_CID_BRIGHTNESS</code>). This control is deprecated
and should not be used in new drivers and applications.</td></tr><tr><td valign="top"><code class="constant">V4L2_CID_AUTO_WHITE_BALANCE</code></td><td valign="top">boolean</td><td valign="top">Automatic white balance (cameras).</td></tr><tr><td valign="top"><code class="constant">V4L2_CID_DO_WHITE_BALANCE</code></td><td valign="top">button</td><td valign="top">This is an action control. When set (the value is
ignored), the device will do a white balance and then hold the current
setting. Contrast this with the boolean
<code class="constant">V4L2_CID_AUTO_WHITE_BALANCE</code>, which, when
activated, keeps adjusting the white balance.</td></tr><tr><td valign="top"><code class="constant">V4L2_CID_RED_BALANCE</code></td><td valign="top">integer</td><td valign="top">Red chroma balance.</td></tr><tr><td valign="top"><code class="constant">V4L2_CID_BLUE_BALANCE</code></td><td valign="top">integer</td><td valign="top">Blue chroma balance.</td></tr><tr><td valign="top"><code class="constant">V4L2_CID_GAMMA</code></td><td valign="top">integer</td><td valign="top">Gamma adjust.</td></tr><tr><td valign="top"><code class="constant">V4L2_CID_WHITENESS</code></td><td valign="top">integer</td><td valign="top">Whiteness for grey-scale devices. This is a synonym
for <code class="constant">V4L2_CID_GAMMA</code>. This control is deprecated
and should not be used in new drivers and applications.</td></tr><tr><td valign="top"><code class="constant">V4L2_CID_EXPOSURE</code></td><td valign="top">integer</td><td valign="top">Exposure (cameras). [Unit?]</td></tr><tr><td valign="top"><code class="constant">V4L2_CID_AUTOGAIN</code></td><td valign="top">boolean</td><td valign="top">Automatic gain/exposure control.</td></tr><tr><td valign="top"><code class="constant">V4L2_CID_GAIN</code></td><td valign="top">integer</td><td valign="top">Gain control.</td></tr><tr><td valign="top"><code class="constant">V4L2_CID_HFLIP</code></td><td valign="top">boolean</td><td valign="top">Mirror the picture horizontally.</td></tr><tr><td valign="top"><code class="constant">V4L2_CID_VFLIP</code></td><td valign="top">boolean</td><td valign="top">Mirror the picture vertically.</td></tr><tr><td valign="top"><code class="constant">V4L2_CID_HCENTER_DEPRECATED</code> (formerly <code class="constant">V4L2_CID_HCENTER</code>)</td><td valign="top">integer</td><td valign="top">Horizontal image centering. This control is
deprecated. New drivers and applications should use the <a class="link" href="#camera-controls" title="1.9.6.&nbsp;Camera Control Reference">Camera class controls</a>
<code class="constant">V4L2_CID_PAN_ABSOLUTE</code>,
<code class="constant">V4L2_CID_PAN_RELATIVE</code> and
<code class="constant">V4L2_CID_PAN_RESET</code> instead.</td></tr><tr><td valign="top"><code class="constant">V4L2_CID_VCENTER_DEPRECATED</code>
	    (formerly <code class="constant">V4L2_CID_VCENTER</code>)</td><td valign="top">integer</td><td valign="top">Vertical image centering. Centering is intended to
<span class="emphasis"><em>physically</em></span> adjust cameras. For image cropping see
<a class="xref" href="#crop" title="1.11.&nbsp;Image Cropping, Insertion and Scaling">Section&nbsp;1.11, “Image Cropping, Insertion and Scaling”</a>, for clipping <a class="xref" href="#overlay" title="4.2.&nbsp;Video Overlay Interface">Section&nbsp;4.2, “Video Overlay Interface”</a>. This
control is deprecated. New drivers and applications should use the
<a class="link" href="#camera-controls" title="1.9.6.&nbsp;Camera Control Reference">Camera class controls</a>
<code class="constant">V4L2_CID_TILT_ABSOLUTE</code>,
<code class="constant">V4L2_CID_TILT_RELATIVE</code> and
<code class="constant">V4L2_CID_TILT_RESET</code> instead.</td></tr><tr><td valign="top"><a name="v4l2-power-line-frequency"></a><code class="constant">V4L2_CID_POWER_LINE_FREQUENCY</code></td><td valign="top">enum</td><td valign="top">Enables a power line frequency filter to avoid
flicker. Possible values for <code class="constant">enum v4l2_power_line_frequency</code> are:
<code class="constant">V4L2_CID_POWER_LINE_FREQUENCY_DISABLED</code> (0),
<code class="constant">V4L2_CID_POWER_LINE_FREQUENCY_50HZ</code> (1) and
<code class="constant">V4L2_CID_POWER_LINE_FREQUENCY_60HZ</code> (2).</td></tr><tr><td valign="top"><code class="constant">V4L2_CID_HUE_AUTO</code></td><td valign="top">boolean</td><td valign="top">Enables automatic hue control by the device. The
effect of setting <code class="constant">V4L2_CID_HUE</code> while automatic
hue control is enabled is undefined, drivers should ignore such
request.</td></tr><tr><td valign="top"><code class="constant">V4L2_CID_WHITE_BALANCE_TEMPERATURE</code></td><td valign="top">integer</td><td valign="top">This control specifies the white balance settings
as a color temperature in Kelvin. A driver should have a minimum of
2800 (incandescent) to 6500 (daylight). For more information about
color temperature see <a class="ulink" href="http://en.wikipedia.org/wiki/Color_temperature" target="_top">Wikipedia</a>.</td></tr><tr><td valign="top"><code class="constant">V4L2_CID_SHARPNESS</code></td><td valign="top">integer</td><td valign="top">Adjusts the sharpness filters in a camera. The
minimum value disables the filters, higher values give a sharper
picture.</td></tr><tr><td valign="top"><code class="constant">V4L2_CID_BACKLIGHT_COMPENSATION</code></td><td valign="top">integer</td><td valign="top">Adjusts the backlight compensation in a camera. The
minimum value disables backlight compensation.</td></tr><tr><td valign="top"><code class="constant">V4L2_CID_CHROMA_AGC</code></td><td valign="top">boolean</td><td valign="top">Chroma automatic gain control.</td></tr><tr><td valign="top"><code class="constant">V4L2_CID_COLOR_KILLER</code></td><td valign="top">boolean</td><td valign="top">Enable the color killer (i.&nbsp;e. force a black &amp; white image in case of a weak video signal).</td></tr><tr><td valign="top"><a name="v4l2-colorfx"></a><code class="constant">V4L2_CID_COLORFX</code></td><td valign="top">enum</td><td valign="top">Selects a color effect. Possible values for
<code class="constant">enum v4l2_colorfx</code> are:
<code class="constant">V4L2_COLORFX_NONE</code> (0),
<code class="constant">V4L2_COLORFX_BW</code> (1) and
<code class="constant">V4L2_COLORFX_SEPIA</code> (2).</td></tr><tr><td valign="top"><code class="constant">V4L2_CID_LASTP1</code></td><td valign="top">&nbsp;</td><td valign="top">End of the predefined control IDs (currently
<code class="constant">V4L2_CID_COLORFX</code> + 1).</td></tr><tr><td valign="top"><code class="constant">V4L2_CID_PRIVATE_BASE</code></td><td valign="top">&nbsp;</td><td valign="top">ID of the first custom (driver specific) control.
Applications depending on particular custom controls should check the
driver name and version, see <a class="xref" href="#querycap" title="1.2.&nbsp;Querying Capabilities">Section&nbsp;1.2, “Querying Capabilities”</a>.</td></tr></tbody></table></div></div><br class="table-break"><p>Applications can enumerate the available controls with the
<a class="link" href="#vidioc-queryctrl" title="ioctl VIDIOC_QUERYCTRL, VIDIOC_QUERYMENU"><code class="constant">VIDIOC_QUERYCTRL</code></a> and <a class="link" href="#vidioc-queryctrl" title="ioctl VIDIOC_QUERYCTRL, VIDIOC_QUERYMENU"><code class="constant">VIDIOC_QUERYMENU</code></a> ioctls, get and set a
control value with the <a class="link" href="#vidioc-g-ctrl" title="ioctl VIDIOC_G_CTRL, VIDIOC_S_CTRL"><code class="constant">VIDIOC_G_CTRL</code></a> and <a class="link" href="#vidioc-g-ctrl" title="ioctl VIDIOC_G_CTRL, VIDIOC_S_CTRL"><code class="constant">VIDIOC_S_CTRL</code></a> ioctls.
Drivers must implement <code class="constant">VIDIOC_QUERYCTRL</code>,
<code class="constant">VIDIOC_G_CTRL</code> and
<code class="constant">VIDIOC_S_CTRL</code> when the device has one or more
controls, <code class="constant">VIDIOC_QUERYMENU</code> when it has one or
more menu type controls.</p><div class="example"><a name="id2761594"></a><p class="title"><b>Example&nbsp;1.8.&nbsp;Enumerating all controls</b></p><div class="example-contents"><pre class="programlisting">struct&nbsp;<a class="link" href="#v4l2-queryctrl" title="Table&nbsp;106.&nbsp;struct v4l2_queryctrl">v4l2_queryctrl</a> queryctrl;
struct&nbsp;<a class="link" href="#v4l2-querymenu" title="Table&nbsp;107.&nbsp;struct v4l2_querymenu">v4l2_querymenu</a> querymenu;

static void
enumerate_menu (void)
{
	printf ("  Menu items:\n");

	memset (&amp;querymenu, 0, sizeof (querymenu));
	querymenu.id = queryctrl.id;

	for (querymenu.index = queryctrl.minimum;
	     querymenu.index &lt;= queryctrl.maximum;
	      querymenu.index++) {
		if (0 == ioctl (fd, <a class="link" href="#vidioc-queryctrl" title="ioctl VIDIOC_QUERYCTRL, VIDIOC_QUERYMENU"><code class="constant">VIDIOC_QUERYMENU</code></a>, &amp;querymenu)) {
			printf ("  %s\n", querymenu.name);
		} else {
			perror ("VIDIOC_QUERYMENU");
			exit (EXIT_FAILURE);
		}
	}
}

memset (&amp;queryctrl, 0, sizeof (queryctrl));

for (queryctrl.id = V4L2_CID_BASE;
     queryctrl.id &lt; V4L2_CID_LASTP1;
     queryctrl.id++) {
	if (0 == ioctl (fd, <a class="link" href="#vidioc-queryctrl" title="ioctl VIDIOC_QUERYCTRL, VIDIOC_QUERYMENU"><code class="constant">VIDIOC_QUERYCTRL</code></a>, &amp;queryctrl)) {
		if (queryctrl.flags &amp; V4L2_CTRL_FLAG_DISABLED)
			continue;

		printf ("Control %s\n", queryctrl.name);

		if (queryctrl.type == V4L2_CTRL_TYPE_MENU)
			enumerate_menu ();
	} else {
		if (errno == EINVAL)
			continue;

		perror ("VIDIOC_QUERYCTRL");
		exit (EXIT_FAILURE);
	}
}

for (queryctrl.id = V4L2_CID_PRIVATE_BASE;;
     queryctrl.id++) {
	if (0 == ioctl (fd, <a class="link" href="#vidioc-queryctrl" title="ioctl VIDIOC_QUERYCTRL, VIDIOC_QUERYMENU"><code class="constant">VIDIOC_QUERYCTRL</code></a>, &amp;queryctrl)) {
		if (queryctrl.flags &amp; V4L2_CTRL_FLAG_DISABLED)
			continue;

		printf ("Control %s\n", queryctrl.name);

		if (queryctrl.type == V4L2_CTRL_TYPE_MENU)
			enumerate_menu ();
	} else {
		if (errno == EINVAL)
			break;

		perror ("VIDIOC_QUERYCTRL");
		exit (EXIT_FAILURE);
	}
}
</pre></div></div><br class="example-break"><div class="example"><a name="id2761692"></a><p class="title"><b>Example&nbsp;1.9.&nbsp;Changing controls</b></p><div class="example-contents"><pre class="programlisting">struct&nbsp;<a class="link" href="#v4l2-queryctrl" title="Table&nbsp;106.&nbsp;struct v4l2_queryctrl">v4l2_queryctrl</a> queryctrl;
struct&nbsp;<a class="link" href="#v4l2-control" title="Table&nbsp;74.&nbsp;struct v4l2_control">v4l2_control</a> control;

memset (&amp;queryctrl, 0, sizeof (queryctrl));
queryctrl.id = V4L2_CID_BRIGHTNESS;

if (-1 == ioctl (fd, <a class="link" href="#vidioc-queryctrl" title="ioctl VIDIOC_QUERYCTRL, VIDIOC_QUERYMENU"><code class="constant">VIDIOC_QUERYCTRL</code></a>, &amp;queryctrl)) {
	if (errno != EINVAL) {
		perror ("VIDIOC_QUERYCTRL");
		exit (EXIT_FAILURE);
	} else {
		printf ("V4L2_CID_BRIGHTNESS is not supported\n");
	}
} else if (queryctrl.flags &amp; V4L2_CTRL_FLAG_DISABLED) {
	printf ("V4L2_CID_BRIGHTNESS is not supported\n");
} else {
	memset (&amp;control, 0, sizeof (control));
	control.id = V4L2_CID_BRIGHTNESS;
	control.value = queryctrl.default_value;

	if (-1 == ioctl (fd, <a class="link" href="#vidioc-g-ctrl" title="ioctl VIDIOC_G_CTRL, VIDIOC_S_CTRL"><code class="constant">VIDIOC_S_CTRL</code></a>, &amp;control)) {
		perror ("VIDIOC_S_CTRL");
		exit (EXIT_FAILURE);
	}
}

memset (&amp;control, 0, sizeof (control));
control.id = V4L2_CID_CONTRAST;

if (0 == ioctl (fd, <a class="link" href="#vidioc-g-ctrl" title="ioctl VIDIOC_G_CTRL, VIDIOC_S_CTRL"><code class="constant">VIDIOC_G_CTRL</code></a>, &amp;control)) {
	control.value += 1;

	/* The driver may clamp the value or return ERANGE, ignored here */

	if (-1 == ioctl (fd, <a class="link" href="#vidioc-g-ctrl" title="ioctl VIDIOC_G_CTRL, VIDIOC_S_CTRL"><code class="constant">VIDIOC_S_CTRL</code></a>, &amp;control)
	    &amp;&amp; errno != ERANGE) {
		perror ("VIDIOC_S_CTRL");
		exit (EXIT_FAILURE);
	}
/* Ignore if V4L2_CID_CONTRAST is unsupported */
} else if (errno != EINVAL) {
	perror ("VIDIOC_G_CTRL");
	exit (EXIT_FAILURE);
}

control.id = V4L2_CID_AUDIO_MUTE;
control.value = TRUE; /* silence */

/* Errors ignored */
ioctl (fd, VIDIOC_S_CTRL, &amp;control);
</pre></div></div><br class="example-break"></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="extended-controls"></a>1.9.&nbsp;Extended Controls</h2></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2761800"></a>1.9.1.&nbsp;Introduction</h3></div></div></div><p>The control mechanism as originally designed was meant
to be used for user settings (brightness, saturation, etc). However,
it turned out to be a very useful model for implementing more
complicated driver APIs where each driver implements only a subset of
a larger API.</p><p>The MPEG encoding API was the driving force behind
designing and implementing this extended control mechanism: the MPEG
standard is quite large and the currently supported hardware MPEG
encoders each only implement a subset of this standard. Further more,
many parameters relating to how the video is encoded into an MPEG
stream are specific to the MPEG encoding chip since the MPEG standard
only defines the format of the resulting MPEG stream, not how the
video is actually encoded into that format.</p><p>Unfortunately, the original control API lacked some
features needed for these new uses and so it was extended into the
(not terribly originally named) extended control API.</p><p>Even though the MPEG encoding API was the first effort
to use the Extended Control API, nowadays there are also other classes
of Extended Controls, such as Camera Controls and FM Transmitter Controls.
The Extended Controls API as well as all Extended Controls classes are
described in the following text.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2760619"></a>1.9.2.&nbsp;The Extended Control API</h3></div></div></div><p>Three new ioctls are available: <a class="link" href="#vidioc-g-ext-ctrls" title="ioctl VIDIOC_G_EXT_CTRLS, VIDIOC_S_EXT_CTRLS, VIDIOC_TRY_EXT_CTRLS"><code class="constant">VIDIOC_G_EXT_CTRLS</code></a>,
<a class="link" href="#vidioc-g-ext-ctrls" title="ioctl VIDIOC_G_EXT_CTRLS, VIDIOC_S_EXT_CTRLS, VIDIOC_TRY_EXT_CTRLS"><code class="constant">VIDIOC_S_EXT_CTRLS</code></a> and <a class="link" href="#vidioc-g-ext-ctrls" title="ioctl VIDIOC_G_EXT_CTRLS, VIDIOC_S_EXT_CTRLS, VIDIOC_TRY_EXT_CTRLS"><code class="constant">VIDIOC_TRY_EXT_CTRLS</code></a>. These ioctls act on
arrays of controls (as opposed to the <a class="link" href="#vidioc-g-ctrl" title="ioctl VIDIOC_G_CTRL, VIDIOC_S_CTRL"><code class="constant">VIDIOC_G_CTRL</code></a> and
<a class="link" href="#vidioc-g-ctrl" title="ioctl VIDIOC_G_CTRL, VIDIOC_S_CTRL"><code class="constant">VIDIOC_S_CTRL</code></a> ioctls that act on a single control). This is needed
since it is often required to atomically change several controls at
once.</p><p>Each of the new ioctls expects a pointer to a
struct&nbsp;<a class="link" href="#v4l2-ext-controls" title="Table&nbsp;79.&nbsp;struct v4l2_ext_controls">v4l2_ext_controls</a>. This structure contains a pointer to the control
array, a count of the number of controls in that array and a control
class. Control classes are used to group similar controls into a
single class. For example, control class
<code class="constant">V4L2_CTRL_CLASS_USER</code> contains all user controls
(i.&nbsp;e. all controls that can also be set using the old
<code class="constant">VIDIOC_S_CTRL</code> ioctl). Control class
<code class="constant">V4L2_CTRL_CLASS_MPEG</code> contains all controls
relating to MPEG encoding, etc.</p><p>All controls in the control array must belong to the
specified control class. An error is returned if this is not the
case.</p><p>It is also possible to use an empty control array (count
== 0) to check whether the specified control class is
supported.</p><p>The control array is a struct&nbsp;<a class="link" href="#v4l2-ext-control" title="Table&nbsp;78.&nbsp;struct v4l2_ext_control">v4l2_ext_control</a> array. The
<span class="structname">v4l2_ext_control</span> structure is very similar to
struct&nbsp;<a class="link" href="#v4l2-control" title="Table&nbsp;74.&nbsp;struct v4l2_control">v4l2_control</a>, except for the fact that it also allows for 64-bit
values and pointers to be passed.</p><p>It is important to realize that due to the flexibility of
controls it is necessary to check whether the control you want to set
actually is supported in the driver and what the valid range of values
is. So use the <a class="link" href="#vidioc-queryctrl" title="ioctl VIDIOC_QUERYCTRL, VIDIOC_QUERYMENU"><code class="constant">VIDIOC_QUERYCTRL</code></a> and <a class="link" href="#vidioc-queryctrl" title="ioctl VIDIOC_QUERYCTRL, VIDIOC_QUERYMENU"><code class="constant">VIDIOC_QUERYMENU</code></a> ioctls to
check this. Also note that it is possible that some of the menu
indices in a control of type <code class="constant">V4L2_CTRL_TYPE_MENU</code>
may not be supported (<code class="constant">VIDIOC_QUERYMENU</code> will
return an error). A good example is the list of supported MPEG audio
bitrates. Some drivers only support one or two bitrates, others
support a wider range.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2762121"></a>1.9.3.&nbsp;Enumerating Extended Controls</h3></div></div></div><p>The recommended way to enumerate over the extended
controls is by using <a class="link" href="#vidioc-queryctrl" title="ioctl VIDIOC_QUERYCTRL, VIDIOC_QUERYMENU"><code class="constant">VIDIOC_QUERYCTRL</code></a> in combination with the
<code class="constant">V4L2_CTRL_FLAG_NEXT_CTRL</code> flag:</p><div class="informalexample"><pre class="programlisting">struct&nbsp;<a class="link" href="#v4l2-queryctrl" title="Table&nbsp;106.&nbsp;struct v4l2_queryctrl">v4l2_queryctrl</a> qctrl;

qctrl.id = V4L2_CTRL_FLAG_NEXT_CTRL;
while (0 == ioctl (fd, <a class="link" href="#vidioc-queryctrl" title="ioctl VIDIOC_QUERYCTRL, VIDIOC_QUERYMENU"><code class="constant">VIDIOC_QUERYCTRL</code></a>, &amp;qctrl)) {
	/* ... */
	qctrl.id |= V4L2_CTRL_FLAG_NEXT_CTRL;
}
</pre></div><p>The initial control ID is set to 0 ORed with the
<code class="constant">V4L2_CTRL_FLAG_NEXT_CTRL</code> flag. The
<code class="constant">VIDIOC_QUERYCTRL</code> ioctl will return the first
control with a higher ID than the specified one. When no such controls
are found an error is returned.</p><p>If you want to get all controls within a specific control
class, then you can set the initial
<em class="structfield"><code>qctrl.id</code></em> value to the control class and add
an extra check to break out of the loop when a control of another
control class is found:</p><div class="informalexample"><pre class="programlisting">qctrl.id = V4L2_CTRL_CLASS_MPEG | V4L2_CTRL_FLAG_NEXT_CTRL;
while (0 == ioctl (fd, <a class="link" href="#vidioc-queryctrl" title="ioctl VIDIOC_QUERYCTRL, VIDIOC_QUERYMENU"><code class="constant">VIDIOC_QUERYCTRL</code></a>, &amp;qctrl)) {
	if (V4L2_CTRL_ID2CLASS (qctrl.id) != V4L2_CTRL_CLASS_MPEG)
		break;
		/* ... */
		qctrl.id |= V4L2_CTRL_FLAG_NEXT_CTRL;
	}
</pre></div><p>The 32-bit <em class="structfield"><code>qctrl.id</code></em> value is
subdivided into three bit ranges: the top 4 bits are reserved for
flags (e.&nbsp;g. <code class="constant">V4L2_CTRL_FLAG_NEXT_CTRL</code>) and are not
actually part of the ID. The remaining 28 bits form the control ID, of
which the most significant 12 bits define the control class and the
least significant 16 bits identify the control within the control
class. It is guaranteed that these last 16 bits are always non-zero
for controls. The range of 0x1000 and up are reserved for
driver-specific controls. The macro
<code class="constant">V4L2_CTRL_ID2CLASS(id)</code> returns the control class
ID based on a control ID.</p><p>If the driver does not support extended controls, then
<code class="constant">VIDIOC_QUERYCTRL</code> will fail when used in
combination with <code class="constant">V4L2_CTRL_FLAG_NEXT_CTRL</code>. In
that case the old method of enumerating control should be used (see
1.8). But if it is supported, then it is guaranteed to enumerate over
all controls, including driver-private controls.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2762247"></a>1.9.4.&nbsp;Creating Control Panels</h3></div></div></div><p>It is possible to create control panels for a graphical
user interface where the user can select the various controls.
Basically you will have to iterate over all controls using the method
described above. Each control class starts with a control of type
<code class="constant">V4L2_CTRL_TYPE_CTRL_CLASS</code>.
<code class="constant">VIDIOC_QUERYCTRL</code> will return the name of this
control class which can be used as the title of a tab page within a
control panel.</p><p>The flags field of struct&nbsp;<a class="link" href="#v4l2-queryctrl" title="Table&nbsp;106.&nbsp;struct v4l2_queryctrl">v4l2_queryctrl</a> also contains hints on
the behavior of the control. See the <a class="link" href="#vidioc-queryctrl" title="ioctl VIDIOC_QUERYCTRL, VIDIOC_QUERYMENU"><code class="constant">VIDIOC_QUERYCTRL</code></a> documentation
for more details.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mpeg-controls"></a>1.9.5.&nbsp;MPEG Control Reference</h3></div></div></div><p>Below all controls within the MPEG control class are
described. First the generic controls, then controls specific for
certain hardware.</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="id2762299"></a>1.9.5.1.&nbsp;Generic MPEG Controls</h4></div></div></div><div class="table"><a name="mpeg-control-id"></a><p class="title"><b>Table&nbsp;1.2.&nbsp;MPEG Control IDs</b></p><div class="table-contents"><table summary="MPEG Control IDs" width="100%" border="0"><colgroup><col><col><col><col></colgroup><thead><tr><th colspan="2" align="left">ID</th><th align="left">Type</th><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><th colspan="3" align="left">Description</th></tr></thead><tbody valign="top"><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td colspan="2" valign="top"><code class="constant">V4L2_CID_MPEG_CLASS</code>&nbsp;</td><td valign="top">class</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">The MPEG class
descriptor. Calling <a class="link" href="#vidioc-queryctrl" title="ioctl VIDIOC_QUERYCTRL, VIDIOC_QUERYMENU"><code class="constant">VIDIOC_QUERYCTRL</code></a> for this control will return a
description of this control class. This description can be used as the
caption of a Tab page in a GUI, for example.</td></tr><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td colspan="2" valign="top"><a name="v4l2-mpeg-stream-type"></a><code class="constant">V4L2_CID_MPEG_STREAM_TYPE</code>&nbsp;</td><td valign="top">enum&nbsp;v4l2_mpeg_stream_type</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">The MPEG-1, -2 or -4
output stream type. One cannot assume anything here. Each hardware
MPEG encoder tends to support different subsets of the available MPEG
stream types. The currently defined stream types are:</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top"><table width="100%" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td valign="top"><code class="constant">V4L2_MPEG_STREAM_TYPE_MPEG2_PS</code>&nbsp;</td><td valign="top">MPEG-2 program stream</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_STREAM_TYPE_MPEG2_TS</code>&nbsp;</td><td valign="top">MPEG-2 transport stream</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_STREAM_TYPE_MPEG1_SS</code>&nbsp;</td><td valign="top">MPEG-1 system stream</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_STREAM_TYPE_MPEG2_DVD</code>&nbsp;</td><td valign="top">MPEG-2 DVD-compatible stream</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_STREAM_TYPE_MPEG1_VCD</code>&nbsp;</td><td valign="top">MPEG-1 VCD-compatible stream</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_STREAM_TYPE_MPEG2_SVCD</code>&nbsp;</td><td valign="top">MPEG-2 SVCD-compatible stream</td></tr></tbody></table></td></tr><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td colspan="2" valign="top"><code class="constant">V4L2_CID_MPEG_STREAM_PID_PMT</code>&nbsp;</td><td valign="top">integer</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">Program Map Table
Packet ID for the MPEG transport stream (default 16)</td></tr><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td colspan="2" valign="top"><code class="constant">V4L2_CID_MPEG_STREAM_PID_AUDIO</code>&nbsp;</td><td valign="top">integer</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">Audio Packet ID for
the MPEG transport stream (default 256)</td></tr><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td colspan="2" valign="top"><code class="constant">V4L2_CID_MPEG_STREAM_PID_VIDEO</code>&nbsp;</td><td valign="top">integer</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">Video Packet ID for
the MPEG transport stream (default 260)</td></tr><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td colspan="2" valign="top"><code class="constant">V4L2_CID_MPEG_STREAM_PID_PCR</code>&nbsp;</td><td valign="top">integer</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">Packet ID for the
MPEG transport stream carrying PCR fields (default 259)</td></tr><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td colspan="2" valign="top"><code class="constant">V4L2_CID_MPEG_STREAM_PES_ID_AUDIO</code>&nbsp;</td><td valign="top">integer</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">Audio ID for MPEG
PES</td></tr><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td colspan="2" valign="top"><code class="constant">V4L2_CID_MPEG_STREAM_PES_ID_VIDEO</code>&nbsp;</td><td valign="top">integer</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">Video ID for MPEG
PES</td></tr><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td colspan="2" valign="top"><a name="v4l2-mpeg-stream-vbi-fmt"></a><code class="constant">V4L2_CID_MPEG_STREAM_VBI_FMT</code>&nbsp;</td><td valign="top">enum&nbsp;v4l2_mpeg_stream_vbi_fmt</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">Some cards can embed
VBI data (e.&nbsp;g. Closed Caption, Teletext) into the MPEG stream. This
control selects whether VBI data should be embedded, and if so, what
embedding method should be used. The list of possible VBI formats
depends on the driver. The currently defined VBI format types
are:</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top"><table width="100%" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td valign="top"><code class="constant">V4L2_MPEG_STREAM_VBI_FMT_NONE</code>&nbsp;</td><td valign="top">No VBI in the MPEG stream</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_STREAM_VBI_FMT_IVTV</code>&nbsp;</td><td valign="top">VBI in private packets, IVTV format (documented
in the kernel sources in the file <code class="filename">Documentation/video4linux/cx2341x/README.vbi</code>)</td></tr></tbody></table></td></tr><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td colspan="2" valign="top"><a name="v4l2-mpeg-audio-sampling-freq"></a><code class="constant">V4L2_CID_MPEG_AUDIO_SAMPLING_FREQ</code>&nbsp;</td><td valign="top">enum&nbsp;v4l2_mpeg_audio_sampling_freq</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">MPEG Audio sampling
frequency. Possible values are:</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top"><table width="100%" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_SAMPLING_FREQ_44100</code>&nbsp;</td><td valign="top">44.1 kHz</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_SAMPLING_FREQ_48000</code>&nbsp;</td><td valign="top">48 kHz</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_SAMPLING_FREQ_32000</code>&nbsp;</td><td valign="top">32 kHz</td></tr></tbody></table></td></tr><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td colspan="2" valign="top"><a name="v4l2-mpeg-audio-encoding"></a><code class="constant">V4L2_CID_MPEG_AUDIO_ENCODING</code>&nbsp;</td><td valign="top">enum&nbsp;v4l2_mpeg_audio_encoding</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">MPEG Audio encoding.
Possible values are:</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top"><table width="100%" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_ENCODING_LAYER_1</code>&nbsp;</td><td valign="top">MPEG-1/2 Layer I encoding</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_ENCODING_LAYER_2</code>&nbsp;</td><td valign="top">MPEG-1/2 Layer II encoding</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_ENCODING_LAYER_3</code>&nbsp;</td><td valign="top">MPEG-1/2 Layer III encoding</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_ENCODING_AAC</code>&nbsp;</td><td valign="top">MPEG-2/4 AAC (Advanced Audio Coding)</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_ENCODING_AC3</code>&nbsp;</td><td valign="top">AC-3 aka ATSC A/52 encoding</td></tr></tbody></table></td></tr><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td colspan="2" valign="top"><a name="v4l2-mpeg-audio-l1-bitrate"></a><code class="constant">V4L2_CID_MPEG_AUDIO_L1_BITRATE</code>&nbsp;</td><td valign="top">enum&nbsp;v4l2_mpeg_audio_l1_bitrate</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">MPEG-1/2 Layer I bitrate.
Possible values are:</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top"><table width="100%" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_L1_BITRATE_32K</code>&nbsp;</td><td valign="top">32 kbit/s</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_L1_BITRATE_64K</code>&nbsp;</td><td valign="top">64 kbit/s</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_L1_BITRATE_96K</code>&nbsp;</td><td valign="top">96 kbit/s</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_L1_BITRATE_128K</code>&nbsp;</td><td valign="top">128 kbit/s</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_L1_BITRATE_160K</code>&nbsp;</td><td valign="top">160 kbit/s</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_L1_BITRATE_192K</code>&nbsp;</td><td valign="top">192 kbit/s</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_L1_BITRATE_224K</code>&nbsp;</td><td valign="top">224 kbit/s</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_L1_BITRATE_256K</code>&nbsp;</td><td valign="top">256 kbit/s</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_L1_BITRATE_288K</code>&nbsp;</td><td valign="top">288 kbit/s</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_L1_BITRATE_320K</code>&nbsp;</td><td valign="top">320 kbit/s</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_L1_BITRATE_352K</code>&nbsp;</td><td valign="top">352 kbit/s</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_L1_BITRATE_384K</code>&nbsp;</td><td valign="top">384 kbit/s</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_L1_BITRATE_416K</code>&nbsp;</td><td valign="top">416 kbit/s</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_L1_BITRATE_448K</code>&nbsp;</td><td valign="top">448 kbit/s</td></tr></tbody></table></td></tr><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td colspan="2" valign="top"><a name="v4l2-mpeg-audio-l2-bitrate"></a><code class="constant">V4L2_CID_MPEG_AUDIO_L2_BITRATE</code>&nbsp;</td><td valign="top">enum&nbsp;v4l2_mpeg_audio_l2_bitrate</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">MPEG-1/2 Layer II bitrate.
Possible values are:</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top"><table width="100%" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_L2_BITRATE_32K</code>&nbsp;</td><td valign="top">32 kbit/s</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_L2_BITRATE_48K</code>&nbsp;</td><td valign="top">48 kbit/s</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_L2_BITRATE_56K</code>&nbsp;</td><td valign="top">56 kbit/s</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_L2_BITRATE_64K</code>&nbsp;</td><td valign="top">64 kbit/s</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_L2_BITRATE_80K</code>&nbsp;</td><td valign="top">80 kbit/s</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_L2_BITRATE_96K</code>&nbsp;</td><td valign="top">96 kbit/s</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_L2_BITRATE_112K</code>&nbsp;</td><td valign="top">112 kbit/s</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_L2_BITRATE_128K</code>&nbsp;</td><td valign="top">128 kbit/s</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_L2_BITRATE_160K</code>&nbsp;</td><td valign="top">160 kbit/s</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_L2_BITRATE_192K</code>&nbsp;</td><td valign="top">192 kbit/s</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_L2_BITRATE_224K</code>&nbsp;</td><td valign="top">224 kbit/s</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_L2_BITRATE_256K</code>&nbsp;</td><td valign="top">256 kbit/s</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_L2_BITRATE_320K</code>&nbsp;</td><td valign="top">320 kbit/s</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_L2_BITRATE_384K</code>&nbsp;</td><td valign="top">384 kbit/s</td></tr></tbody></table></td></tr><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td colspan="2" valign="top"><a name="v4l2-mpeg-audio-l3-bitrate"></a><code class="constant">V4L2_CID_MPEG_AUDIO_L3_BITRATE</code>&nbsp;</td><td valign="top">enum&nbsp;v4l2_mpeg_audio_l3_bitrate</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">MPEG-1/2 Layer III bitrate.
Possible values are:</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top"><table width="100%" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_L3_BITRATE_32K</code>&nbsp;</td><td valign="top">32 kbit/s</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_L3_BITRATE_40K</code>&nbsp;</td><td valign="top">40 kbit/s</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_L3_BITRATE_48K</code>&nbsp;</td><td valign="top">48 kbit/s</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_L3_BITRATE_56K</code>&nbsp;</td><td valign="top">56 kbit/s</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_L3_BITRATE_64K</code>&nbsp;</td><td valign="top">64 kbit/s</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_L3_BITRATE_80K</code>&nbsp;</td><td valign="top">80 kbit/s</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_L3_BITRATE_96K</code>&nbsp;</td><td valign="top">96 kbit/s</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_L3_BITRATE_112K</code>&nbsp;</td><td valign="top">112 kbit/s</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_L3_BITRATE_128K</code>&nbsp;</td><td valign="top">128 kbit/s</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_L3_BITRATE_160K</code>&nbsp;</td><td valign="top">160 kbit/s</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_L3_BITRATE_192K</code>&nbsp;</td><td valign="top">192 kbit/s</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_L3_BITRATE_224K</code>&nbsp;</td><td valign="top">224 kbit/s</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_L3_BITRATE_256K</code>&nbsp;</td><td valign="top">256 kbit/s</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_L3_BITRATE_320K</code>&nbsp;</td><td valign="top">320 kbit/s</td></tr></tbody></table></td></tr><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td colspan="2" valign="top"><code class="constant">V4L2_CID_MPEG_AUDIO_AAC_BITRATE</code>&nbsp;</td><td valign="top">integer</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">AAC bitrate in bits per second.</td></tr><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td colspan="2" valign="top"><a name="v4l2-mpeg-audio-ac3-bitrate"></a><code class="constant">V4L2_CID_MPEG_AUDIO_AC3_BITRATE</code>&nbsp;</td><td valign="top">enum&nbsp;v4l2_mpeg_audio_ac3_bitrate</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">AC-3 bitrate.
Possible values are:</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top"><table width="100%" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_AC3_BITRATE_32K</code>&nbsp;</td><td valign="top">32 kbit/s</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_AC3_BITRATE_40K</code>&nbsp;</td><td valign="top">40 kbit/s</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_AC3_BITRATE_48K</code>&nbsp;</td><td valign="top">48 kbit/s</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_AC3_BITRATE_56K</code>&nbsp;</td><td valign="top">56 kbit/s</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_AC3_BITRATE_64K</code>&nbsp;</td><td valign="top">64 kbit/s</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_AC3_BITRATE_80K</code>&nbsp;</td><td valign="top">80 kbit/s</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_AC3_BITRATE_96K</code>&nbsp;</td><td valign="top">96 kbit/s</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_AC3_BITRATE_112K</code>&nbsp;</td><td valign="top">112 kbit/s</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_AC3_BITRATE_128K</code>&nbsp;</td><td valign="top">128 kbit/s</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_AC3_BITRATE_160K</code>&nbsp;</td><td valign="top">160 kbit/s</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_AC3_BITRATE_192K</code>&nbsp;</td><td valign="top">192 kbit/s</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_AC3_BITRATE_224K</code>&nbsp;</td><td valign="top">224 kbit/s</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_AC3_BITRATE_256K</code>&nbsp;</td><td valign="top">256 kbit/s</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_AC3_BITRATE_320K</code>&nbsp;</td><td valign="top">320 kbit/s</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_AC3_BITRATE_384K</code>&nbsp;</td><td valign="top">384 kbit/s</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_AC3_BITRATE_448K</code>&nbsp;</td><td valign="top">448 kbit/s</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_AC3_BITRATE_512K</code>&nbsp;</td><td valign="top">512 kbit/s</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_AC3_BITRATE_576K</code>&nbsp;</td><td valign="top">576 kbit/s</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_AC3_BITRATE_640K</code>&nbsp;</td><td valign="top">640 kbit/s</td></tr></tbody></table></td></tr><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td colspan="2" valign="top"><a name="v4l2-mpeg-audio-mode"></a><code class="constant">V4L2_CID_MPEG_AUDIO_MODE</code>&nbsp;</td><td valign="top">enum&nbsp;v4l2_mpeg_audio_mode</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">MPEG Audio mode.
Possible values are:</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top"><table width="100%" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_MODE_STEREO</code>&nbsp;</td><td valign="top">Stereo</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_MODE_JOINT_STEREO</code>&nbsp;</td><td valign="top">Joint Stereo</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_MODE_DUAL</code>&nbsp;</td><td valign="top">Bilingual</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_MODE_MONO</code>&nbsp;</td><td valign="top">Mono</td></tr></tbody></table></td></tr><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td colspan="2" valign="top"><a name="v4l2-mpeg-audio-mode-extension"></a><code class="constant">V4L2_CID_MPEG_AUDIO_MODE_EXTENSION</code>&nbsp;</td><td valign="top">enum&nbsp;v4l2_mpeg_audio_mode_extension</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">Joint Stereo
audio mode extension. In Layer I and II they indicate which subbands
are in intensity stereo. All other subbands are coded in stereo. Layer
III is not (yet) supported. Possible values
are:</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top"><table width="100%" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_MODE_EXTENSION_BOUND_4</code>&nbsp;</td><td valign="top">Subbands 4-31 in intensity stereo</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_MODE_EXTENSION_BOUND_8</code>&nbsp;</td><td valign="top">Subbands 8-31 in intensity stereo</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_MODE_EXTENSION_BOUND_12</code>&nbsp;</td><td valign="top">Subbands 12-31 in intensity stereo</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_MODE_EXTENSION_BOUND_16</code>&nbsp;</td><td valign="top">Subbands 16-31 in intensity stereo</td></tr></tbody></table></td></tr><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td colspan="2" valign="top"><a name="v4l2-mpeg-audio-emphasis"></a><code class="constant">V4L2_CID_MPEG_AUDIO_EMPHASIS</code>&nbsp;</td><td valign="top">enum&nbsp;v4l2_mpeg_audio_emphasis</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">Audio Emphasis.
Possible values are:</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top"><table width="100%" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_EMPHASIS_NONE</code>&nbsp;</td><td valign="top">None</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_EMPHASIS_50_DIV_15_uS</code>&nbsp;</td><td valign="top">50/15 microsecond emphasis</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_EMPHASIS_CCITT_J17</code>&nbsp;</td><td valign="top">CCITT J.17</td></tr></tbody></table></td></tr><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td colspan="2" valign="top"><a name="v4l2-mpeg-audio-crc"></a><code class="constant">V4L2_CID_MPEG_AUDIO_CRC</code>&nbsp;</td><td valign="top">enum&nbsp;v4l2_mpeg_audio_crc</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">CRC method. Possible
values are:</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top"><table width="100%" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_CRC_NONE</code>&nbsp;</td><td valign="top">None</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_AUDIO_CRC_CRC16</code>&nbsp;</td><td valign="top">16 bit parity check</td></tr></tbody></table></td></tr><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td colspan="2" valign="top"><code class="constant">V4L2_CID_MPEG_AUDIO_MUTE</code>&nbsp;</td><td valign="top">boolean</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">Mutes the audio when
capturing. This is not done by muting audio hardware, which can still
produce a slight hiss, but in the encoder itself, guaranteeing a fixed
and reproducable audio bitstream. 0 = unmuted, 1 = muted.</td></tr><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td colspan="2" valign="top"><a name="v4l2-mpeg-video-encoding"></a><code class="constant">V4L2_CID_MPEG_VIDEO_ENCODING</code>&nbsp;</td><td valign="top">enum&nbsp;v4l2_mpeg_video_encoding</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">MPEG Video encoding
method. Possible values are:</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top"><table width="100%" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td valign="top"><code class="constant">V4L2_MPEG_VIDEO_ENCODING_MPEG_1</code>&nbsp;</td><td valign="top">MPEG-1 Video encoding</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_VIDEO_ENCODING_MPEG_2</code>&nbsp;</td><td valign="top">MPEG-2 Video encoding</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_VIDEO_ENCODING_MPEG_4_AVC</code>&nbsp;</td><td valign="top">MPEG-4 AVC (H.264) Video encoding</td></tr></tbody></table></td></tr><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td colspan="2" valign="top"><a name="v4l2-mpeg-video-aspect"></a><code class="constant">V4L2_CID_MPEG_VIDEO_ASPECT</code>&nbsp;</td><td valign="top">enum&nbsp;v4l2_mpeg_video_aspect</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">Video aspect.
Possible values are:</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top"><table width="100%" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td valign="top"><code class="constant">V4L2_MPEG_VIDEO_ASPECT_1x1</code>&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_VIDEO_ASPECT_4x3</code>&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_VIDEO_ASPECT_16x9</code>&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_VIDEO_ASPECT_221x100</code>&nbsp;</td><td class="auto-generated">&nbsp;</td></tr></tbody></table></td></tr><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td colspan="2" valign="top"><code class="constant">V4L2_CID_MPEG_VIDEO_B_FRAMES</code>&nbsp;</td><td valign="top">integer</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">Number of B-Frames
(default 2)</td></tr><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td colspan="2" valign="top"><code class="constant">V4L2_CID_MPEG_VIDEO_GOP_SIZE</code>&nbsp;</td><td valign="top">integer</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">GOP size (default
12)</td></tr><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td colspan="2" valign="top"><code class="constant">V4L2_CID_MPEG_VIDEO_GOP_CLOSURE</code>&nbsp;</td><td valign="top">boolean</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">GOP closure (default
1)</td></tr><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td colspan="2" valign="top"><code class="constant">V4L2_CID_MPEG_VIDEO_PULLDOWN</code>&nbsp;</td><td valign="top">boolean</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">Enable 3:2 pulldown
(default 0)</td></tr><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td colspan="2" valign="top"><a name="v4l2-mpeg-video-bitrate-mode"></a><code class="constant">V4L2_CID_MPEG_VIDEO_BITRATE_MODE</code>&nbsp;</td><td valign="top">enum&nbsp;v4l2_mpeg_video_bitrate_mode</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">Video bitrate mode.
Possible values are:</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top"><table width="100%" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td valign="top"><code class="constant">V4L2_MPEG_VIDEO_BITRATE_MODE_VBR</code>&nbsp;</td><td valign="top">Variable bitrate</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_VIDEO_BITRATE_MODE_CBR</code>&nbsp;</td><td valign="top">Constant bitrate</td></tr></tbody></table></td></tr><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td colspan="2" valign="top"><code class="constant">V4L2_CID_MPEG_VIDEO_BITRATE</code>&nbsp;</td><td valign="top">integer</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">Video bitrate in bits
per second.</td></tr><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td colspan="2" valign="top"><code class="constant">V4L2_CID_MPEG_VIDEO_BITRATE_PEAK</code>&nbsp;</td><td valign="top">integer</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">Peak video bitrate in
bits per second. Must be larger or equal to the average video bitrate.
It is ignored if the video bitrate mode is set to constant
bitrate.</td></tr><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td colspan="2" valign="top"><code class="constant">V4L2_CID_MPEG_VIDEO_TEMPORAL_DECIMATION</code>&nbsp;</td><td valign="top">integer</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">For every captured
frame, skip this many subsequent frames (default 0).</td></tr><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td colspan="2" valign="top"><code class="constant">V4L2_CID_MPEG_VIDEO_MUTE</code>&nbsp;</td><td valign="top">boolean</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">"Mutes" the video to a
fixed color when capturing. This is useful for testing, to produce a
fixed video bitstream. 0 = unmuted, 1 = muted.</td></tr><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td colspan="2" valign="top"><code class="constant">V4L2_CID_MPEG_VIDEO_MUTE_YUV</code>&nbsp;</td><td valign="top">integer</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">Sets the "mute" color
of the video. The supplied 32-bit integer is interpreted as follows (bit
0 = least significant bit):</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top"><table width="100%" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td valign="top">Bit 0:7</td><td valign="top">V chrominance information</td></tr><tr><td valign="top">Bit 8:15</td><td valign="top">U chrominance information</td></tr><tr><td valign="top">Bit 16:23</td><td valign="top">Y luminance information</td></tr><tr><td valign="top">Bit 24:31</td><td valign="top">Must be zero.</td></tr></tbody></table></td></tr></tbody></table></div></div><br class="table-break"></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="id2764786"></a>1.9.5.2.&nbsp;CX2341x MPEG Controls</h4></div></div></div><p>The following MPEG class controls deal with MPEG
encoding settings that are specific to the Conexant CX23415 and
CX23416 MPEG encoding chips.</p><div class="table"><a name="cx2341x-control-id"></a><p class="title"><b>Table&nbsp;1.3.&nbsp;CX2341x Control IDs</b></p><div class="table-contents"><table summary="CX2341x Control IDs" width="100%" border="0"><colgroup><col><col><col><col></colgroup><thead><tr><th colspan="2" align="left">ID</th><th align="left">Type</th><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><th colspan="3" align="left">Description</th></tr></thead><tbody valign="top"><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td colspan="2" valign="top"><a name="v4l2-mpeg-cx2341x-video-spatial-filter-mode"></a><code class="constant">V4L2_CID_MPEG_CX2341X_VIDEO_SPATIAL_FILTER_MODE</code>&nbsp;</td><td valign="top">enum&nbsp;v4l2_mpeg_cx2341x_video_spatial_filter_mode</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">Sets the Spatial
Filter mode (default <code class="constant">MANUAL</code>). Possible values
are:</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top"><table width="100%" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td valign="top"><code class="constant">V4L2_MPEG_CX2341X_VIDEO_SPATIAL_FILTER_MODE_MANUAL</code>&nbsp;</td><td valign="top">Choose the filter manually</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_CX2341X_VIDEO_SPATIAL_FILTER_MODE_AUTO</code>&nbsp;</td><td valign="top">Choose the filter automatically</td></tr></tbody></table></td></tr><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td colspan="2" valign="top"><code class="constant">V4L2_CID_MPEG_CX2341X_VIDEO_SPATIAL_FILTER</code>&nbsp;</td><td valign="top">integer&nbsp;(0-15)</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">The setting for the
Spatial Filter. 0 = off, 15 = maximum. (Default is 0.)</td></tr><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td colspan="2" valign="top"><a name="luma-spatial-filter-type"></a><code class="constant">V4L2_CID_MPEG_CX2341X_VIDEO_LUMA_SPATIAL_FILTER_TYPE</code>&nbsp;</td><td valign="top">enum&nbsp;v4l2_mpeg_cx2341x_video_luma_spatial_filter_type</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">Select the algorithm
to use for the Luma Spatial Filter (default
<code class="constant">1D_HOR</code>). Possible values:</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top"><table width="100%" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td valign="top"><code class="constant">V4L2_MPEG_CX2341X_VIDEO_LUMA_SPATIAL_FILTER_TYPE_OFF</code>&nbsp;</td><td valign="top">No filter</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_CX2341X_VIDEO_LUMA_SPATIAL_FILTER_TYPE_1D_HOR</code>&nbsp;</td><td valign="top">One-dimensional horizontal</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_CX2341X_VIDEO_LUMA_SPATIAL_FILTER_TYPE_1D_VERT</code>&nbsp;</td><td valign="top">One-dimensional vertical</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_CX2341X_VIDEO_LUMA_SPATIAL_FILTER_TYPE_2D_HV_SEPARABLE</code>&nbsp;</td><td valign="top">Two-dimensional separable</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_CX2341X_VIDEO_LUMA_SPATIAL_FILTER_TYPE_2D_SYM_NON_SEPARABLE</code>&nbsp;</td><td valign="top">Two-dimensional symmetrical
non-separable</td></tr></tbody></table></td></tr><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td colspan="2" valign="top"><a name="chroma-spatial-filter-type"></a><code class="constant">V4L2_CID_MPEG_CX2341X_VIDEO_CHROMA_SPATIAL_FILTER_TYPE</code>&nbsp;</td><td valign="top">enum&nbsp;v4l2_mpeg_cx2341x_video_chroma_spatial_filter_type</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">Select the algorithm
for the Chroma Spatial Filter (default <code class="constant">1D_HOR</code>).
Possible values are:</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top"><table width="100%" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td valign="top"><code class="constant">V4L2_MPEG_CX2341X_VIDEO_CHROMA_SPATIAL_FILTER_TYPE_OFF</code>&nbsp;</td><td valign="top">No filter</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_CX2341X_VIDEO_CHROMA_SPATIAL_FILTER_TYPE_1D_HOR</code>&nbsp;</td><td valign="top">One-dimensional horizontal</td></tr></tbody></table></td></tr><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td colspan="2" valign="top"><a name="v4l2-mpeg-cx2341x-video-temporal-filter-mode"></a><code class="constant">V4L2_CID_MPEG_CX2341X_VIDEO_TEMPORAL_FILTER_MODE</code>&nbsp;</td><td valign="top">enum&nbsp;v4l2_mpeg_cx2341x_video_temporal_filter_mode</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">Sets the Temporal
Filter mode (default <code class="constant">MANUAL</code>). Possible values
are:</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top"><table width="100%" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td valign="top"><code class="constant">V4L2_MPEG_CX2341X_VIDEO_TEMPORAL_FILTER_MODE_MANUAL</code>&nbsp;</td><td valign="top">Choose the filter manually</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_CX2341X_VIDEO_TEMPORAL_FILTER_MODE_AUTO</code>&nbsp;</td><td valign="top">Choose the filter automatically</td></tr></tbody></table></td></tr><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td colspan="2" valign="top"><code class="constant">V4L2_CID_MPEG_CX2341X_VIDEO_TEMPORAL_FILTER</code>&nbsp;</td><td valign="top">integer&nbsp;(0-31)</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">The setting for the
Temporal Filter. 0 = off, 31 = maximum. (Default is 8 for full-scale
capturing and 0 for scaled capturing.)</td></tr><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td colspan="2" valign="top"><a name="v4l2-mpeg-cx2341x-video-median-filter-type"></a><code class="constant">V4L2_CID_MPEG_CX2341X_VIDEO_MEDIAN_FILTER_TYPE</code>&nbsp;</td><td valign="top">enum&nbsp;v4l2_mpeg_cx2341x_video_median_filter_type</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">Median Filter Type
(default <code class="constant">OFF</code>). Possible values are:</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top"><table width="100%" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td valign="top"><code class="constant">V4L2_MPEG_CX2341X_VIDEO_MEDIAN_FILTER_TYPE_OFF</code>&nbsp;</td><td valign="top">No filter</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_CX2341X_VIDEO_MEDIAN_FILTER_TYPE_HOR</code>&nbsp;</td><td valign="top">Horizontal filter</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_CX2341X_VIDEO_MEDIAN_FILTER_TYPE_VERT</code>&nbsp;</td><td valign="top">Vertical filter</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_CX2341X_VIDEO_MEDIAN_FILTER_TYPE_HOR_VERT</code>&nbsp;</td><td valign="top">Horizontal and vertical filter</td></tr><tr><td valign="top"><code class="constant">V4L2_MPEG_CX2341X_VIDEO_MEDIAN_FILTER_TYPE_DIAG</code>&nbsp;</td><td valign="top">Diagonal filter</td></tr></tbody></table></td></tr><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td colspan="2" valign="top"><code class="constant">V4L2_CID_MPEG_CX2341X_VIDEO_LUMA_MEDIAN_FILTER_BOTTOM</code>&nbsp;</td><td valign="top">integer&nbsp;(0-255)</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">Threshold above which
the luminance median filter is enabled (default 0)</td></tr><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td colspan="2" valign="top"><code class="constant">V4L2_CID_MPEG_CX2341X_VIDEO_LUMA_MEDIAN_FILTER_TOP</code>&nbsp;</td><td valign="top">integer&nbsp;(0-255)</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">Threshold below which
the luminance median filter is enabled (default 255)</td></tr><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td colspan="2" valign="top"><code class="constant">V4L2_CID_MPEG_CX2341X_VIDEO_CHROMA_MEDIAN_FILTER_BOTTOM</code>&nbsp;</td><td valign="top">integer&nbsp;(0-255)</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">Threshold above which
the chroma median filter is enabled (default 0)</td></tr><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td colspan="2" valign="top"><code class="constant">V4L2_CID_MPEG_CX2341X_VIDEO_CHROMA_MEDIAN_FILTER_TOP</code>&nbsp;</td><td valign="top">integer&nbsp;(0-255)</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">Threshold below which
the chroma median filter is enabled (default 255)</td></tr><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td colspan="2" valign="top"><code class="constant">V4L2_CID_MPEG_CX2341X_STREAM_INSERT_NAV_PACKETS</code>&nbsp;</td><td valign="top">boolean</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">The CX2341X MPEG encoder
can insert one empty MPEG-2 PES packet into the stream between every
four video frames. The packet size is 2048 bytes, including the
packet_start_code_prefix and stream_id fields. The stream_id is 0xBF
(private stream 2). The payload consists of 0x00 bytes, to be filled
in by the application. 0 = do not insert, 1 = insert packets.</td></tr></tbody></table></div></div><br class="table-break"></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="camera-controls"></a>1.9.6.&nbsp;Camera Control Reference</h3></div></div></div><p>The Camera class includes controls for mechanical (or
equivalent digital) features of a device such as controllable lenses
or sensors.</p><div class="table"><a name="camera-control-id"></a><p class="title"><b>Table&nbsp;1.4.&nbsp;Camera Control IDs</b></p><div class="table-contents"><table summary="Camera Control IDs" width="100%" border="0"><colgroup><col><col><col><col></colgroup><thead><tr><th colspan="2" align="left">ID</th><th align="left">Type</th><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><th colspan="3" align="left">Description</th></tr></thead><tbody valign="top"><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td colspan="2" valign="top"><code class="constant">V4L2_CID_CAMERA_CLASS</code>&nbsp;</td><td valign="top">class</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">The Camera class
descriptor. Calling <a class="link" href="#vidioc-queryctrl" title="ioctl VIDIOC_QUERYCTRL, VIDIOC_QUERYMENU"><code class="constant">VIDIOC_QUERYCTRL</code></a> for this control will return a
description of this control class.</td></tr><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td colspan="2" valign="top"><a name="v4l2-exposure-auto-type"></a><code class="constant">V4L2_CID_EXPOSURE_AUTO</code>&nbsp;</td><td valign="top">enum&nbsp;v4l2_exposure_auto_type</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">Enables automatic
adjustments of the exposure time and/or iris aperture. The effect of
manual changes of the exposure time or iris aperture while these
features are enabled is undefined, drivers should ignore such
requests. Possible values are:</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top"><table width="100%" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td valign="top"><code class="constant">V4L2_EXPOSURE_AUTO</code>&nbsp;</td><td valign="top">Automatic exposure time, automatic iris
aperture.</td></tr><tr><td valign="top"><code class="constant">V4L2_EXPOSURE_MANUAL</code>&nbsp;</td><td valign="top">Manual exposure time, manual iris.</td></tr><tr><td valign="top"><code class="constant">V4L2_EXPOSURE_SHUTTER_PRIORITY</code>&nbsp;</td><td valign="top">Manual exposure time, auto iris.</td></tr><tr><td valign="top"><code class="constant">V4L2_EXPOSURE_APERTURE_PRIORITY</code>&nbsp;</td><td valign="top">Auto exposure time, manual iris.</td></tr></tbody></table></td></tr><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td colspan="2" valign="top"><code class="constant">V4L2_CID_EXPOSURE_ABSOLUTE</code>&nbsp;</td><td valign="top">integer</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">Determines the exposure
time of the camera sensor. The exposure time is limited by the frame
interval. Drivers should interpret the values as 100 µs units,
where the value 1 stands for 1/10000th of a second, 10000 for 1 second
and 100000 for 10 seconds.</td></tr><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td colspan="2" valign="top"><code class="constant">V4L2_CID_EXPOSURE_AUTO_PRIORITY</code>&nbsp;</td><td valign="top">boolean</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">When
<code class="constant">V4L2_CID_EXPOSURE_AUTO</code> is set to
<code class="constant">AUTO</code> or <code class="constant">APERTURE_PRIORITY</code>,
this control determines if the device may dynamically vary the frame
rate. By default this feature is disabled (0) and the frame rate must
remain constant.</td></tr><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td colspan="2" valign="top"><code class="constant">V4L2_CID_PAN_RELATIVE</code>&nbsp;</td><td valign="top">integer</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">This control turns the
camera horizontally by the specified amount. The unit is undefined. A
positive value moves the camera to the right (clockwise when viewed
from above), a negative value to the left. A value of zero does not
cause motion. This is a write-only control.</td></tr><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td colspan="2" valign="top"><code class="constant">V4L2_CID_TILT_RELATIVE</code>&nbsp;</td><td valign="top">integer</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">This control turns the
camera vertically by the specified amount. The unit is undefined. A
positive value moves the camera up, a negative value down. A value of
zero does not cause motion. This is a write-only control.</td></tr><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td colspan="2" valign="top"><code class="constant">V4L2_CID_PAN_RESET</code>&nbsp;</td><td valign="top">button</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">When this control is set,
the camera moves horizontally to the default position.</td></tr><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td colspan="2" valign="top"><code class="constant">V4L2_CID_TILT_RESET</code>&nbsp;</td><td valign="top">button</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">When this control is set,
the camera moves vertically to the default position.</td></tr><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td colspan="2" valign="top"><code class="constant">V4L2_CID_PAN_ABSOLUTE</code>&nbsp;</td><td valign="top">integer</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">This control
turns the camera horizontally to the specified position. Positive
values move the camera to the right (clockwise when viewed from above),
negative values to the left. Drivers should interpret the values as arc
seconds, with valid values between -180 * 3600 and +180 * 3600
inclusive.</td></tr><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td colspan="2" valign="top"><code class="constant">V4L2_CID_TILT_ABSOLUTE</code>&nbsp;</td><td valign="top">integer</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">This control
turns the camera vertically to the specified position. Positive values
move the camera up, negative values down. Drivers should interpret the
values as arc seconds, with valid values between -180 * 3600 and +180
* 3600 inclusive.</td></tr><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td colspan="2" valign="top"><code class="constant">V4L2_CID_FOCUS_ABSOLUTE</code>&nbsp;</td><td valign="top">integer</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">This control sets the
focal point of the camera to the specified position. The unit is
undefined. Positive values set the focus closer to the camera,
negative values towards infinity.</td></tr><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td colspan="2" valign="top"><code class="constant">V4L2_CID_FOCUS_RELATIVE</code>&nbsp;</td><td valign="top">integer</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">This control moves the
focal point of the camera by the specified amount. The unit is
undefined. Positive values move the focus closer to the camera,
negative values towards infinity. This is a write-only control.</td></tr><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td colspan="2" valign="top"><code class="constant">V4L2_CID_FOCUS_AUTO</code>&nbsp;</td><td valign="top">boolean</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">Enables automatic focus
adjustments. The effect of manual focus adjustments while this feature
is enabled is undefined, drivers should ignore such requests.</td></tr><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td colspan="2" valign="top"><code class="constant">V4L2_CID_ZOOM_ABSOLUTE</code>&nbsp;</td><td valign="top">integer</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">Specify the objective lens
focal length as an absolute value. The zoom unit is driver-specific and its
value should be a positive integer.</td></tr><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td colspan="2" valign="top"><code class="constant">V4L2_CID_ZOOM_RELATIVE</code>&nbsp;</td><td valign="top">integer</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">Specify the objective lens
focal length relatively to the current value. Positive values move the zoom
lens group towards the telephoto direction, negative values towards the
wide-angle direction. The zoom unit is driver-specific. This is a write-only control.</td></tr><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td colspan="2" valign="top"><code class="constant">V4L2_CID_ZOOM_CONTINUOUS</code>&nbsp;</td><td valign="top">integer</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">Move the objective lens group
at the specified speed until it reaches physical device limits or until an
explicit request to stop the movement. A positive value moves the zoom lens
group towards the telephoto direction. A value of zero stops the zoom lens
group movement. A negative value moves the zoom lens group towards the
wide-angle direction. The zoom speed unit is driver-specific.</td></tr><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td colspan="2" valign="top"><code class="constant">V4L2_CID_PRIVACY</code>&nbsp;</td><td valign="top">boolean</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">Prevent video from being acquired
by the camera. When this control is set to <code class="constant">TRUE</code> (1), no
image can be captured by the camera. Common means to enforce privacy are
mechanical obturation of the sensor and firmware image processing, but the
device is not restricted to these methods. Devices that implement the privacy
control must support read access and may support write access.</td></tr><tr><td colspan="2" valign="top"><code class="constant">V4L2_CID_BAND_STOP_FILTER</code>&nbsp;</td><td valign="top">integer</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">Switch the band-stop filter of a
camera sensor on or off, or specify its strength. Such band-stop filters can
be used, for example, to filter out the fluorescent light component.</td></tr><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr></tbody></table></div></div><br class="table-break"></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="fm-tx-controls"></a>1.9.7.&nbsp;FM Transmitter Control Reference</h3></div></div></div><p>The FM Transmitter (FM_TX) class includes controls for common features of
FM transmissions capable devices. Currently this class includes parameters for audio
compression, pilot tone generation, audio deviation limiter, RDS transmission and
tuning power features.</p><div class="table"><a name="fm-tx-control-id"></a><p class="title"><b>Table&nbsp;1.5.&nbsp;FM_TX Control IDs</b></p><div class="table-contents"><table summary="FM_TX Control IDs" width="100%" border="0"><colgroup><col><col><col><col></colgroup><thead><tr><th colspan="2" align="left">ID</th><th align="left">Type</th><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><th colspan="3" align="left">Description</th></tr></thead><tbody valign="top"><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td colspan="2" valign="top"><code class="constant">V4L2_CID_FM_TX_CLASS</code>&nbsp;</td><td valign="top">class</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">The FM_TX class
descriptor. Calling <a class="link" href="#vidioc-queryctrl" title="ioctl VIDIOC_QUERYCTRL, VIDIOC_QUERYMENU"><code class="constant">VIDIOC_QUERYCTRL</code></a> for this control will return a
description of this control class.</td></tr><tr><td colspan="2" valign="top"><code class="constant">V4L2_CID_RDS_TX_DEVIATION</code>&nbsp;</td><td valign="top">integer</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">Configures RDS signal frequency deviation level in Hz.
The range and step are driver-specific.</td></tr><tr><td colspan="2" valign="top"><code class="constant">V4L2_CID_RDS_TX_PI</code>&nbsp;</td><td valign="top">integer</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">Sets the RDS Programme Identification field
for transmission.</td></tr><tr><td colspan="2" valign="top"><code class="constant">V4L2_CID_RDS_TX_PTY</code>&nbsp;</td><td valign="top">integer</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">Sets the RDS Programme Type field for transmission.
This encodes up to 31 pre-defined programme types.</td></tr><tr><td colspan="2" valign="top"><code class="constant">V4L2_CID_RDS_TX_PS_NAME</code>&nbsp;</td><td valign="top">string</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">Sets the Programme Service name (PS_NAME) for transmission.
It is intended for static display on a receiver. It is the primary aid to listeners in programme service
identification and selection.  In Annex E of <a class="xref" href="#en50067" title="Specification of the radio data system (RDS) for VHF/FM sound broadcasting in the frequency range from 87,5 to 108,0 MHz">[<abbr class="abbrev">EN&nbsp;50067</abbr>]</a>, the RDS specification,
there is a full description of the correct character encoding for Programme Service name strings.
Also from RDS specification, PS is usually a single eight character text. However, it is also possible
to find receivers which can scroll strings sized as 8 x N characters. So, this control must be configured
with steps of 8 characters. The result is it must always contain a string with size multiple of 8.</td></tr><tr><td colspan="2" valign="top"><code class="constant">V4L2_CID_RDS_TX_RADIO_TEXT</code>&nbsp;</td><td valign="top">string</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">Sets the Radio Text info for transmission. It is a textual description of
what is being broadcasted. RDS Radio Text can be applied when broadcaster wishes to transmit longer PS names,
programme-related information or any other text. In these cases, RadioText should be used in addition to
<code class="constant">V4L2_CID_RDS_TX_PS_NAME</code>. The encoding for Radio Text strings is also fully described
in Annex E of <a class="xref" href="#en50067" title="Specification of the radio data system (RDS) for VHF/FM sound broadcasting in the frequency range from 87,5 to 108,0 MHz">[<abbr class="abbrev">EN&nbsp;50067</abbr>]</a>. The length of Radio Text strings depends on which RDS Block is being
used to transmit it, either 32 (2A block) or 64 (2B block).  However, it is also possible
to find receivers which can scroll strings sized as 32 x N or 64 x N characters. So, this control must be configured
with steps of 32 or 64 characters. The result is it must always contain a string with size multiple of 32 or 64. </td></tr><tr><td colspan="2" valign="top"><code class="constant">V4L2_CID_AUDIO_LIMITER_ENABLED</code>&nbsp;</td><td valign="top">boolean</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">Enables or disables the audio deviation limiter feature.
The limiter is useful when trying to maximize the audio volume, minimize receiver-generated
distortion and prevent overmodulation.
</td></tr><tr><td colspan="2" valign="top"><code class="constant">V4L2_CID_AUDIO_LIMITER_RELEASE_TIME</code>&nbsp;</td><td valign="top">integer</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">Sets the audio deviation limiter feature release time.
Unit is in useconds. Step and range are driver-specific.</td></tr><tr><td colspan="2" valign="top"><code class="constant">V4L2_CID_AUDIO_LIMITER_DEVIATION</code>&nbsp;</td><td valign="top">integer</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">Configures audio frequency deviation level in Hz.
The range and step are driver-specific.</td></tr><tr><td colspan="2" valign="top"><code class="constant">V4L2_CID_AUDIO_COMPRESSION_ENABLED</code>&nbsp;</td><td valign="top">boolean</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">Enables or disables the audio compression feature.
This feature amplifies signals below the threshold by a fixed gain and compresses audio
signals above the threshold by the ratio of Threshold/(Gain + Threshold).</td></tr><tr><td colspan="2" valign="top"><code class="constant">V4L2_CID_AUDIO_COMPRESSION_GAIN</code>&nbsp;</td><td valign="top">integer</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">Sets the gain for audio compression feature. It is
a dB value. The range and step are driver-specific.</td></tr><tr><td colspan="2" valign="top"><code class="constant">V4L2_CID_AUDIO_COMPRESSION_THRESHOLD</code>&nbsp;</td><td valign="top">integer</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">Sets the threshold level for audio compression freature.
It is a dB value. The range and step are driver-specific.</td></tr><tr><td colspan="2" valign="top"><code class="constant">V4L2_CID_AUDIO_COMPRESSION_ATTACK_TIME</code>&nbsp;</td><td valign="top">integer</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">Sets the attack time for audio compression feature.
It is a useconds value. The range and step are driver-specific.</td></tr><tr><td colspan="2" valign="top"><code class="constant">V4L2_CID_AUDIO_COMPRESSION_RELEASE_TIME</code>&nbsp;</td><td valign="top">integer</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">Sets the release time for audio compression feature.
It is a useconds value. The range and step are driver-specific.</td></tr><tr><td colspan="2" valign="top"><code class="constant">V4L2_CID_PILOT_TONE_ENABLED</code>&nbsp;</td><td valign="top">boolean</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">Enables or disables the pilot tone generation feature.</td></tr><tr><td colspan="2" valign="top"><code class="constant">V4L2_CID_PILOT_TONE_DEVIATION</code>&nbsp;</td><td valign="top">integer</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">Configures pilot tone frequency deviation level. Unit is
in Hz. The range and step are driver-specific.</td></tr><tr><td colspan="2" valign="top"><code class="constant">V4L2_CID_PILOT_TONE_FREQUENCY</code>&nbsp;</td><td valign="top">integer</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">Configures pilot tone frequency value. Unit is
in Hz. The range and step are driver-specific.</td></tr><tr><td colspan="2" valign="top"><code class="constant">V4L2_CID_TUNE_PREEMPHASIS</code>&nbsp;</td><td valign="top">integer</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top"><a name="v4l2-preemphasis"></a>Configures the pre-emphasis value for broadcasting.
A pre-emphasis filter is applied to the broadcast to accentuate the high audio frequencies.
Depending on the region, a time constant of either 50 or 75 useconds is used. The enum&nbsp;v4l2_preemphasis
defines possible values for pre-emphasis. Here they are:</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top"><table width="100%" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td valign="top"><code class="constant">V4L2_PREEMPHASIS_DISABLED</code>&nbsp;</td><td valign="top">No pre-emphasis is applied.</td></tr><tr><td valign="top"><code class="constant">V4L2_PREEMPHASIS_50_uS</code>&nbsp;</td><td valign="top">A pre-emphasis of 50 uS is used.</td></tr><tr><td valign="top"><code class="constant">V4L2_PREEMPHASIS_75_uS</code>&nbsp;</td><td valign="top">A pre-emphasis of 75 uS is used.</td></tr></tbody></table></td></tr><tr><td colspan="2" valign="top"><code class="constant">V4L2_CID_TUNE_POWER_LEVEL</code>&nbsp;</td><td valign="top">integer</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">Sets the output power level for signal transmission.
Unit is in dBuV. Range and step are driver-specific.</td></tr><tr><td colspan="2" valign="top"><code class="constant">V4L2_CID_TUNE_ANTENNA_CAPACITOR</code>&nbsp;</td><td valign="top">integer</td><td class="auto-generated">&nbsp;</td></tr><tr><td class="auto-generated">&nbsp;</td><td colspan="3" valign="top">This selects the value of antenna tuning capacitor
manually or automatically if set to zero. Unit, range and step are driver-specific.</td></tr><tr><td valign="top">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr></tbody></table></div></div><br class="table-break"><p>For more details about RDS specification, refer to
<a class="xref" href="#en50067" title="Specification of the radio data system (RDS) for VHF/FM sound broadcasting in the frequency range from 87,5 to 108,0 MHz">[<abbr class="abbrev">EN&nbsp;50067</abbr>]</a> document, from CENELEC.</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="format"></a>1.10.&nbsp;Data Formats</h2></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2772276"></a>1.10.1.&nbsp;Data Format Negotiation</h3></div></div></div><p>Different devices exchange different kinds of data with
applications, for example video images, raw or sliced VBI data, RDS
datagrams. Even within one kind many different formats are possible,
in particular an abundance of image formats. Although drivers must
provide a default and the selection persists across closing and
reopening a device, applications should always negotiate a data format
before engaging in data exchange. Negotiation means the application
asks for a particular format and the driver selects and reports the
best the hardware can do to satisfy the request. Of course
applications can also just query the current selection.</p><p>A single mechanism exists to negotiate all data formats
using the aggregate struct&nbsp;<a class="link" href="#v4l2-format" title="Table&nbsp;84.&nbsp;struct v4l2_format">v4l2_format</a> and the <a class="link" href="#vidioc-g-fmt" title="ioctl VIDIOC_G_FMT, VIDIOC_S_FMT, VIDIOC_TRY_FMT"><code class="constant">VIDIOC_G_FMT</code></a> and
<a class="link" href="#vidioc-g-fmt" title="ioctl VIDIOC_G_FMT, VIDIOC_S_FMT, VIDIOC_TRY_FMT"><code class="constant">VIDIOC_S_FMT</code></a> ioctls. Additionally the <a class="link" href="#vidioc-g-fmt" title="ioctl VIDIOC_G_FMT, VIDIOC_S_FMT, VIDIOC_TRY_FMT"><code class="constant">VIDIOC_TRY_FMT</code></a> ioctl can be
used to examine what the hardware <span class="emphasis"><em>could</em></span> do,
without actually selecting a new data format. The data formats
supported by the V4L2 API are covered in the respective device section
in <a class="xref" href="#devices" title="Chapter&nbsp;4.&nbsp;Interfaces">Chapter&nbsp;4, <i>Interfaces</i></a>. For a closer look at image formats see
<a class="xref" href="#pixfmt" title="Chapter&nbsp;2.&nbsp;Image Formats">Chapter&nbsp;2, <i>Image Formats</i></a>.</p><p>The <code class="constant">VIDIOC_S_FMT</code> ioctl is a major
turning-point in the initialization sequence. Prior to this point
multiple panel applications can access the same device concurrently to
select the current input, change controls or modify other properties.
The first <code class="constant">VIDIOC_S_FMT</code> assigns a logical stream
(video data, VBI data etc.) exclusively to one file descriptor.</p><p>Exclusive means no other application, more precisely no
other file descriptor, can grab this stream or change device
properties inconsistent with the negotiated parameters. A video
standard change for example, when the new standard uses a different
number of scan lines, can invalidate the selected image format.
Therefore only the file descriptor owning the stream can make
invalidating changes. Accordingly multiple file descriptors which
grabbed different logical streams prevent each other from interfering
with their settings. When for example video overlay is about to start
or already in progress, simultaneous video capturing may be restricted
to the same cropping and image size.</p><p>When applications omit the
<code class="constant">VIDIOC_S_FMT</code> ioctl its locking side effects are
implied by the next step, the selection of an I/O method with the
<a class="link" href="#vidioc-reqbufs" title="ioctl VIDIOC_REQBUFS"><code class="constant">VIDIOC_REQBUFS</code></a> ioctl or implicit with the first <a class="link" href="#func-read" title="V4L2 read()"><code class="function">read()</code></a> or
<a class="link" href="#func-write" title="V4L2 write()"><code class="function">write()</code></a> call.</p><p>Generally only one logical stream can be assigned to a
file descriptor, the exception being drivers permitting simultaneous
video capturing and overlay using the same file descriptor for
compatibility with V4L and earlier versions of V4L2. Switching the
logical stream or returning into "panel mode" is possible by closing
and reopening the device. Drivers <span class="emphasis"><em>may</em></span> support a
switch using <code class="constant">VIDIOC_S_FMT</code>.</p><p>All drivers exchanging data with
applications must support the <code class="constant">VIDIOC_G_FMT</code> and
<code class="constant">VIDIOC_S_FMT</code> ioctl. Implementation of the
<code class="constant">VIDIOC_TRY_FMT</code> is highly recommended but
optional.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2772464"></a>1.10.2.&nbsp;Image Format Enumeration</h3></div></div></div><p>Apart of the generic format negotiation functions
a special ioctl to enumerate all image formats supported by video
capture, overlay or output devices is available.<sup>[<a name="id2772475" href="#ftn.id2772475" class="footnote">11</a>]</sup></p><p>The <a class="link" href="#vidioc-enum-fmt" title="ioctl VIDIOC_ENUM_FMT"><code class="constant">VIDIOC_ENUM_FMT</code></a> ioctl must be supported
by all drivers exchanging image data with applications.</p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>Drivers are not supposed to convert image formats in
kernel space. They must enumerate only formats directly supported by
the hardware. If necessary driver writers should publish an example
conversion routine or library for integration into applications.</p></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="crop"></a>1.11.&nbsp;Image Cropping, Insertion and Scaling</h2></div></div></div><p>Some video capture devices can sample a subsection of the
picture and shrink or enlarge it to an image of arbitrary size. We
call these abilities cropping and scaling. Some video output devices
can scale an image up or down and insert it at an arbitrary scan line
and horizontal offset into a video signal.</p><p>Applications can use the following API to select an area in
the video signal, query the default area and the hardware limits.
<span class="emphasis"><em>Despite their name, the <a class="link" href="#vidioc-cropcap" title="ioctl VIDIOC_CROPCAP"><code class="constant">VIDIOC_CROPCAP</code></a>, <a class="link" href="#vidioc-g-crop" title="ioctl VIDIOC_G_CROP, VIDIOC_S_CROP"><code class="constant">VIDIOC_G_CROP</code></a>
and <a class="link" href="#vidioc-g-crop" title="ioctl VIDIOC_G_CROP, VIDIOC_S_CROP"><code class="constant">VIDIOC_S_CROP</code></a> ioctls apply to input as well as output
devices.</em></span></p><p>Scaling requires a source and a target. On a video capture
or overlay device the source is the video signal, and the cropping
ioctls determine the area actually sampled. The target are images
read by the application or overlaid onto the graphics screen. Their
size (and position for an overlay) is negotiated with the
<a class="link" href="#vidioc-g-fmt" title="ioctl VIDIOC_G_FMT, VIDIOC_S_FMT, VIDIOC_TRY_FMT"><code class="constant">VIDIOC_G_FMT</code></a> and <a class="link" href="#vidioc-g-fmt" title="ioctl VIDIOC_G_FMT, VIDIOC_S_FMT, VIDIOC_TRY_FMT"><code class="constant">VIDIOC_S_FMT</code></a> ioctls.</p><p>On a video output device the source are the images passed in
by the application, and their size is again negotiated with the
<code class="constant">VIDIOC_G/S_FMT</code> ioctls, or may be encoded in a
compressed video stream. The target is the video signal, and the
cropping ioctls determine the area where the images are
inserted.</p><p>Source and target rectangles are defined even if the device
does not support scaling or the <code class="constant">VIDIOC_G/S_CROP</code>
ioctls. Their size (and position where applicable) will be fixed in
this case. <span class="emphasis"><em>All capture and output device must support the
<code class="constant">VIDIOC_CROPCAP</code> ioctl such that applications can
determine if scaling takes place.</em></span></p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2772614"></a>1.11.1.&nbsp;Cropping Structures</h3></div></div></div><div class="figure"><a name="crop-scale"></a><p class="title"><b>Figure&nbsp;1.1.&nbsp;Image Cropping, Insertion and Scaling</b></p><div class="figure-contents"><div class="mediaobject"><img src="Video%20for%20Linux%20Two%20API%20Specification_files/crop.gif" alt="The cropping, insertion and scaling process"></div></div></div><br class="figure-break"><p>For capture devices the coordinates of the top left
corner, width and height of the area which can be sampled is given by
the <em class="structfield"><code>bounds</code></em> substructure of the
struct&nbsp;<a class="link" href="#v4l2-cropcap" title="Table&nbsp;39.&nbsp;struct v4l2_cropcap">v4l2_cropcap</a> returned by the <code class="constant">VIDIOC_CROPCAP</code>
ioctl. To support a wide range of hardware this specification does not
define an origin or units. However by convention drivers should
horizontally count unscaled samples relative to 0H (the leading edge
of the horizontal sync pulse, see <a class="xref" href="#vbi-hsync" title="Figure&nbsp;4.1.&nbsp;Line synchronization">Figure&nbsp;4.1, “Line synchronization”</a>).
Vertically ITU-R line
numbers of the first field (<a class="xref" href="#vbi-525" title="Figure&nbsp;4.2.&nbsp;ITU-R 525 line numbering (M/NTSC and M/PAL)">Figure&nbsp;4.2, “ITU-R 525 line numbering (M/NTSC and M/PAL)”</a>, <a class="xref" href="#vbi-625" title="Figure&nbsp;4.3.&nbsp;ITU-R 625 line numbering">Figure&nbsp;4.3, “ITU-R 625 line numbering”</a>), multiplied by two if the driver can capture both
fields.</p><p>The top left corner, width and height of the source
rectangle, that is the area actually sampled, is given by struct&nbsp;<a class="link" href="#v4l2-crop" title="Table&nbsp;73.&nbsp;struct v4l2_crop">v4l2_crop</a>
using the same coordinate system as struct&nbsp;<a class="link" href="#v4l2-cropcap" title="Table&nbsp;39.&nbsp;struct v4l2_cropcap">v4l2_cropcap</a>. Applications can
use the <code class="constant">VIDIOC_G_CROP</code> and
<code class="constant">VIDIOC_S_CROP</code> ioctls to get and set this
rectangle. It must lie completely within the capture boundaries and
the driver may further adjust the requested size and/or position
according to hardware limitations.</p><p>Each capture device has a default source rectangle, given
by the <em class="structfield"><code>defrect</code></em> substructure of
struct&nbsp;<a class="link" href="#v4l2-cropcap" title="Table&nbsp;39.&nbsp;struct v4l2_cropcap">v4l2_cropcap</a>. The center of this rectangle shall align with the
center of the active picture area of the video signal, and cover what
the driver writer considers the complete picture. Drivers shall reset
the source rectangle to the default when the driver is first loaded,
but not later.</p><p>For output devices these structures and ioctls are used
accordingly, defining the <span class="emphasis"><em>target</em></span> rectangle where
the images will be inserted into the video signal.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2772775"></a>1.11.2.&nbsp;Scaling Adjustments</h3></div></div></div><p>Video hardware can have various cropping, insertion and
scaling limitations. It may only scale up or down, support only
discrete scaling factors, or have different scaling abilities in
horizontal and vertical direction. Also it may not support scaling at
all. At the same time the struct&nbsp;<a class="link" href="#v4l2-crop" title="Table&nbsp;73.&nbsp;struct v4l2_crop">v4l2_crop</a> rectangle may have to be
aligned, and both the source and target rectangles may have arbitrary
upper and lower size limits. In particular the maximum
<em class="structfield"><code>width</code></em> and <em class="structfield"><code>height</code></em>
in struct&nbsp;<a class="link" href="#v4l2-crop" title="Table&nbsp;73.&nbsp;struct v4l2_crop">v4l2_crop</a> may be smaller than the
struct&nbsp;<a class="link" href="#v4l2-cropcap" title="Table&nbsp;39.&nbsp;struct v4l2_cropcap">v4l2_cropcap</a>.<em class="structfield"><code>bounds</code></em> area. Therefore, as
usual, drivers are expected to adjust the requested parameters and
return the actual values selected.</p><p>Applications can change the source or the target rectangle
first, as they may prefer a particular image size or a certain area in
the video signal. If the driver has to adjust both to satisfy hardware
limitations, the last requested rectangle shall take priority, and the
driver should preferably adjust the opposite one. The <a class="link" href="#vidioc-g-fmt" title="ioctl VIDIOC_G_FMT, VIDIOC_S_FMT, VIDIOC_TRY_FMT"><code class="constant">VIDIOC_TRY_FMT</code></a>
ioctl however shall not change the driver state and therefore only
adjust the requested rectangle.</p><p>Suppose scaling on a video capture device is restricted to
a factor 1:1 or 2:1 in either direction and the target image size must
be a multiple of 16&nbsp;×&nbsp;16 pixels. The source cropping
rectangle is set to defaults, which are also the upper limit in this
example, of 640&nbsp;×&nbsp;400 pixels at offset 0,&nbsp;0. An
application requests an image size of 300&nbsp;×&nbsp;225
pixels, assuming video will be scaled down from the "full picture"
accordingly. The driver sets the image size to the closest possible
values 304&nbsp;×&nbsp;224, then chooses the cropping rectangle
closest to the requested size, that is 608&nbsp;×&nbsp;224
(224&nbsp;×&nbsp;2:1 would exceed the limit 400). The offset
0,&nbsp;0 is still valid, thus unmodified. Given the default cropping
rectangle reported by <code class="constant">VIDIOC_CROPCAP</code> the
application can easily propose another offset to center the cropping
rectangle.</p><p>Now the application may insist on covering an area using a
picture aspect ratio closer to the original request, so it asks for a
cropping rectangle of 608&nbsp;×&nbsp;456 pixels. The present
scaling factors limit cropping to 640&nbsp;×&nbsp;384, so the
driver returns the cropping size 608&nbsp;×&nbsp;384 and adjusts
the image size to closest possible 304&nbsp;×&nbsp;192.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2772867"></a>1.11.3.&nbsp;Examples</h3></div></div></div><p>Source and target rectangles shall remain unchanged across
closing and reopening a device, such that piping data into or out of a
device will work without special preparations. More advanced
applications should ensure the parameters are suitable before starting
I/O.</p><div class="example"><a name="id2772888"></a><p class="title"><b>Example&nbsp;1.10.&nbsp;Resetting the cropping parameters</b></p><div class="example-contents"><p>(A video capture device is assumed; change
<code class="constant">V4L2_BUF_TYPE_VIDEO_CAPTURE</code> for other
devices.)</p><pre class="programlisting">struct&nbsp;<a class="link" href="#v4l2-cropcap" title="Table&nbsp;39.&nbsp;struct v4l2_cropcap">v4l2_cropcap</a> cropcap;
struct&nbsp;<a class="link" href="#v4l2-crop" title="Table&nbsp;73.&nbsp;struct v4l2_crop">v4l2_crop</a> crop;

memset (&amp;cropcap, 0, sizeof (cropcap));
cropcap.type = V4L2_BUF_TYPE_VIDEO_CAPTURE;

if (-1 == ioctl (fd, <a class="link" href="#vidioc-cropcap" title="ioctl VIDIOC_CROPCAP"><code class="constant">VIDIOC_CROPCAP</code></a>, &amp;cropcap)) {
	perror ("VIDIOC_CROPCAP");
	exit (EXIT_FAILURE);
}

memset (&amp;crop, 0, sizeof (crop));
crop.type = V4L2_BUF_TYPE_VIDEO_CAPTURE;
crop.c = cropcap.defrect;

/* Ignore if cropping is not supported (EINVAL). */

if (-1 == ioctl (fd, <a class="link" href="#vidioc-g-crop" title="ioctl VIDIOC_G_CROP, VIDIOC_S_CROP"><code class="constant">VIDIOC_S_CROP</code></a>, &amp;crop)
    &amp;&amp; errno != EINVAL) {
	perror ("VIDIOC_S_CROP");
	exit (EXIT_FAILURE);
}
      </pre></div></div><br class="example-break"><div class="example"><a name="id2772952"></a><p class="title"><b>Example&nbsp;1.11.&nbsp;Simple downscaling</b></p><div class="example-contents"><p>(A video capture device is assumed.)</p><pre class="programlisting">struct&nbsp;<a class="link" href="#v4l2-cropcap" title="Table&nbsp;39.&nbsp;struct v4l2_cropcap">v4l2_cropcap</a> cropcap;
struct&nbsp;<a class="link" href="#v4l2-format" title="Table&nbsp;84.&nbsp;struct v4l2_format">v4l2_format</a> format;

reset_cropping_parameters ();

/* Scale down to 1/4 size of full picture. */

memset (&amp;format, 0, sizeof (format)); /* defaults */

format.type = V4L2_BUF_TYPE_VIDEO_CAPTURE;

format.fmt.pix.width = cropcap.defrect.width &gt;&gt; 1;
format.fmt.pix.height = cropcap.defrect.height &gt;&gt; 1;
format.fmt.pix.pixelformat = V4L2_PIX_FMT_YUYV;

if (-1 == ioctl (fd, <a class="link" href="#vidioc-g-fmt" title="ioctl VIDIOC_G_FMT, VIDIOC_S_FMT, VIDIOC_TRY_FMT"><code class="constant">VIDIOC_S_FMT</code></a>, &amp;format)) {
	perror ("VIDIOC_S_FORMAT");
	exit (EXIT_FAILURE);
}

/* We could check the actual image size now, the actual scaling factor
   or if the driver can scale at all. */
	</pre></div></div><br class="example-break"><div class="example"><a name="id2773008"></a><p class="title"><b>Example&nbsp;1.12.&nbsp;Selecting an output area</b></p><div class="example-contents"><pre class="programlisting">struct&nbsp;<a class="link" href="#v4l2-cropcap" title="Table&nbsp;39.&nbsp;struct v4l2_cropcap">v4l2_cropcap</a> cropcap;
struct&nbsp;<a class="link" href="#v4l2-crop" title="Table&nbsp;73.&nbsp;struct v4l2_crop">v4l2_crop</a> crop;

memset (&amp;cropcap, 0, sizeof (cropcap));
cropcap.type = V4L2_BUF_TYPE_VIDEO_OUTPUT;

if (-1 == ioctl (fd, VIDIOC_CROPCAP;, &amp;cropcap)) {
	perror ("VIDIOC_CROPCAP");
	exit (EXIT_FAILURE);
}

memset (&amp;crop, 0, sizeof (crop));

crop.type = V4L2_BUF_TYPE_VIDEO_OUTPUT;
crop.c = cropcap.defrect;

/* Scale the width and height to 50 % of their original size
   and center the output. */

crop.c.width /= 2;
crop.c.height /= 2;
crop.c.left += crop.c.width / 2;
crop.c.top += crop.c.height / 2;

/* Ignore if cropping is not supported (EINVAL). */

if (-1 == ioctl (fd, VIDIOC_S_CROP, &amp;crop)
    &amp;&amp; errno != EINVAL) {
	perror ("VIDIOC_S_CROP");
	exit (EXIT_FAILURE);
}
</pre></div></div><br class="example-break"><div class="example"><a name="id2773058"></a><p class="title"><b>Example&nbsp;1.13.&nbsp;Current scaling factor and pixel aspect</b></p><div class="example-contents"><p>(A video capture device is assumed.)</p><pre class="programlisting">struct&nbsp;<a class="link" href="#v4l2-cropcap" title="Table&nbsp;39.&nbsp;struct v4l2_cropcap">v4l2_cropcap</a> cropcap;
struct&nbsp;<a class="link" href="#v4l2-crop" title="Table&nbsp;73.&nbsp;struct v4l2_crop">v4l2_crop</a> crop;
struct&nbsp;<a class="link" href="#v4l2-format" title="Table&nbsp;84.&nbsp;struct v4l2_format">v4l2_format</a> format;
double hscale, vscale;
double aspect;
int dwidth, dheight;

memset (&amp;cropcap, 0, sizeof (cropcap));
cropcap.type = V4L2_BUF_TYPE_VIDEO_CAPTURE;

if (-1 == ioctl (fd, <a class="link" href="#vidioc-cropcap" title="ioctl VIDIOC_CROPCAP"><code class="constant">VIDIOC_CROPCAP</code></a>, &amp;cropcap)) {
	perror ("VIDIOC_CROPCAP");
	exit (EXIT_FAILURE);
}

memset (&amp;crop, 0, sizeof (crop));
crop.type = V4L2_BUF_TYPE_VIDEO_CAPTURE;

if (-1 == ioctl (fd, <a class="link" href="#vidioc-g-crop" title="ioctl VIDIOC_G_CROP, VIDIOC_S_CROP"><code class="constant">VIDIOC_G_CROP</code></a>, &amp;crop)) {
	if (errno != EINVAL) {
		perror ("VIDIOC_G_CROP");
		exit (EXIT_FAILURE);
	}

	/* Cropping not supported. */
	crop.c = cropcap.defrect;
}

memset (&amp;format, 0, sizeof (format));
format.fmt.type = V4L2_BUF_TYPE_VIDEO_CAPTURE;

if (-1 == ioctl (fd, <a class="link" href="#vidioc-g-fmt" title="ioctl VIDIOC_G_FMT, VIDIOC_S_FMT, VIDIOC_TRY_FMT"><code class="constant">VIDIOC_G_FMT</code></a>, &amp;format)) {
	perror ("VIDIOC_G_FMT");
	exit (EXIT_FAILURE);
}

/* The scaling applied by the driver. */

hscale = format.fmt.pix.width / (double) crop.c.width;
vscale = format.fmt.pix.height / (double) crop.c.height;

aspect = cropcap.pixelaspect.numerator /
	 (double) cropcap.pixelaspect.denominator;
aspect = aspect * hscale / vscale;

/* Devices following ITU-R BT.601 do not capture
   square pixels. For playback on a computer monitor
   we should scale the images to this size. */

dwidth = format.fmt.pix.width / aspect;
dheight = format.fmt.pix.height;
	</pre></div></div><br class="example-break"></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="streaming-par"></a>1.12.&nbsp;Streaming Parameters</h2></div></div></div><p>Streaming parameters are intended to optimize the video
capture process as well as I/O. Presently applications can request a
high quality capture mode with the <a class="link" href="#vidioc-g-parm" title="ioctl VIDIOC_G_PARM, VIDIOC_S_PARM"><code class="constant">VIDIOC_S_PARM</code></a> ioctl.</p><p>The current video standard determines a nominal number of
frames per second. If less than this number of frames is to be
captured or output, applications can request frame skipping or
duplicating on the driver side. This is especially useful when using
the <a class="link" href="#func-read" title="V4L2 read()"><code class="function">read()</code></a> or <a class="link" href="#func-write" title="V4L2 write()"><code class="function">write()</code></a>, which are not augmented by timestamps
or sequence counters, and to avoid unneccessary data copying.</p><p>Finally these ioctls can be used to determine the number of
buffers used internally by a driver in read/write mode. For
implications see the section discussing the <a class="link" href="#func-read" title="V4L2 read()"><code class="function">read()</code></a>
function.</p><p>To get and set the streaming parameters applications call
the <a class="link" href="#vidioc-g-parm" title="ioctl VIDIOC_G_PARM, VIDIOC_S_PARM"><code class="constant">VIDIOC_G_PARM</code></a> and <a class="link" href="#vidioc-g-parm" title="ioctl VIDIOC_G_PARM, VIDIOC_S_PARM"><code class="constant">VIDIOC_S_PARM</code></a> ioctl, respectively. They take
a pointer to a struct&nbsp;<a class="link" href="#v4l2-streamparm" title="Table&nbsp;90.&nbsp;struct v4l2_streamparm">v4l2_streamparm</a>, which contains a union holding
separate parameters for input and output devices.</p><p>These ioctls are optional, drivers need not implement
them. If so, they return the <span class="errorcode">EINVAL</span> error code.</p></div><div class="footnotes"><br><hr width="100" align="left"><div class="footnote"><p><sup>[<a name="ftn.id2758276" href="#id2758276" class="para">1</a>] </sup>Access permissions are associated with character
device special files, hence we must ensure device numbers cannot
change with the module load order. To this end minor numbers are no
longer automatically assigned by the "videodev" module as in V4L but
requested by the driver. The defaults will suffice for most people
unless two drivers compete for the same minor numbers.</p></div><div class="footnote"><p><sup>[<a name="ftn.id2758298" href="#id2758298" class="para">2</a>] </sup>In earlier versions of the V4L2 API the module options
where named after the device special file with a "unit_" prefix, expressing
the minor number itself, not an offset. Rationale for this change is unknown.
Lastly the naming and semantics are just a convention among driver writers,
the point to note is that minor numbers are not supposed to be hardcoded
into drivers.</p></div><div class="footnote"><p><sup>[<a name="ftn.id2758454" href="#id2758454" class="para">3</a>] </sup>Given a device file name one cannot reliable find
related devices. For once names are arbitrary and in a system with
multiple devices, where only some support VBI capturing, a
<code class="filename">/dev/video2</code> is not necessarily related to
<code class="filename">/dev/vbi2</code>. The V4L
<code class="constant">VIDIOCGUNIT</code> ioctl would require a search for a
device file with a particular major and minor number.</p></div><div class="footnote"><p><sup>[<a name="ftn.id2758670" href="#id2758670" class="para">4</a>] </sup>Drivers could recognize the
<code class="constant">O_EXCL</code> open flag. Presently this is not required,
so applications cannot know if it really works.</p></div><div class="footnote"><p><sup>[<a name="ftn.id2759087" href="#id2759087" class="para">5</a>] </sup>Actually struct&nbsp;<a class="link" href="#v4l2-audio" title="Table&nbsp;69.&nbsp;struct v4l2_audio">v4l2_audio</a> ought to have a
<em class="structfield"><code>tuner</code></em> field like struct&nbsp;<a class="link" href="#v4l2-input" title="Table&nbsp;60.&nbsp;struct v4l2_input">v4l2_input</a>, not only
making the API more consistent but also permitting radio devices with
multiple tuners.</p></div><div class="footnote"><p><sup>[<a name="ftn.id2759675" href="#id2759675" class="para">6</a>] </sup>Some users are already confused by technical terms PAL,
NTSC and SECAM. There is no point asking them to distinguish between
B, G, D, or K when the software or hardware can do that
automatically.</p></div><div class="footnote"><p><sup>[<a name="ftn.id2759727" href="#id2759727" class="para">7</a>] </sup>An alternative to the current scheme is to use pointers
to indices as arguments of <code class="constant">VIDIOC_G_STD</code> and
<code class="constant">VIDIOC_S_STD</code>, the struct&nbsp;<a class="link" href="#v4l2-input" title="Table&nbsp;60.&nbsp;struct v4l2_input">v4l2_input</a> and
struct&nbsp;<a class="link" href="#v4l2-output" title="Table&nbsp;63.&nbsp;struct v4l2_output">v4l2_output</a> <em class="structfield"><code>std</code></em> field would be a set of
indices like <em class="structfield"><code>audioset</code></em>.</p><p>Indices are consistent with the rest of the API
and identify the standard unambiguously. In the present scheme of
things an enumerated standard is looked up by <a class="link" href="#v4l2-std-id" title="Table&nbsp;67.&nbsp;typedef v4l2_std_id">v4l2_std_id</a>. Now the
standards supported by the inputs of a device can overlap. Just
assume the tuner and composite input in the example above both
exist on a device. An enumeration of "PAL-B/G", "PAL-H/I" suggests
a choice which does not exist. We cannot merge or omit sets, because
applications would be unable to find the standards reported by
<code class="constant">VIDIOC_G_STD</code>. That leaves separate enumerations
for each input. Also selecting a standard by <a class="link" href="#v4l2-std-id" title="Table&nbsp;67.&nbsp;typedef v4l2_std_id">v4l2_std_id</a> can be
ambiguous. Advantage of this method is that applications need not
identify the standard indirectly, after enumerating.</p><p>So in
summary, the lookup itself is unavoidable. The difference is only
whether the lookup is necessary to find an enumerated standard or to
switch to a standard by <a class="link" href="#v4l2-std-id" title="Table&nbsp;67.&nbsp;typedef v4l2_std_id">v4l2_std_id</a>.</p></div><div class="footnote"><p><sup>[<a name="ftn.id2759883" href="#id2759883" class="para">8</a>] </sup>See <a class="xref" href="#buffer" title="3.5.&nbsp;Buffers">Section&nbsp;3.5, “Buffers”</a> for a rationale. Probably
even USB cameras follow some well known video standard. It might have
been better to explicitly indicate elsewhere if a device cannot live
up to normal expectations, instead of this exception.</p></div><div class="footnote"><p><sup>[<a name="ftn.id2760770" href="#id2760770" class="para">9</a>] </sup>It will be more convenient for applications if drivers
make use of the <code class="constant">V4L2_CTRL_FLAG_DISABLED</code> flag, but
that was never required.</p></div><div class="footnote"><p><sup>[<a name="ftn.id2759822" href="#id2759822" class="para">10</a>] </sup>Applications could call an ioctl to request events.
After another process called <a class="link" href="#vidioc-g-ctrl" title="ioctl VIDIOC_G_CTRL, VIDIOC_S_CTRL"><code class="constant">VIDIOC_S_CTRL</code></a> or another ioctl changing
shared properties the <a class="link" href="#func-select" title="V4L2 select()"><code class="function">select()</code></a> function would indicate
readability until any ioctl (querying the properties) is
called.</p></div><div class="footnote"><p><sup>[<a name="ftn.id2772475" href="#id2772475" class="para">11</a>] </sup>Enumerating formats an application has no a-priori
knowledge of (otherwise it could explicitely ask for them and need not
enumerate) seems useless, but there are applications serving as proxy
between drivers and the actual video applications for which this is
useful.</p></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="pixfmt"></a>Chapter&nbsp;2.&nbsp;Image Formats</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#id2783248">2.1. Standard Image Formats</a></span></dt><dt><span class="section"><a href="#colorspaces">2.2. Colorspaces</a></span></dt><dt><span class="section"><a href="#pixfmt-indexed">2.3. Indexed Format</a></span></dt><dt><span class="section"><a href="#pixfmt-rgb">2.4. RGB Formats</a></span></dt><dt><span class="section"><a href="#yuv-formats">2.5. YUV Formats</a></span></dt><dt><span class="section"><a href="#id2809728">2.6. Compressed Formats</a></span></dt><dt><span class="section"><a href="#pixfmt-reserved">2.7. Reserved Format Identifiers</a></span></dt></dl></div><p>The V4L2 API was primarily designed for devices exchanging
image data with applications. The
<span class="structname">v4l2_pix_format</span> structure defines the format
and layout of an image in memory. Image formats are negotiated with
the <a class="link" href="#vidioc-g-fmt" title="ioctl VIDIOC_G_FMT, VIDIOC_S_FMT, VIDIOC_TRY_FMT"><code class="constant">VIDIOC_S_FMT</code></a> ioctl. (The explanations here focus on video
capturing and output, for overlay frame buffer formats see also
<a class="link" href="#vidioc-g-fbuf" title="ioctl VIDIOC_G_FBUF, VIDIOC_S_FBUF"><code class="constant">VIDIOC_G_FBUF</code></a>.)</p><div class="table"><a name="v4l2-pix-format"></a><p class="title"><b>Table&nbsp;2.1.&nbsp;struct <span class="structname">v4l2_pix_format</span></b></p><div class="table-contents"><table summary="struct v4l2_pix_format" width="100%" border="0"><colgroup><col><col><col></colgroup><tbody valign="top"><tr><td valign="top">__u32</td><td valign="top"><em class="structfield"><code>width</code></em></td><td valign="top">Image width in pixels.</td></tr><tr><td valign="top">__u32</td><td valign="top"><em class="structfield"><code>height</code></em></td><td valign="top">Image height in pixels.</td></tr><tr><td colspan="3" valign="top">Applications set these fields to
request an image size, drivers return the closest possible values. In
case of planar formats the <em class="structfield"><code>width</code></em> and
<em class="structfield"><code>height</code></em> applies to the largest plane. To
avoid ambiguities drivers must return values rounded up to a multiple
of the scale factor of any smaller planes. For example when the image
format is YUV 4:2:0, <em class="structfield"><code>width</code></em> and
<em class="structfield"><code>height</code></em> must be multiples of two.</td></tr><tr><td valign="top">__u32</td><td valign="top"><em class="structfield"><code>pixelformat</code></em></td><td valign="top">The pixel format or type of compression, set by the
application. This is a little endian <a class="link" href="#v4l2-fourcc">four character code</a>. V4L2 defines
standard RGB formats in <a class="xref" href="#rgb-formats" title="Table&nbsp;2.4.&nbsp;Packed RGB Image Formats">Table&nbsp;2.4, “Packed RGB Image Formats”</a>, YUV formats in <a class="xref" href="#yuv-formats" title="2.5.&nbsp;YUV Formats">Section&nbsp;2.5, “YUV Formats”</a>, and reserved codes in <a class="xref" href="#reserved-formats" title="Table&nbsp;2.8.&nbsp;Reserved Image Formats">Table&nbsp;2.8, “Reserved Image Formats”</a></td></tr><tr><td valign="top">enum&nbsp;<a class="link" href="#v4l2-field" title="Table&nbsp;3.8.&nbsp;enum v4l2_field">v4l2_field</a></td><td valign="top"><em class="structfield"><code>field</code></em></td><td valign="top">Video images are typically interlaced. Applications
can request to capture or output only the top or bottom field, or both
fields interlaced or sequentially stored in one buffer or alternating
in separate buffers. Drivers return the actual field order selected.
For details see <a class="xref" href="#field-order" title="3.6.&nbsp;Field Order">Section&nbsp;3.6, “Field Order”</a>.</td></tr><tr><td valign="top">__u32</td><td valign="top"><em class="structfield"><code>bytesperline</code></em></td><td valign="top">Distance in bytes between the leftmost pixels in two
adjacent lines.</td></tr><tr><td colspan="3" valign="top"><p>Both applications and drivers
can set this field to request padding bytes at the end of each line.
Drivers however may ignore the value requested by the application,
returning <em class="structfield"><code>width</code></em> times bytes per pixel or a
larger value required by the hardware. That implies applications can
just set this field to zero to get a reasonable
default.</p><p>Video hardware may access padding bytes,
therefore they must reside in accessible memory. Consider cases where
padding bytes after the last line of an image cross a system page
boundary. Input devices may write padding bytes, the value is
undefined. Output devices ignore the contents of padding
bytes.</p><p>When the image format is planar the
<em class="structfield"><code>bytesperline</code></em> value applies to the largest
plane and is divided by the same factor as the
<em class="structfield"><code>width</code></em> field for any smaller planes. For
example the Cb and Cr planes of a YUV 4:2:0 image have half as many
padding bytes following each line as the Y plane. To avoid ambiguities
drivers must return a <em class="structfield"><code>bytesperline</code></em> value
rounded up to a multiple of the scale factor.</p></td></tr><tr><td valign="top">__u32</td><td valign="top"><em class="structfield"><code>sizeimage</code></em></td><td valign="top">Size in bytes of the buffer to hold a complete image,
set by the driver. Usually this is
<em class="structfield"><code>bytesperline</code></em> times
<em class="structfield"><code>height</code></em>. When the image consists of variable
length compressed data this is the maximum number of bytes required to
hold an image.</td></tr><tr><td valign="top">enum&nbsp;<a class="link" href="#v4l2-colorspace" title="Table&nbsp;2.2.&nbsp;enum v4l2_colorspace">v4l2_colorspace</a></td><td valign="top"><em class="structfield"><code>colorspace</code></em></td><td valign="top">This information supplements the
<em class="structfield"><code>pixelformat</code></em> and must be set by the driver,
see <a class="xref" href="#colorspaces" title="2.2.&nbsp;Colorspaces">Section&nbsp;2.2, “Colorspaces”</a>.</td></tr><tr><td valign="top">__u32</td><td valign="top"><em class="structfield"><code>priv</code></em></td><td valign="top">Reserved for custom (driver defined) additional
information about formats. When not used drivers and applications must
set this field to zero.</td></tr></tbody></table></div></div><br class="table-break"><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id2783248"></a>2.1.&nbsp;Standard Image Formats</h2></div></div></div><p>In order to exchange images between drivers and
applications, it is necessary to have standard image data formats
which both sides will interpret the same way. V4L2 includes several
such formats, and this section is intended to be an unambiguous
specification of the standard image data formats in V4L2.</p><p>V4L2 drivers are not limited to these formats, however.
Driver-specific formats are possible. In that case the application may
depend on a codec to convert images to one of the standard formats
when needed. But the data can still be stored and retrieved in the
proprietary format. For example, a device may support a proprietary
compressed format. Applications can still capture and save the data in
the compressed format, saving much disk space, and later use a codec
to convert the images to the X Windows screen format when the video is
to be displayed.</p><p>Even so, ultimately, some standard formats are needed, so
the V4L2 specification would not be complete without well-defined
standard formats.</p><p>The V4L2 standard formats are mainly uncompressed formats. The
pixels are always arranged in memory from left to right, and from top
to bottom. The first byte of data in the image buffer is always for
the leftmost pixel of the topmost row. Following that is the pixel
immediately to its right, and so on until the end of the top row of
pixels. Following the rightmost pixel of the row there may be zero or
more bytes of padding to guarantee that each row of pixel data has a
certain alignment. Following the pad bytes, if any, is data for the
leftmost pixel of the second row from the top, and so on. The last row
has just as many pad bytes after it as the other rows.</p><p>In V4L2 each format has an identifier which looks like
<code class="constant">PIX_FMT_XXX</code>, defined in the <a class="link" href="#videodev" title="Appendix&nbsp;A.&nbsp;Video For Linux Two Header File">videodev.h</a> header file. These identifiers
represent <a class="link" href="#v4l2-fourcc">four character codes</a>
which are also listed below, however they are not the same as those
used in the Windows world.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="colorspaces"></a>2.2.&nbsp;Colorspaces</h2></div></div></div><p>[intro]</p><p>
      </p><div class="variablelist"><dl><dt><span class="term">Gamma Correction</span></dt><dd><p>[to do]</p><p>E'<sub>R</sub> = f(R)</p><p>E'<sub>G</sub> = f(G)</p><p>E'<sub>B</sub> = f(B)</p></dd><dt><span class="term">Construction of luminance and color-difference
signals</span></dt><dd><p>[to do]</p><p>E'<sub>Y</sub> =
Coeff<sub>R</sub> E'<sub>R</sub>
+ Coeff<sub>G</sub> E'<sub>G</sub>
+ Coeff<sub>B</sub> E'<sub>B</sub></p><p>(E'<sub>R</sub> - E'<sub>Y</sub>) = E'<sub>R</sub>
- Coeff<sub>R</sub> E'<sub>R</sub>
- Coeff<sub>G</sub> E'<sub>G</sub>
- Coeff<sub>B</sub> E'<sub>B</sub></p><p>(E'<sub>B</sub> - E'<sub>Y</sub>) = E'<sub>B</sub>
- Coeff<sub>R</sub> E'<sub>R</sub>
- Coeff<sub>G</sub> E'<sub>G</sub>
- Coeff<sub>B</sub> E'<sub>B</sub></p></dd><dt><span class="term">Re-normalized color-difference signals</span></dt><dd><p>The color-difference signals are scaled back to unity
range [-0.5;+0.5]:</p><p>K<sub>B</sub> = 0.5 / (1 - Coeff<sub>B</sub>)</p><p>K<sub>R</sub> = 0.5 / (1 - Coeff<sub>R</sub>)</p><p>P<sub>B</sub> =
K<sub>B</sub> (E'<sub>B</sub> - E'<sub>Y</sub>) =
  0.5 (Coeff<sub>R</sub> / Coeff<sub>B</sub>) E'<sub>R</sub>
+ 0.5 (Coeff<sub>G</sub> / Coeff<sub>B</sub>) E'<sub>G</sub>
+ 0.5 E'<sub>B</sub></p><p>P<sub>R</sub> =
K<sub>R</sub> (E'<sub>R</sub> - E'<sub>Y</sub>) =
  0.5 E'<sub>R</sub>
+ 0.5 (Coeff<sub>G</sub> / Coeff<sub>R</sub>) E'<sub>G</sub>
+ 0.5 (Coeff<sub>B</sub> / Coeff<sub>R</sub>) E'<sub>B</sub></p></dd><dt><span class="term">Quantization</span></dt><dd><p>[to do]</p><p>Y' = (Lum. Levels - 1) · E'<sub>Y</sub> + Lum. Offset</p><p>C<sub>B</sub> = (Chrom. Levels - 1)
· P<sub>B</sub> + Chrom. Offset</p><p>C<sub>R</sub> = (Chrom. Levels - 1)
· P<sub>R</sub> + Chrom. Offset</p><p>Rounding to the nearest integer and clamping to the range
[0;255] finally yields the digital color components Y'CbCr
stored in YUV images.</p></dd></dl></div><p>
    </p><div class="example"><a name="id2783644"></a><p class="title"><b>Example&nbsp;2.1.&nbsp;ITU-R Rec. BT.601 color conversion</b></p><div class="example-contents"><p>Forward Transformation</p><pre class="programlisting">int ER, EG, EB;         /* gamma corrected RGB input [0;255] */
int Y1, Cb, Cr;         /* output [0;255] */

double r, g, b;         /* temporaries */
double y1, pb, pr;

int
clamp (double x)
{
	int r = x;      /* round to nearest */

	if (r &lt; 0)         return 0;
	else if (r &gt; 255)  return 255;
	else               return r;
}

r = ER / 255.0;
g = EG / 255.0;
b = EB / 255.0;

y1  =  0.299  * r + 0.587 * g + 0.114  * b;
pb  = -0.169  * r - 0.331 * g + 0.5    * b;
pr  =  0.5    * r - 0.419 * g - 0.081  * b;

Y1 = clamp (219 * y1 + 16);
Cb = clamp (224 * pb + 128);
Cr = clamp (224 * pr + 128);

/* or shorter */

y1 = 0.299 * ER + 0.587 * EG + 0.114 * EB;

Y1 = clamp ( (219 / 255.0)                    *       y1  + 16);
Cb = clamp (((224 / 255.0) / (2 - 2 * 0.114)) * (EB - y1) + 128);
Cr = clamp (((224 / 255.0) / (2 - 2 * 0.299)) * (ER - y1) + 128);
      </pre><p>Inverse Transformation</p><pre class="programlisting">int Y1, Cb, Cr;         /* gamma pre-corrected input [0;255] */
int ER, EG, EB;         /* output [0;255] */

double r, g, b;         /* temporaries */
double y1, pb, pr;

int
clamp (double x)
{
	int r = x;      /* round to nearest */

	if (r &lt; 0)         return 0;
	else if (r &gt; 255)  return 255;
	else               return r;
}

y1 = (255 / 219.0) * (Y1 - 16);
pb = (255 / 224.0) * (Cb - 128);
pr = (255 / 224.0) * (Cr - 128);

r = 1.0 * y1 + 0     * pb + 1.402 * pr;
g = 1.0 * y1 - 0.344 * pb - 0.714 * pr;
b = 1.0 * y1 + 1.772 * pb + 0     * pr;

ER = clamp (r * 255); /* [ok? one should prob. limit y1,pb,pr] */
EG = clamp (g * 255);
EB = clamp (b * 255);
      </pre></div></div><br class="example-break"><div class="table"><a name="v4l2-colorspace"></a><p class="title"><b>Table&nbsp;2.2.&nbsp;enum v4l2_colorspace</b></p><div class="table-contents"><table summary="enum v4l2_colorspace" width="100%" border="1"><colgroup><col align="left"><col align="center"><col align="left"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"></colgroup><thead><tr><th rowspan="2" align="left">Identifier</th><th rowspan="2" align="center">Value</th><th rowspan="2" align="left">Description</th><th colspan="3" align="center">Chromaticities<sup>[<a name="id2783857" href="#ftn.id2783857" class="footnote">a</a>]</sup></th><th rowspan="2" align="center">White Point</th><th rowspan="2" align="center">Gamma Correction</th><th rowspan="2" align="center">Luminance E'<sub>Y</sub></th><th colspan="2" align="center">Quantization</th></tr><tr><th align="center">Red</th><th align="center">Green</th><th align="center">Blue</th><th align="center">Y'</th><th align="center">Cb, Cr</th></tr></thead><tbody valign="top"><tr><td valign="top" align="left"><code class="constant">V4L2_COLORSPACE_SMPTE170M</code></td><td valign="top" align="center">1</td><td valign="top" align="left">NTSC/PAL according to <a class="xref" href="#smpte170m" title="SMPTE 170M-1999 &quot;Television - Composite Analog Video Signal - NTSC for Studio Applications&quot;">[<abbr class="abbrev">SMPTE&nbsp;170M</abbr>]</a>,
<a class="xref" href="#itu601" title="ITU-R Recommendation BT.601-5 &quot;Studio Encoding Parameters of Digital Television for Standard 4:3 and Wide-Screen 16:9 Aspect Ratios&quot;">[<abbr class="abbrev">ITU&nbsp;BT.601</abbr>]</a></td><td valign="top" align="center">x&nbsp;=&nbsp;0.630, y&nbsp;=&nbsp;0.340</td><td valign="top" align="center">x&nbsp;=&nbsp;0.310, y&nbsp;=&nbsp;0.595</td><td valign="top" align="center">x&nbsp;=&nbsp;0.155, y&nbsp;=&nbsp;0.070</td><td valign="top" align="center">x&nbsp;=&nbsp;0.3127, y&nbsp;=&nbsp;0.3290,
	    Illuminant D<sub>65</sub></td><td valign="top" align="center">E' = 4.5&nbsp;I&nbsp;for&nbsp;I&nbsp;&#8804;0.018,
1.099&nbsp;I<sup>0.45</sup>&nbsp;-&nbsp;0.099&nbsp;for&nbsp;0.018&nbsp;&lt;&nbsp;I</td><td valign="top" align="center">0.299&nbsp;E'<sub>R</sub>
+&nbsp;0.587&nbsp;E'<sub>G</sub>
+&nbsp;0.114&nbsp;E'<sub>B</sub></td><td valign="top" align="center">219&nbsp;E'<sub>Y</sub>&nbsp;+&nbsp;16</td><td valign="top" align="center">224&nbsp;P<sub>B,R</sub>&nbsp;+&nbsp;128</td></tr><tr><td valign="top" align="left"><code class="constant">V4L2_COLORSPACE_SMPTE240M</code></td><td valign="top" align="center">2</td><td valign="top" align="left">1125-Line (US) HDTV, see <a class="xref" href="#smpte240m" title="SMPTE 240M-1999 &quot;Television - Signal Parameters - 1125-Line High-Definition Production&quot;">[<abbr class="abbrev">SMPTE&nbsp;240M</abbr>]</a></td><td valign="top" align="center">x&nbsp;=&nbsp;0.630, y&nbsp;=&nbsp;0.340</td><td valign="top" align="center">x&nbsp;=&nbsp;0.310, y&nbsp;=&nbsp;0.595</td><td valign="top" align="center">x&nbsp;=&nbsp;0.155, y&nbsp;=&nbsp;0.070</td><td valign="top" align="center">x&nbsp;=&nbsp;0.3127, y&nbsp;=&nbsp;0.3290,
	    Illuminant D<sub>65</sub></td><td valign="top" align="center">E' = 4&nbsp;I&nbsp;for&nbsp;I&nbsp;&#8804;0.0228,
1.1115&nbsp;I<sup>0.45</sup>&nbsp;-&nbsp;0.1115&nbsp;for&nbsp;0.0228&nbsp;&lt;&nbsp;I</td><td valign="top" align="center">0.212&nbsp;E'<sub>R</sub>
+&nbsp;0.701&nbsp;E'<sub>G</sub>
+&nbsp;0.087&nbsp;E'<sub>B</sub></td><td valign="top" align="center">219&nbsp;E'<sub>Y</sub>&nbsp;+&nbsp;16</td><td valign="top" align="center">224&nbsp;P<sub>B,R</sub>&nbsp;+&nbsp;128</td></tr><tr><td valign="top" align="left"><code class="constant">V4L2_COLORSPACE_REC709</code></td><td valign="top" align="center">3</td><td valign="top" align="left">HDTV and modern devices, see <a class="xref" href="#itu709" title="ITU-R Recommendation BT.709-5 &quot;Parameter values for the HDTV standards for production and international programme exchange&quot;">[<abbr class="abbrev">ITU&nbsp;BT.709</abbr>]</a></td><td valign="top" align="center">x&nbsp;=&nbsp;0.640, y&nbsp;=&nbsp;0.330</td><td valign="top" align="center">x&nbsp;=&nbsp;0.300, y&nbsp;=&nbsp;0.600</td><td valign="top" align="center">x&nbsp;=&nbsp;0.150, y&nbsp;=&nbsp;0.060</td><td valign="top" align="center">x&nbsp;=&nbsp;0.3127, y&nbsp;=&nbsp;0.3290,
	    Illuminant D<sub>65</sub></td><td valign="top" align="center">E' = 4.5&nbsp;I&nbsp;for&nbsp;I&nbsp;&#8804;0.018,
1.099&nbsp;I<sup>0.45</sup>&nbsp;-&nbsp;0.099&nbsp;for&nbsp;0.018&nbsp;&lt;&nbsp;I</td><td valign="top" align="center">0.2125&nbsp;E'<sub>R</sub>
+&nbsp;0.7154&nbsp;E'<sub>G</sub>
+&nbsp;0.0721&nbsp;E'<sub>B</sub></td><td valign="top" align="center">219&nbsp;E'<sub>Y</sub>&nbsp;+&nbsp;16</td><td valign="top" align="center">224&nbsp;P<sub>B,R</sub>&nbsp;+&nbsp;128</td></tr><tr><td valign="top" align="left"><code class="constant">V4L2_COLORSPACE_BT878</code></td><td valign="top" align="center">4</td><td valign="top" align="left">Broken Bt878 extents<sup>[<a name="id2784155" href="#ftn.id2784155" class="footnote">b</a>]</sup>, <a class="xref" href="#itu601" title="ITU-R Recommendation BT.601-5 &quot;Studio Encoding Parameters of Digital Television for Standard 4:3 and Wide-Screen 16:9 Aspect Ratios&quot;">[<abbr class="abbrev">ITU&nbsp;BT.601</abbr>]</a></td><td valign="top" align="center">?</td><td valign="top" align="center">?</td><td valign="top" align="center">?</td><td valign="top" align="center">?</td><td valign="top" align="center">?</td><td valign="top" align="center">0.299&nbsp;E'<sub>R</sub>
+&nbsp;0.587&nbsp;E'<sub>G</sub>
+&nbsp;0.114&nbsp;E'<sub>B</sub></td><td valign="top" align="center"><span class="emphasis"><em>237</em></span>&nbsp;E'<sub>Y</sub>&nbsp;+&nbsp;16</td><td valign="top" align="center">224&nbsp;P<sub>B,R</sub>&nbsp;+&nbsp;128 (probably)</td></tr><tr><td valign="top" align="left"><code class="constant">V4L2_COLORSPACE_470_SYSTEM_M</code></td><td valign="top" align="center">5</td><td valign="top" align="left">M/NTSC<sup>[<a name="id2784235" href="#ftn.id2784235" class="footnote">c</a>]</sup> according to <a class="xref" href="#itu470" title="ITU-R Recommendation BT.470-6 &quot;Conventional Television Systems&quot;">[<abbr class="abbrev">ITU&nbsp;BT.470</abbr>]</a>, <a class="xref" href="#itu601" title="ITU-R Recommendation BT.601-5 &quot;Studio Encoding Parameters of Digital Television for Standard 4:3 and Wide-Screen 16:9 Aspect Ratios&quot;">[<abbr class="abbrev">ITU&nbsp;BT.601</abbr>]</a></td><td valign="top" align="center">x&nbsp;=&nbsp;0.67, y&nbsp;=&nbsp;0.33</td><td valign="top" align="center">x&nbsp;=&nbsp;0.21, y&nbsp;=&nbsp;0.71</td><td valign="top" align="center">x&nbsp;=&nbsp;0.14, y&nbsp;=&nbsp;0.08</td><td valign="top" align="center">x&nbsp;=&nbsp;0.310, y&nbsp;=&nbsp;0.316, Illuminant C</td><td valign="top" align="center">?</td><td valign="top" align="center">0.299&nbsp;E'<sub>R</sub>
+&nbsp;0.587&nbsp;E'<sub>G</sub>
+&nbsp;0.114&nbsp;E'<sub>B</sub></td><td valign="top" align="center">219&nbsp;E'<sub>Y</sub>&nbsp;+&nbsp;16</td><td valign="top" align="center">224&nbsp;P<sub>B,R</sub>&nbsp;+&nbsp;128</td></tr><tr><td valign="top" align="left"><code class="constant">V4L2_COLORSPACE_470_SYSTEM_BG</code></td><td valign="top" align="center">6</td><td valign="top" align="left">625-line PAL and SECAM systems according to <a class="xref" href="#itu470" title="ITU-R Recommendation BT.470-6 &quot;Conventional Television Systems&quot;">[<abbr class="abbrev">ITU&nbsp;BT.470</abbr>]</a>, <a class="xref" href="#itu601" title="ITU-R Recommendation BT.601-5 &quot;Studio Encoding Parameters of Digital Television for Standard 4:3 and Wide-Screen 16:9 Aspect Ratios&quot;">[<abbr class="abbrev">ITU&nbsp;BT.601</abbr>]</a></td><td valign="top" align="center">x&nbsp;=&nbsp;0.64, y&nbsp;=&nbsp;0.33</td><td valign="top" align="center">x&nbsp;=&nbsp;0.29, y&nbsp;=&nbsp;0.60</td><td valign="top" align="center">x&nbsp;=&nbsp;0.15, y&nbsp;=&nbsp;0.06</td><td valign="top" align="center">x&nbsp;=&nbsp;0.313, y&nbsp;=&nbsp;0.329,
Illuminant D<sub>65</sub></td><td valign="top" align="center">?</td><td valign="top" align="center">0.299&nbsp;E'<sub>R</sub>
+&nbsp;0.587&nbsp;E'<sub>G</sub>
+&nbsp;0.114&nbsp;E'<sub>B</sub></td><td valign="top" align="center">219&nbsp;E'<sub>Y</sub>&nbsp;+&nbsp;16</td><td valign="top" align="center">224&nbsp;P<sub>B,R</sub>&nbsp;+&nbsp;128</td></tr><tr><td valign="top" align="left"><code class="constant">V4L2_COLORSPACE_JPEG</code></td><td valign="top" align="center">7</td><td valign="top" align="left">JPEG Y'CbCr, see <a class="xref" href="#jfif" title="JPEG File Interchange Format">[<abbr class="abbrev">JFIF</abbr>]</a>, <a class="xref" href="#itu601" title="ITU-R Recommendation BT.601-5 &quot;Studio Encoding Parameters of Digital Television for Standard 4:3 and Wide-Screen 16:9 Aspect Ratios&quot;">[<abbr class="abbrev">ITU&nbsp;BT.601</abbr>]</a></td><td valign="top" align="center">?</td><td valign="top" align="center">?</td><td valign="top" align="center">?</td><td valign="top" align="center">?</td><td valign="top" align="center">?</td><td valign="top" align="center">0.299&nbsp;E'<sub>R</sub>
+&nbsp;0.587&nbsp;E'<sub>G</sub>
+&nbsp;0.114&nbsp;E'<sub>B</sub></td><td valign="top" align="center">256&nbsp;E'<sub>Y</sub>&nbsp;+&nbsp;16<sup>[<a name="id2784431" href="#ftn.id2784431" class="footnote">d</a>]</sup></td><td valign="top" align="center">256&nbsp;P<sub>B,R</sub>&nbsp;+&nbsp;128</td></tr><tr><td valign="top" align="left"><code class="constant">V4L2_COLORSPACE_SRGB</code></td><td valign="top" align="center">8</td><td valign="top" align="left">[?]</td><td valign="top" align="center">x&nbsp;=&nbsp;0.640, y&nbsp;=&nbsp;0.330</td><td valign="top" align="center">x&nbsp;=&nbsp;0.300, y&nbsp;=&nbsp;0.600</td><td valign="top" align="center">x&nbsp;=&nbsp;0.150, y&nbsp;=&nbsp;0.060</td><td valign="top" align="center">x&nbsp;=&nbsp;0.3127, y&nbsp;=&nbsp;0.3290,
	    Illuminant D<sub>65</sub></td><td valign="top" align="center">E' = 4.5&nbsp;I&nbsp;for&nbsp;I&nbsp;&#8804;0.018,
1.099&nbsp;I<sup>0.45</sup>&nbsp;-&nbsp;0.099&nbsp;for&nbsp;0.018&nbsp;&lt;&nbsp;I</td><td colspan="3" valign="top" align="center">n/a</td></tr></tbody><tbody class="footnotes"><tr><td colspan="11"><div class="footnote"><p><sup>[<a name="ftn.id2783857" href="#id2783857" class="para">a</a>] </sup>The coordinates of the color primaries are
given in the CIE system (1931)</p></div><div class="footnote"><p><sup>[<a name="ftn.id2784155" href="#id2784155" class="para">b</a>] </sup>The ubiquitous Bt878 video capture chip
quantizes E'<sub>Y</sub> to 238 levels, yielding a range
of Y' = 16 … 253, unlike Rec. 601 Y' = 16 …
235. This is not a typo in the Bt878 documentation, it has been
implemented in silicon. The chroma extents are unclear.</p></div><div class="footnote"><p><sup>[<a name="ftn.id2784235" href="#id2784235" class="para">c</a>] </sup>No identifier exists for M/PAL which uses
the chromaticities of M/NTSC, the remaining parameters are equal to B and
G/PAL.</p></div><div class="footnote"><p><sup>[<a name="ftn.id2784431" href="#id2784431" class="para">d</a>] </sup>Note JFIF quantizes
Y'P<sub>B</sub>P<sub>R</sub> in range [0;+1] and
[-0.5;+0.5] to <span class="emphasis"><em>257</em></span> levels, however Y'CbCr signals
are still clamped to [0;255].</p></div></td></tr></tbody></table></div></div><br class="table-break"></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="pixfmt-indexed"></a>2.3.&nbsp;Indexed Format</h2></div></div></div><p>In this format each pixel is represented by an 8 bit index
into a 256 entry ARGB palette. It is intended for <a class="link" href="#osd" title="4.4.&nbsp;Video Output Overlay Interface">Video Output Overlays</a> only. There are no ioctls to
access the palette, this must be done with ioctls of the Linux framebuffer API.</p><div class="table"><a name="id2784532"></a><p class="title"><b>Table&nbsp;2.3.&nbsp;Indexed Image Format</b></p><div class="table-contents"><table summary="Indexed Image Format" border="0"><colgroup><col align="left"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col><col><col><col><col><col><col><col><col><col><col><col><col><col><col><col><col><col><col><col><col><col><col><col><col><col></colgroup><thead><tr><th align="left">Identifier</th><th align="center">Code</th><th align="center">&nbsp;</th><th colspan="8" align="center">Byte&nbsp;0</th><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><th align="left">&nbsp;</th><th align="center">&nbsp;</th><th align="center">Bit</th><th align="center">7</th><th align="center">6</th><th align="center">5</th><th align="center">4</th><th align="center">3</th><th align="center">2</th><th align="center">1</th><th align="center">0</th><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr></thead><tbody valign="top"><tr><td valign="top" align="left"><a name="V4L2-PIX-FMT-PAL8"></a><code class="constant">V4L2_PIX_FMT_PAL8</code></td><td valign="top" align="center">'PAL8'</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">i<sub>7</sub></td><td valign="top" align="center">i<sub>6</sub></td><td valign="top" align="center">i<sub>5</sub></td><td valign="top" align="center">i<sub>4</sub></td><td valign="top" align="center">i<sub>3</sub></td><td valign="top" align="center">i<sub>2</sub></td><td valign="top" align="center">i<sub>1</sub></td><td valign="top" align="center">i<sub>0</sub></td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr></tbody></table></div></div><br class="table-break"></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="pixfmt-rgb"></a>2.4.&nbsp;RGB Formats</h2></div></div></div><div class="refentry" lang="en"><a name="packed-rgb"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>Packed RGB formats — Packed RGB formats</p></div><div class="refsect1" lang="en"><a name="id2784832"></a><h2>Description</h2><p>These formats are designed to match the pixel formats of
typical PC graphics frame buffers. They occupy 8, 16, 24 or 32 bits
per pixel. These are all packed-pixel formats, meaning all the data
for a pixel lie next to each other in memory.</p><p>When one of these formats is used, drivers shall report the
colorspace <code class="constant">V4L2_COLORSPACE_SRGB</code>.</p><div class="table"><a name="rgb-formats"></a><p class="title"><b>Table&nbsp;2.4.&nbsp;Packed RGB Image Formats</b></p><div class="table-contents"><table summary="Packed RGB Image Formats" width="100%" border="0"><colgroup><col align="left"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"></colgroup><thead><tr><th align="left">Identifier</th><th align="center">Code</th><th align="center">&nbsp;</th><th colspan="8" align="center">Byte&nbsp;0 in memory</th><td class="auto-generated">&nbsp;</td><th colspan="8" align="center">Byte&nbsp;1</th><td class="auto-generated">&nbsp;</td><th colspan="8" align="center">Byte&nbsp;2</th><td class="auto-generated">&nbsp;</td><th colspan="8" align="center">Byte&nbsp;3</th></tr><tr><th align="left">&nbsp;</th><th align="center">&nbsp;</th><th align="center">Bit</th><th align="center">7</th><th align="center">6</th><th align="center">5</th><th align="center">4</th><th align="center">3</th><th align="center">2</th><th align="center">1</th><th align="center">0</th><th align="center">&nbsp;</th><th align="center">7</th><th align="center">6</th><th align="center">5</th><th align="center">4</th><th align="center">3</th><th align="center">2</th><th align="center">1</th><th align="center">0</th><th align="center">&nbsp;</th><th align="center">7</th><th align="center">6</th><th align="center">5</th><th align="center">4</th><th align="center">3</th><th align="center">2</th><th align="center">1</th><th align="center">0</th><th align="center">&nbsp;</th><th align="center">7</th><th align="center">6</th><th align="center">5</th><th align="center">4</th><th align="center">3</th><th align="center">2</th><th align="center">1</th><th align="center">0</th></tr></thead><tbody valign="top"><tr><td valign="top" align="left"><a name="V4L2-PIX-FMT-RGB332"></a><code class="constant">V4L2_PIX_FMT_RGB332</code></td><td valign="top" align="center">'RGB1'</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">b<sub>1</sub></td><td valign="top" align="center">b<sub>0</sub></td><td valign="top" align="center">g<sub>2</sub></td><td valign="top" align="center">g<sub>1</sub></td><td valign="top" align="center">g<sub>0</sub></td><td valign="top" align="center">r<sub>2</sub></td><td valign="top" align="center">r<sub>1</sub></td><td valign="top" align="center">r<sub>0</sub></td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td valign="top" align="left"><a name="V4L2-PIX-FMT-RGB444"></a><code class="constant">V4L2_PIX_FMT_RGB444</code></td><td valign="top" align="center">'R444'</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">g<sub>3</sub></td><td valign="top" align="center">g<sub>2</sub></td><td valign="top" align="center">g<sub>1</sub></td><td valign="top" align="center">g<sub>0</sub></td><td valign="top" align="center">b<sub>3</sub></td><td valign="top" align="center">b<sub>2</sub></td><td valign="top" align="center">b<sub>1</sub></td><td valign="top" align="center">b<sub>0</sub></td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">a<sub>3</sub></td><td valign="top" align="center">a<sub>2</sub></td><td valign="top" align="center">a<sub>1</sub></td><td valign="top" align="center">a<sub>0</sub></td><td valign="top" align="center">r<sub>3</sub></td><td valign="top" align="center">r<sub>2</sub></td><td valign="top" align="center">r<sub>1</sub></td><td valign="top" align="center">r<sub>0</sub></td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td valign="top" align="left"><a name="V4L2-PIX-FMT-RGB555"></a><code class="constant">V4L2_PIX_FMT_RGB555</code></td><td valign="top" align="center">'RGBO'</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">g<sub>2</sub></td><td valign="top" align="center">g<sub>1</sub></td><td valign="top" align="center">g<sub>0</sub></td><td valign="top" align="center">r<sub>4</sub></td><td valign="top" align="center">r<sub>3</sub></td><td valign="top" align="center">r<sub>2</sub></td><td valign="top" align="center">r<sub>1</sub></td><td valign="top" align="center">r<sub>0</sub></td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">a</td><td valign="top" align="center">b<sub>4</sub></td><td valign="top" align="center">b<sub>3</sub></td><td valign="top" align="center">b<sub>2</sub></td><td valign="top" align="center">b<sub>1</sub></td><td valign="top" align="center">b<sub>0</sub></td><td valign="top" align="center">g<sub>4</sub></td><td valign="top" align="center">g<sub>3</sub></td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td valign="top" align="left"><a name="V4L2-PIX-FMT-RGB565"></a><code class="constant">V4L2_PIX_FMT_RGB565</code></td><td valign="top" align="center">'RGBP'</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">g<sub>2</sub></td><td valign="top" align="center">g<sub>1</sub></td><td valign="top" align="center">g<sub>0</sub></td><td valign="top" align="center">r<sub>4</sub></td><td valign="top" align="center">r<sub>3</sub></td><td valign="top" align="center">r<sub>2</sub></td><td valign="top" align="center">r<sub>1</sub></td><td valign="top" align="center">r<sub>0</sub></td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">b<sub>4</sub></td><td valign="top" align="center">b<sub>3</sub></td><td valign="top" align="center">b<sub>2</sub></td><td valign="top" align="center">b<sub>1</sub></td><td valign="top" align="center">b<sub>0</sub></td><td valign="top" align="center">g<sub>5</sub></td><td valign="top" align="center">g<sub>4</sub></td><td valign="top" align="center">g<sub>3</sub></td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td valign="top" align="left"><a name="V4L2-PIX-FMT-RGB555X"></a><code class="constant">V4L2_PIX_FMT_RGB555X</code></td><td valign="top" align="center">'RGBQ'</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">a</td><td valign="top" align="center">b<sub>4</sub></td><td valign="top" align="center">b<sub>3</sub></td><td valign="top" align="center">b<sub>2</sub></td><td valign="top" align="center">b<sub>1</sub></td><td valign="top" align="center">b<sub>0</sub></td><td valign="top" align="center">g<sub>4</sub></td><td valign="top" align="center">g<sub>3</sub></td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">g<sub>2</sub></td><td valign="top" align="center">g<sub>1</sub></td><td valign="top" align="center">g<sub>0</sub></td><td valign="top" align="center">r<sub>4</sub></td><td valign="top" align="center">r<sub>3</sub></td><td valign="top" align="center">r<sub>2</sub></td><td valign="top" align="center">r<sub>1</sub></td><td valign="top" align="center">r<sub>0</sub></td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td valign="top" align="left"><a name="V4L2-PIX-FMT-RGB565X"></a><code class="constant">V4L2_PIX_FMT_RGB565X</code></td><td valign="top" align="center">'RGBR'</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">b<sub>4</sub></td><td valign="top" align="center">b<sub>3</sub></td><td valign="top" align="center">b<sub>2</sub></td><td valign="top" align="center">b<sub>1</sub></td><td valign="top" align="center">b<sub>0</sub></td><td valign="top" align="center">g<sub>5</sub></td><td valign="top" align="center">g<sub>4</sub></td><td valign="top" align="center">g<sub>3</sub></td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">g<sub>2</sub></td><td valign="top" align="center">g<sub>1</sub></td><td valign="top" align="center">g<sub>0</sub></td><td valign="top" align="center">r<sub>4</sub></td><td valign="top" align="center">r<sub>3</sub></td><td valign="top" align="center">r<sub>2</sub></td><td valign="top" align="center">r<sub>1</sub></td><td valign="top" align="center">r<sub>0</sub></td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td valign="top" align="left"><a name="V4L2-PIX-FMT-BGR24"></a><code class="constant">V4L2_PIX_FMT_BGR24</code></td><td valign="top" align="center">'BGR3'</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">b<sub>7</sub></td><td valign="top" align="center">b<sub>6</sub></td><td valign="top" align="center">b<sub>5</sub></td><td valign="top" align="center">b<sub>4</sub></td><td valign="top" align="center">b<sub>3</sub></td><td valign="top" align="center">b<sub>2</sub></td><td valign="top" align="center">b<sub>1</sub></td><td valign="top" align="center">b<sub>0</sub></td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">g<sub>7</sub></td><td valign="top" align="center">g<sub>6</sub></td><td valign="top" align="center">g<sub>5</sub></td><td valign="top" align="center">g<sub>4</sub></td><td valign="top" align="center">g<sub>3</sub></td><td valign="top" align="center">g<sub>2</sub></td><td valign="top" align="center">g<sub>1</sub></td><td valign="top" align="center">g<sub>0</sub></td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">r<sub>7</sub></td><td valign="top" align="center">r<sub>6</sub></td><td valign="top" align="center">r<sub>5</sub></td><td valign="top" align="center">r<sub>4</sub></td><td valign="top" align="center">r<sub>3</sub></td><td valign="top" align="center">r<sub>2</sub></td><td valign="top" align="center">r<sub>1</sub></td><td valign="top" align="center">r<sub>0</sub></td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td valign="top" align="left"><a name="V4L2-PIX-FMT-RGB24"></a><code class="constant">V4L2_PIX_FMT_RGB24</code></td><td valign="top" align="center">'RGB3'</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">r<sub>7</sub></td><td valign="top" align="center">r<sub>6</sub></td><td valign="top" align="center">r<sub>5</sub></td><td valign="top" align="center">r<sub>4</sub></td><td valign="top" align="center">r<sub>3</sub></td><td valign="top" align="center">r<sub>2</sub></td><td valign="top" align="center">r<sub>1</sub></td><td valign="top" align="center">r<sub>0</sub></td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">g<sub>7</sub></td><td valign="top" align="center">g<sub>6</sub></td><td valign="top" align="center">g<sub>5</sub></td><td valign="top" align="center">g<sub>4</sub></td><td valign="top" align="center">g<sub>3</sub></td><td valign="top" align="center">g<sub>2</sub></td><td valign="top" align="center">g<sub>1</sub></td><td valign="top" align="center">g<sub>0</sub></td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">b<sub>7</sub></td><td valign="top" align="center">b<sub>6</sub></td><td valign="top" align="center">b<sub>5</sub></td><td valign="top" align="center">b<sub>4</sub></td><td valign="top" align="center">b<sub>3</sub></td><td valign="top" align="center">b<sub>2</sub></td><td valign="top" align="center">b<sub>1</sub></td><td valign="top" align="center">b<sub>0</sub></td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td valign="top" align="left"><a name="V4L2-PIX-FMT-BGR32"></a><code class="constant">V4L2_PIX_FMT_BGR32</code></td><td valign="top" align="center">'BGR4'</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">b<sub>7</sub></td><td valign="top" align="center">b<sub>6</sub></td><td valign="top" align="center">b<sub>5</sub></td><td valign="top" align="center">b<sub>4</sub></td><td valign="top" align="center">b<sub>3</sub></td><td valign="top" align="center">b<sub>2</sub></td><td valign="top" align="center">b<sub>1</sub></td><td valign="top" align="center">b<sub>0</sub></td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">g<sub>7</sub></td><td valign="top" align="center">g<sub>6</sub></td><td valign="top" align="center">g<sub>5</sub></td><td valign="top" align="center">g<sub>4</sub></td><td valign="top" align="center">g<sub>3</sub></td><td valign="top" align="center">g<sub>2</sub></td><td valign="top" align="center">g<sub>1</sub></td><td valign="top" align="center">g<sub>0</sub></td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">r<sub>7</sub></td><td valign="top" align="center">r<sub>6</sub></td><td valign="top" align="center">r<sub>5</sub></td><td valign="top" align="center">r<sub>4</sub></td><td valign="top" align="center">r<sub>3</sub></td><td valign="top" align="center">r<sub>2</sub></td><td valign="top" align="center">r<sub>1</sub></td><td valign="top" align="center">r<sub>0</sub></td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">a<sub>7</sub></td><td valign="top" align="center">a<sub>6</sub></td><td valign="top" align="center">a<sub>5</sub></td><td valign="top" align="center">a<sub>4</sub></td><td valign="top" align="center">a<sub>3</sub></td><td valign="top" align="center">a<sub>2</sub></td><td valign="top" align="center">a<sub>1</sub></td><td valign="top" align="center">a<sub>0</sub></td></tr><tr><td valign="top" align="left"><a name="V4L2-PIX-FMT-RGB32"></a><code class="constant">V4L2_PIX_FMT_RGB32</code></td><td valign="top" align="center">'RGB4'</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">r<sub>7</sub></td><td valign="top" align="center">r<sub>6</sub></td><td valign="top" align="center">r<sub>5</sub></td><td valign="top" align="center">r<sub>4</sub></td><td valign="top" align="center">r<sub>3</sub></td><td valign="top" align="center">r<sub>2</sub></td><td valign="top" align="center">r<sub>1</sub></td><td valign="top" align="center">r<sub>0</sub></td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">g<sub>7</sub></td><td valign="top" align="center">g<sub>6</sub></td><td valign="top" align="center">g<sub>5</sub></td><td valign="top" align="center">g<sub>4</sub></td><td valign="top" align="center">g<sub>3</sub></td><td valign="top" align="center">g<sub>2</sub></td><td valign="top" align="center">g<sub>1</sub></td><td valign="top" align="center">g<sub>0</sub></td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">b<sub>7</sub></td><td valign="top" align="center">b<sub>6</sub></td><td valign="top" align="center">b<sub>5</sub></td><td valign="top" align="center">b<sub>4</sub></td><td valign="top" align="center">b<sub>3</sub></td><td valign="top" align="center">b<sub>2</sub></td><td valign="top" align="center">b<sub>1</sub></td><td valign="top" align="center">b<sub>0</sub></td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">a<sub>7</sub></td><td valign="top" align="center">a<sub>6</sub></td><td valign="top" align="center">a<sub>5</sub></td><td valign="top" align="center">a<sub>4</sub></td><td valign="top" align="center">a<sub>3</sub></td><td valign="top" align="center">a<sub>2</sub></td><td valign="top" align="center">a<sub>1</sub></td><td valign="top" align="center">a<sub>0</sub></td></tr></tbody></table></div></div><br class="table-break"><p>Bit 7 is the most significant bit. The value of a = alpha
bits is undefined when reading from the driver, ignored when writing
to the driver, except when alpha blending has been negotiated for a
<a class="link" href="#overlay" title="4.2.&nbsp;Video Overlay Interface">Video Overlay</a> or <a class="link" href="#osd" title="4.4.&nbsp;Video Output Overlay Interface">Video Output Overlay</a>.</p><div class="example"><a name="id2787260"></a><p class="title"><b>Example&nbsp;2.2.&nbsp;<code class="constant">V4L2_PIX_FMT_BGR24</code> 4 × 4 pixel
image</b></p><div class="example-contents"><p><b>Byte Order.&nbsp;</b>Each cell is one byte.
	      </p><div class="informaltable"><table border="0"><colgroup><col align="left"><col><col><col><col><col><col><col><col><col><col><col><col></colgroup><tbody valign="top"><tr><td valign="top" align="left">start&nbsp;+&nbsp;0:</td><td valign="top" align="center">B<sub>00</sub></td><td valign="top" align="center">G<sub>00</sub></td><td valign="top" align="center">R<sub>00</sub></td><td valign="top" align="center">B<sub>01</sub></td><td valign="top" align="center">G<sub>01</sub></td><td valign="top" align="center">R<sub>01</sub></td><td valign="top" align="center">B<sub>02</sub></td><td valign="top" align="center">G<sub>02</sub></td><td valign="top" align="center">R<sub>02</sub></td><td valign="top" align="center">B<sub>03</sub></td><td valign="top" align="center">G<sub>03</sub></td><td valign="top" align="center">R<sub>03</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;12:</td><td valign="top" align="center">B<sub>10</sub></td><td valign="top" align="center">G<sub>10</sub></td><td valign="top" align="center">R<sub>10</sub></td><td valign="top" align="center">B<sub>11</sub></td><td valign="top" align="center">G<sub>11</sub></td><td valign="top" align="center">R<sub>11</sub></td><td valign="top" align="center">B<sub>12</sub></td><td valign="top" align="center">G<sub>12</sub></td><td valign="top" align="center">R<sub>12</sub></td><td valign="top" align="center">B<sub>13</sub></td><td valign="top" align="center">G<sub>13</sub></td><td valign="top" align="center">R<sub>13</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;24:</td><td valign="top" align="center">B<sub>20</sub></td><td valign="top" align="center">G<sub>20</sub></td><td valign="top" align="center">R<sub>20</sub></td><td valign="top" align="center">B<sub>21</sub></td><td valign="top" align="center">G<sub>21</sub></td><td valign="top" align="center">R<sub>21</sub></td><td valign="top" align="center">B<sub>22</sub></td><td valign="top" align="center">G<sub>22</sub></td><td valign="top" align="center">R<sub>22</sub></td><td valign="top" align="center">B<sub>23</sub></td><td valign="top" align="center">G<sub>23</sub></td><td valign="top" align="center">R<sub>23</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;36:</td><td valign="top" align="center">B<sub>30</sub></td><td valign="top" align="center">G<sub>30</sub></td><td valign="top" align="center">R<sub>30</sub></td><td valign="top" align="center">B<sub>31</sub></td><td valign="top" align="center">G<sub>31</sub></td><td valign="top" align="center">R<sub>31</sub></td><td valign="top" align="center">B<sub>32</sub></td><td valign="top" align="center">G<sub>32</sub></td><td valign="top" align="center">R<sub>32</sub></td><td valign="top" align="center">B<sub>33</sub></td><td valign="top" align="center">G<sub>33</sub></td><td valign="top" align="center">R<sub>33</sub></td></tr></tbody></table></div><p>
	    </p></div></div><br class="example-break"><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>Drivers may interpret these formats differently.</p></div><p>Some RGB formats above are uncommon and were probably
defined in error. Drivers may interpret them as in <a class="xref" href="#rgb-formats-corrected" title="Table&nbsp;2.5.&nbsp;Packed RGB Image Formats (corrected)">Table&nbsp;2.5, “Packed RGB Image Formats (corrected)”</a>.</p><div class="table"><a name="rgb-formats-corrected"></a><p class="title"><b>Table&nbsp;2.5.&nbsp;Packed RGB Image Formats (corrected)</b></p><div class="table-contents"><table summary="Packed RGB Image Formats (corrected)" width="100%" border="0"><colgroup><col align="left"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"></colgroup><thead><tr><th align="left">Identifier</th><th align="center">Code</th><th align="center">&nbsp;</th><th colspan="8" align="center">Byte&nbsp;0 in memory</th><td class="auto-generated">&nbsp;</td><th colspan="8" align="center">Byte&nbsp;1</th><td class="auto-generated">&nbsp;</td><th colspan="8" align="center">Byte&nbsp;2</th><td class="auto-generated">&nbsp;</td><th colspan="8" align="center">Byte&nbsp;3</th></tr><tr><th align="left">&nbsp;</th><th align="center">&nbsp;</th><th align="center">Bit</th><th align="center">7</th><th align="center">6</th><th align="center">5</th><th align="center">4</th><th align="center">3</th><th align="center">2</th><th align="center">1</th><th align="center">0</th><th align="center">&nbsp;</th><th align="center">7</th><th align="center">6</th><th align="center">5</th><th align="center">4</th><th align="center">3</th><th align="center">2</th><th align="center">1</th><th align="center">0</th><th align="center">&nbsp;</th><th align="center">7</th><th align="center">6</th><th align="center">5</th><th align="center">4</th><th align="center">3</th><th align="center">2</th><th align="center">1</th><th align="center">0</th><th align="center">&nbsp;</th><th align="center">7</th><th align="center">6</th><th align="center">5</th><th align="center">4</th><th align="center">3</th><th align="center">2</th><th align="center">1</th><th align="center">0</th></tr></thead><tbody valign="top"><tr><td valign="top" align="left"><code class="constant">V4L2_PIX_FMT_RGB332</code></td><td valign="top" align="center">'RGB1'</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">r<sub>2</sub></td><td valign="top" align="center">r<sub>1</sub></td><td valign="top" align="center">r<sub>0</sub></td><td valign="top" align="center">g<sub>2</sub></td><td valign="top" align="center">g<sub>1</sub></td><td valign="top" align="center">g<sub>0</sub></td><td valign="top" align="center">b<sub>1</sub></td><td valign="top" align="center">b<sub>0</sub></td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td valign="top" align="left"><code class="constant">V4L2_PIX_FMT_RGB444</code></td><td valign="top" align="center">'R444'</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">g<sub>3</sub></td><td valign="top" align="center">g<sub>2</sub></td><td valign="top" align="center">g<sub>1</sub></td><td valign="top" align="center">g<sub>0</sub></td><td valign="top" align="center">b<sub>3</sub></td><td valign="top" align="center">b<sub>2</sub></td><td valign="top" align="center">b<sub>1</sub></td><td valign="top" align="center">b<sub>0</sub></td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">a<sub>3</sub></td><td valign="top" align="center">a<sub>2</sub></td><td valign="top" align="center">a<sub>1</sub></td><td valign="top" align="center">a<sub>0</sub></td><td valign="top" align="center">r<sub>3</sub></td><td valign="top" align="center">r<sub>2</sub></td><td valign="top" align="center">r<sub>1</sub></td><td valign="top" align="center">r<sub>0</sub></td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td valign="top" align="left"><code class="constant">V4L2_PIX_FMT_RGB555</code></td><td valign="top" align="center">'RGBO'</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">g<sub>2</sub></td><td valign="top" align="center">g<sub>1</sub></td><td valign="top" align="center">g<sub>0</sub></td><td valign="top" align="center">b<sub>4</sub></td><td valign="top" align="center">b<sub>3</sub></td><td valign="top" align="center">b<sub>2</sub></td><td valign="top" align="center">b<sub>1</sub></td><td valign="top" align="center">b<sub>0</sub></td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">a</td><td valign="top" align="center">r<sub>4</sub></td><td valign="top" align="center">r<sub>3</sub></td><td valign="top" align="center">r<sub>2</sub></td><td valign="top" align="center">r<sub>1</sub></td><td valign="top" align="center">r<sub>0</sub></td><td valign="top" align="center">g<sub>4</sub></td><td valign="top" align="center">g<sub>3</sub></td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td valign="top" align="left"><code class="constant">V4L2_PIX_FMT_RGB565</code></td><td valign="top" align="center">'RGBP'</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">g<sub>2</sub></td><td valign="top" align="center">g<sub>1</sub></td><td valign="top" align="center">g<sub>0</sub></td><td valign="top" align="center">b<sub>4</sub></td><td valign="top" align="center">b<sub>3</sub></td><td valign="top" align="center">b<sub>2</sub></td><td valign="top" align="center">b<sub>1</sub></td><td valign="top" align="center">b<sub>0</sub></td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">r<sub>4</sub></td><td valign="top" align="center">r<sub>3</sub></td><td valign="top" align="center">r<sub>2</sub></td><td valign="top" align="center">r<sub>1</sub></td><td valign="top" align="center">r<sub>0</sub></td><td valign="top" align="center">g<sub>5</sub></td><td valign="top" align="center">g<sub>4</sub></td><td valign="top" align="center">g<sub>3</sub></td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td valign="top" align="left"><code class="constant">V4L2_PIX_FMT_RGB555X</code></td><td valign="top" align="center">'RGBQ'</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">a</td><td valign="top" align="center">r<sub>4</sub></td><td valign="top" align="center">r<sub>3</sub></td><td valign="top" align="center">r<sub>2</sub></td><td valign="top" align="center">r<sub>1</sub></td><td valign="top" align="center">r<sub>0</sub></td><td valign="top" align="center">g<sub>4</sub></td><td valign="top" align="center">g<sub>3</sub></td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">g<sub>2</sub></td><td valign="top" align="center">g<sub>1</sub></td><td valign="top" align="center">g<sub>0</sub></td><td valign="top" align="center">b<sub>4</sub></td><td valign="top" align="center">b<sub>3</sub></td><td valign="top" align="center">b<sub>2</sub></td><td valign="top" align="center">b<sub>1</sub></td><td valign="top" align="center">b<sub>0</sub></td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td valign="top" align="left"><code class="constant">V4L2_PIX_FMT_RGB565X</code></td><td valign="top" align="center">'RGBR'</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">r<sub>4</sub></td><td valign="top" align="center">r<sub>3</sub></td><td valign="top" align="center">r<sub>2</sub></td><td valign="top" align="center">r<sub>1</sub></td><td valign="top" align="center">r<sub>0</sub></td><td valign="top" align="center">g<sub>5</sub></td><td valign="top" align="center">g<sub>4</sub></td><td valign="top" align="center">g<sub>3</sub></td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">g<sub>2</sub></td><td valign="top" align="center">g<sub>1</sub></td><td valign="top" align="center">g<sub>0</sub></td><td valign="top" align="center">b<sub>4</sub></td><td valign="top" align="center">b<sub>3</sub></td><td valign="top" align="center">b<sub>2</sub></td><td valign="top" align="center">b<sub>1</sub></td><td valign="top" align="center">b<sub>0</sub></td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td valign="top" align="left"><code class="constant">V4L2_PIX_FMT_BGR24</code></td><td valign="top" align="center">'BGR3'</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">b<sub>7</sub></td><td valign="top" align="center">b<sub>6</sub></td><td valign="top" align="center">b<sub>5</sub></td><td valign="top" align="center">b<sub>4</sub></td><td valign="top" align="center">b<sub>3</sub></td><td valign="top" align="center">b<sub>2</sub></td><td valign="top" align="center">b<sub>1</sub></td><td valign="top" align="center">b<sub>0</sub></td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">g<sub>7</sub></td><td valign="top" align="center">g<sub>6</sub></td><td valign="top" align="center">g<sub>5</sub></td><td valign="top" align="center">g<sub>4</sub></td><td valign="top" align="center">g<sub>3</sub></td><td valign="top" align="center">g<sub>2</sub></td><td valign="top" align="center">g<sub>1</sub></td><td valign="top" align="center">g<sub>0</sub></td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">r<sub>7</sub></td><td valign="top" align="center">r<sub>6</sub></td><td valign="top" align="center">r<sub>5</sub></td><td valign="top" align="center">r<sub>4</sub></td><td valign="top" align="center">r<sub>3</sub></td><td valign="top" align="center">r<sub>2</sub></td><td valign="top" align="center">r<sub>1</sub></td><td valign="top" align="center">r<sub>0</sub></td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td valign="top" align="left"><code class="constant">V4L2_PIX_FMT_RGB24</code></td><td valign="top" align="center">'RGB3'</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">r<sub>7</sub></td><td valign="top" align="center">r<sub>6</sub></td><td valign="top" align="center">r<sub>5</sub></td><td valign="top" align="center">r<sub>4</sub></td><td valign="top" align="center">r<sub>3</sub></td><td valign="top" align="center">r<sub>2</sub></td><td valign="top" align="center">r<sub>1</sub></td><td valign="top" align="center">r<sub>0</sub></td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">g<sub>7</sub></td><td valign="top" align="center">g<sub>6</sub></td><td valign="top" align="center">g<sub>5</sub></td><td valign="top" align="center">g<sub>4</sub></td><td valign="top" align="center">g<sub>3</sub></td><td valign="top" align="center">g<sub>2</sub></td><td valign="top" align="center">g<sub>1</sub></td><td valign="top" align="center">g<sub>0</sub></td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">b<sub>7</sub></td><td valign="top" align="center">b<sub>6</sub></td><td valign="top" align="center">b<sub>5</sub></td><td valign="top" align="center">b<sub>4</sub></td><td valign="top" align="center">b<sub>3</sub></td><td valign="top" align="center">b<sub>2</sub></td><td valign="top" align="center">b<sub>1</sub></td><td valign="top" align="center">b<sub>0</sub></td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td valign="top" align="left"><code class="constant">V4L2_PIX_FMT_BGR32</code></td><td valign="top" align="center">'BGR4'</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">b<sub>7</sub></td><td valign="top" align="center">b<sub>6</sub></td><td valign="top" align="center">b<sub>5</sub></td><td valign="top" align="center">b<sub>4</sub></td><td valign="top" align="center">b<sub>3</sub></td><td valign="top" align="center">b<sub>2</sub></td><td valign="top" align="center">b<sub>1</sub></td><td valign="top" align="center">b<sub>0</sub></td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">g<sub>7</sub></td><td valign="top" align="center">g<sub>6</sub></td><td valign="top" align="center">g<sub>5</sub></td><td valign="top" align="center">g<sub>4</sub></td><td valign="top" align="center">g<sub>3</sub></td><td valign="top" align="center">g<sub>2</sub></td><td valign="top" align="center">g<sub>1</sub></td><td valign="top" align="center">g<sub>0</sub></td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">r<sub>7</sub></td><td valign="top" align="center">r<sub>6</sub></td><td valign="top" align="center">r<sub>5</sub></td><td valign="top" align="center">r<sub>4</sub></td><td valign="top" align="center">r<sub>3</sub></td><td valign="top" align="center">r<sub>2</sub></td><td valign="top" align="center">r<sub>1</sub></td><td valign="top" align="center">r<sub>0</sub></td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">a<sub>7</sub></td><td valign="top" align="center">a<sub>6</sub></td><td valign="top" align="center">a<sub>5</sub></td><td valign="top" align="center">a<sub>4</sub></td><td valign="top" align="center">a<sub>3</sub></td><td valign="top" align="center">a<sub>2</sub></td><td valign="top" align="center">a<sub>1</sub></td><td valign="top" align="center">a<sub>0</sub></td></tr><tr><td valign="top" align="left"><code class="constant">V4L2_PIX_FMT_RGB32</code></td><td valign="top" align="center">'RGB4'</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">a<sub>7</sub></td><td valign="top" align="center">a<sub>6</sub></td><td valign="top" align="center">a<sub>5</sub></td><td valign="top" align="center">a<sub>4</sub></td><td valign="top" align="center">a<sub>3</sub></td><td valign="top" align="center">a<sub>2</sub></td><td valign="top" align="center">a<sub>1</sub></td><td valign="top" align="center">a<sub>0</sub></td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">r<sub>7</sub></td><td valign="top" align="center">r<sub>6</sub></td><td valign="top" align="center">r<sub>5</sub></td><td valign="top" align="center">r<sub>4</sub></td><td valign="top" align="center">r<sub>3</sub></td><td valign="top" align="center">r<sub>2</sub></td><td valign="top" align="center">r<sub>1</sub></td><td valign="top" align="center">r<sub>0</sub></td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">g<sub>7</sub></td><td valign="top" align="center">g<sub>6</sub></td><td valign="top" align="center">g<sub>5</sub></td><td valign="top" align="center">g<sub>4</sub></td><td valign="top" align="center">g<sub>3</sub></td><td valign="top" align="center">g<sub>2</sub></td><td valign="top" align="center">g<sub>1</sub></td><td valign="top" align="center">g<sub>0</sub></td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">b<sub>7</sub></td><td valign="top" align="center">b<sub>6</sub></td><td valign="top" align="center">b<sub>5</sub></td><td valign="top" align="center">b<sub>4</sub></td><td valign="top" align="center">b<sub>3</sub></td><td valign="top" align="center">b<sub>2</sub></td><td valign="top" align="center">b<sub>1</sub></td><td valign="top" align="center">b<sub>0</sub></td></tr></tbody></table></div></div><br class="table-break"><p>A test utility to determine which RGB formats a driver
actually supports is available from the LinuxTV v4l-dvb repository.
See <a class="ulink" href="https://www.linuxtv.org/repo/" target="_top">https://linuxtv.org/repo/</a> for access instructions.</p></div></div><div class="refentry" lang="en"><div class="refentry.separator"><hr></div><a name="V4L2-PIX-FMT-SBGGR8"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p><code class="constant">V4L2_PIX_FMT_SBGGR8</code> — Bayer RGB format</p></div><div class="refsect1" lang="en"><a name="id2793264"></a><h2>Description</h2><p>This is commonly the native format of digital cameras,
reflecting the arrangement of sensors on the CCD device. Only one red,
green or blue value is given for each pixel. Missing components must
be interpolated from neighbouring pixels. From left to right the first
row consists of a blue and green value, the second row of a green and
red value. This scheme repeats to the right and down for every two
columns and rows.</p><div class="example"><a name="id2793280"></a><p class="title"><b>Example&nbsp;2.3.&nbsp;<code class="constant">V4L2_PIX_FMT_SBGGR8</code> 4 × 4
pixel image</b></p><div class="example-contents"><p><b>Byte Order.&nbsp;</b>Each cell is one byte.
	      </p><div class="informaltable"><table border="0"><colgroup><col align="left"><col><col><col><col></colgroup><tbody valign="top"><tr><td valign="top" align="left">start&nbsp;+&nbsp;0:</td><td valign="top" align="center">B<sub>00</sub></td><td valign="top" align="center">G<sub>01</sub></td><td valign="top" align="center">B<sub>02</sub></td><td valign="top" align="center">G<sub>03</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;4:</td><td valign="top" align="center">G<sub>10</sub></td><td valign="top" align="center">R<sub>11</sub></td><td valign="top" align="center">G<sub>12</sub></td><td valign="top" align="center">R<sub>13</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;8:</td><td valign="top" align="center">B<sub>20</sub></td><td valign="top" align="center">G<sub>21</sub></td><td valign="top" align="center">B<sub>22</sub></td><td valign="top" align="center">G<sub>23</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;12:</td><td valign="top" align="center">G<sub>30</sub></td><td valign="top" align="center">R<sub>31</sub></td><td valign="top" align="center">G<sub>32</sub></td><td valign="top" align="center">R<sub>33</sub></td></tr></tbody></table></div><p>
	    </p></div></div><br class="example-break"></div></div><div class="refentry" lang="en"><div class="refentry.separator"><hr></div><a name="V4L2-PIX-FMT-SGBRG8"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p><code class="constant">V4L2_PIX_FMT_SGBRG8</code> — Bayer RGB format</p></div><div class="refsect1" lang="en"><a name="id2793724"></a><h2>Description</h2><p>This is commonly the native format of digital cameras,
reflecting the arrangement of sensors on the CCD device. Only one red,
green or blue value is given for each pixel. Missing components must
be interpolated from neighbouring pixels. From left to right the first
row consists of a green and blue value, the second row of a red and
green value. This scheme repeats to the right and down for every two
columns and rows.</p><div class="example"><a name="id2793375"></a><p class="title"><b>Example&nbsp;2.4.&nbsp;<code class="constant">V4L2_PIX_FMT_SGBRG8</code> 4 × 4
pixel image</b></p><div class="example-contents"><p><b>Byte Order.&nbsp;</b>Each cell is one byte.
	      </p><div class="informaltable"><table border="0"><colgroup><col align="left"><col><col><col><col></colgroup><tbody valign="top"><tr><td valign="top" align="left">start&nbsp;+&nbsp;0:</td><td valign="top" align="center">G<sub>00</sub></td><td valign="top" align="center">B<sub>01</sub></td><td valign="top" align="center">G<sub>02</sub></td><td valign="top" align="center">B<sub>03</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;4:</td><td valign="top" align="center">R<sub>10</sub></td><td valign="top" align="center">G<sub>11</sub></td><td valign="top" align="center">R<sub>12</sub></td><td valign="top" align="center">G<sub>13</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;8:</td><td valign="top" align="center">G<sub>20</sub></td><td valign="top" align="center">B<sub>21</sub></td><td valign="top" align="center">G<sub>22</sub></td><td valign="top" align="center">B<sub>23</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;12:</td><td valign="top" align="center">R<sub>30</sub></td><td valign="top" align="center">G<sub>31</sub></td><td valign="top" align="center">R<sub>32</sub></td><td valign="top" align="center">G<sub>33</sub></td></tr></tbody></table></div><p>
	    </p></div></div><br class="example-break"></div></div><div class="refentry" lang="en"><div class="refentry.separator"><hr></div><a name="V4L2-PIX-FMT-SGRBG8"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p><code class="constant">V4L2_PIX_FMT_SGRBG8</code> — Bayer RGB format</p></div><div class="refsect1" lang="en"><a name="id2793663"></a><h2>Description</h2><p>This is commonly the native format of digital cameras,
reflecting the arrangement of sensors on the CCD device. Only one red,
green or blue value is given for each pixel. Missing components must
be interpolated from neighbouring pixels. From left to right the first
row consists of a green and blue value, the second row of a red and
green value. This scheme repeats to the right and down for every two
columns and rows.</p><div class="example"><a name="id2793621"></a><p class="title"><b>Example&nbsp;2.5.&nbsp;<code class="constant">V4L2_PIX_FMT_SGRBG8</code> 4 ×
4 pixel image</b></p><div class="example-contents"><p><b>Byte Order.&nbsp;</b>Each cell is one byte.
	      </p><div class="informaltable"><table border="0"><colgroup><col align="left"><col><col><col><col></colgroup><tbody valign="top"><tr><td valign="top" align="left">start&nbsp;+&nbsp;0:</td><td valign="top" align="center">G<sub>00</sub></td><td valign="top" align="center">R<sub>01</sub></td><td valign="top" align="center">G<sub>02</sub></td><td valign="top" align="center">R<sub>03</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;4:</td><td valign="top" align="center">R<sub>10</sub></td><td valign="top" align="center">B<sub>11</sub></td><td valign="top" align="center">R<sub>12</sub></td><td valign="top" align="center">B<sub>13</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;8:</td><td valign="top" align="center">G<sub>20</sub></td><td valign="top" align="center">R<sub>21</sub></td><td valign="top" align="center">G<sub>22</sub></td><td valign="top" align="center">R<sub>23</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;12:</td><td valign="top" align="center">R<sub>30</sub></td><td valign="top" align="center">B<sub>31</sub></td><td valign="top" align="center">R<sub>32</sub></td><td valign="top" align="center">B<sub>33</sub></td></tr></tbody></table></div><p>
	    </p></div></div><br class="example-break"></div></div><div class="refentry" lang="en"><div class="refentry.separator"><hr></div><a name="V4L2-PIX-FMT-SBGGR16"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p><code class="constant">V4L2_PIX_FMT_SBGGR16</code> — Bayer RGB format</p></div><div class="refsect1" lang="en"><a name="id2794330"></a><h2>Description</h2><p>This format is similar to <a class="link" href="#V4L2-PIX-FMT-SBGGR8" title="V4L2_PIX_FMT_SBGGR8 ('BA81')">
<code class="constant">V4L2_PIX_FMT_SBGGR8</code></a>, except each pixel has
a depth of 16 bits. The least significant byte is stored at lower
memory addresses (little-endian). Note the actual sampling precision
may be lower than 16 bits, for example 10 bits per pixel with values
in range 0 to 1023.</p><div class="example"><a name="id2794283"></a><p class="title"><b>Example&nbsp;2.6.&nbsp;<code class="constant">V4L2_PIX_FMT_SBGGR16</code> 4 × 4
pixel image</b></p><div class="example-contents"><p><b>Byte Order.&nbsp;</b>Each cell is one byte.
	  </p><div class="informaltable"><table border="0"><colgroup><col align="left"><col><col><col><col></colgroup><tbody valign="top"><tr><td valign="top" align="left">start&nbsp;+&nbsp;0:</td><td valign="top" align="center">B<sub>00low</sub></td><td valign="top" align="center">B<sub>00high</sub></td><td valign="top" align="center">G<sub>01low</sub></td><td valign="top" align="center">G<sub>01high</sub></td><td valign="top" align="center">B<sub>02low</sub></td><td valign="top" align="center">B<sub>02high</sub></td><td valign="top" align="center">G<sub>03low</sub></td><td valign="top" align="center">G<sub>03high</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;8:</td><td valign="top" align="center">G<sub>10low</sub></td><td valign="top" align="center">G<sub>10high</sub></td><td valign="top" align="center">R<sub>11low</sub></td><td valign="top" align="center">R<sub>11high</sub></td><td valign="top" align="center">G<sub>12low</sub></td><td valign="top" align="center">G<sub>12high</sub></td><td valign="top" align="center">R<sub>13low</sub></td><td valign="top" align="center">R<sub>13high</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;16:</td><td valign="top" align="center">B<sub>20low</sub></td><td valign="top" align="center">B<sub>20high</sub></td><td valign="top" align="center">G<sub>21low</sub></td><td valign="top" align="center">G<sub>21high</sub></td><td valign="top" align="center">B<sub>22low</sub></td><td valign="top" align="center">B<sub>22high</sub></td><td valign="top" align="center">G<sub>23low</sub></td><td valign="top" align="center">G<sub>23high</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;24:</td><td valign="top" align="center">G<sub>30low</sub></td><td valign="top" align="center">G<sub>30high</sub></td><td valign="top" align="center">R<sub>31low</sub></td><td valign="top" align="center">R<sub>31high</sub></td><td valign="top" align="center">G<sub>32low</sub></td><td valign="top" align="center">G<sub>32high</sub></td><td valign="top" align="center">R<sub>33low</sub></td><td valign="top" align="center">R<sub>33high</sub></td></tr></tbody></table></div><p>
	</p></div></div><br class="example-break"></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="yuv-formats"></a>2.5.&nbsp;YUV Formats</h2></div></div></div><p>YUV is the format native to TV broadcast and composite video
signals. It separates the brightness information (Y) from the color
information (U and V or Cb and Cr). The color information consists of
red and blue <span class="emphasis"><em>color difference</em></span> signals, this way
the green component can be reconstructed by subtracting from the
brightness component. See <a class="xref" href="#colorspaces" title="2.2.&nbsp;Colorspaces">Section&nbsp;2.2, “Colorspaces”</a> for conversion
examples. YUV was chosen because early television would only transmit
brightness information. To add color in a way compatible with existing
receivers a new signal carrier was added to transmit the color
difference signals. Secondary in the YUV format the U and V components
usually have lower resolution than the Y component. This is an analog
video compression technique taking advantage of a property of the
human visual system, being more sensitive to brightness
information.</p><div class="refentry" lang="en"><a name="packed-yuv"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>Packed YUV formats — Packed YUV formats</p></div><div class="refsect1" lang="en"><a name="id2795028"></a><h2>Description</h2><p>Similar to the packed RGB formats these formats store
the Y, Cb and Cr component of each pixel in one 16 or 32 bit
word.</p><div class="table"><a name="id2795038"></a><p class="title"><b>Table&nbsp;2.6.&nbsp;Packed YUV Image Formats</b></p><div class="table-contents"><table summary="Packed YUV Image Formats" width="100%" border="0"><colgroup><col align="left"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"></colgroup><thead><tr><th align="left">Identifier</th><th align="center">Code</th><th align="center">&nbsp;</th><th colspan="8" align="center">Byte&nbsp;0 in memory</th><td class="auto-generated">&nbsp;</td><th colspan="8" align="center">Byte&nbsp;1</th><td class="auto-generated">&nbsp;</td><th colspan="8" align="center">Byte&nbsp;2</th><td class="auto-generated">&nbsp;</td><th colspan="8" align="center">Byte&nbsp;3</th></tr><tr><th align="left">&nbsp;</th><th align="center">&nbsp;</th><th align="center">Bit</th><th align="center">7</th><th align="center">6</th><th align="center">5</th><th align="center">4</th><th align="center">3</th><th align="center">2</th><th align="center">1</th><th align="center">0</th><th align="center">&nbsp;</th><th align="center">7</th><th align="center">6</th><th align="center">5</th><th align="center">4</th><th align="center">3</th><th align="center">2</th><th align="center">1</th><th align="center">0</th><th align="center">&nbsp;</th><th align="center">7</th><th align="center">6</th><th align="center">5</th><th align="center">4</th><th align="center">3</th><th align="center">2</th><th align="center">1</th><th align="center">0</th><th align="center">&nbsp;</th><th align="center">7</th><th align="center">6</th><th align="center">5</th><th align="center">4</th><th align="center">3</th><th align="center">2</th><th align="center">1</th><th align="center">0</th></tr></thead><tbody valign="top"><tr><td valign="top" align="left"><a name="V4L2-PIX-FMT-YUV444"></a><code class="constant">V4L2_PIX_FMT_YUV444</code></td><td valign="top" align="center">'Y444'</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Cb<sub>3</sub></td><td valign="top" align="center">Cb<sub>2</sub></td><td valign="top" align="center">Cb<sub>1</sub></td><td valign="top" align="center">Cb<sub>0</sub></td><td valign="top" align="center">Cr<sub>3</sub></td><td valign="top" align="center">Cr<sub>2</sub></td><td valign="top" align="center">Cr<sub>1</sub></td><td valign="top" align="center">Cr<sub>0</sub></td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">a<sub>3</sub></td><td valign="top" align="center">a<sub>2</sub></td><td valign="top" align="center">a<sub>1</sub></td><td valign="top" align="center">a<sub>0</sub></td><td valign="top" align="center">Y'<sub>3</sub></td><td valign="top" align="center">Y'<sub>2</sub></td><td valign="top" align="center">Y'<sub>1</sub></td><td valign="top" align="center">Y'<sub>0</sub></td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td valign="top" align="left"><a name="V4L2-PIX-FMT-YUV555"></a><code class="constant">V4L2_PIX_FMT_YUV555</code></td><td valign="top" align="center">'YUVO'</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Cb<sub>2</sub></td><td valign="top" align="center">Cb<sub>1</sub></td><td valign="top" align="center">Cb<sub>0</sub></td><td valign="top" align="center">Cr<sub>4</sub></td><td valign="top" align="center">Cr<sub>3</sub></td><td valign="top" align="center">Cr<sub>2</sub></td><td valign="top" align="center">Cr<sub>1</sub></td><td valign="top" align="center">Cr<sub>0</sub></td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">a</td><td valign="top" align="center">Y'<sub>4</sub></td><td valign="top" align="center">Y'<sub>3</sub></td><td valign="top" align="center">Y'<sub>2</sub></td><td valign="top" align="center">Y'<sub>1</sub></td><td valign="top" align="center">Y'<sub>0</sub></td><td valign="top" align="center">Cb<sub>4</sub></td><td valign="top" align="center">Cb<sub>3</sub></td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td valign="top" align="left"><a name="V4L2-PIX-FMT-YUV565"></a><code class="constant">V4L2_PIX_FMT_YUV565</code></td><td valign="top" align="center">'YUVP'</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Cb<sub>2</sub></td><td valign="top" align="center">Cb<sub>1</sub></td><td valign="top" align="center">Cb<sub>0</sub></td><td valign="top" align="center">Cr<sub>4</sub></td><td valign="top" align="center">Cr<sub>3</sub></td><td valign="top" align="center">Cr<sub>2</sub></td><td valign="top" align="center">Cr<sub>1</sub></td><td valign="top" align="center">Cr<sub>0</sub></td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y'<sub>4</sub></td><td valign="top" align="center">Y'<sub>3</sub></td><td valign="top" align="center">Y'<sub>2</sub></td><td valign="top" align="center">Y'<sub>1</sub></td><td valign="top" align="center">Y'<sub>0</sub></td><td valign="top" align="center">Cb<sub>5</sub></td><td valign="top" align="center">Cb<sub>4</sub></td><td valign="top" align="center">Cb<sub>3</sub></td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td valign="top" align="left"><a name="V4L2-PIX-FMT-YUV32"></a><code class="constant">V4L2_PIX_FMT_YUV32</code></td><td valign="top" align="center">'YUV4'</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">a<sub>7</sub></td><td valign="top" align="center">a<sub>6</sub></td><td valign="top" align="center">a<sub>5</sub></td><td valign="top" align="center">a<sub>4</sub></td><td valign="top" align="center">a<sub>3</sub></td><td valign="top" align="center">a<sub>2</sub></td><td valign="top" align="center">a<sub>1</sub></td><td valign="top" align="center">a<sub>0</sub></td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y'<sub>7</sub></td><td valign="top" align="center">Y'<sub>6</sub></td><td valign="top" align="center">Y'<sub>5</sub></td><td valign="top" align="center">Y'<sub>4</sub></td><td valign="top" align="center">Y'<sub>3</sub></td><td valign="top" align="center">Y'<sub>2</sub></td><td valign="top" align="center">Y'<sub>1</sub></td><td valign="top" align="center">Y'<sub>0</sub></td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Cb<sub>7</sub></td><td valign="top" align="center">Cb<sub>6</sub></td><td valign="top" align="center">Cb<sub>5</sub></td><td valign="top" align="center">Cb<sub>4</sub></td><td valign="top" align="center">Cb<sub>3</sub></td><td valign="top" align="center">Cb<sub>2</sub></td><td valign="top" align="center">Cb<sub>1</sub></td><td valign="top" align="center">Cb<sub>0</sub></td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Cr<sub>7</sub></td><td valign="top" align="center">Cr<sub>6</sub></td><td valign="top" align="center">Cr<sub>5</sub></td><td valign="top" align="center">Cr<sub>4</sub></td><td valign="top" align="center">Cr<sub>3</sub></td><td valign="top" align="center">Cr<sub>2</sub></td><td valign="top" align="center">Cr<sub>1</sub></td><td valign="top" align="center">Cr<sub>0</sub></td></tr></tbody></table></div></div><br class="table-break"><p>Bit 7 is the most significant bit. The value of a = alpha
bits is undefined when reading from the driver, ignored when writing
to the driver, except when alpha blending has been negotiated for a
<a class="link" href="#overlay" title="4.2.&nbsp;Video Overlay Interface">Video Overlay</a> or <a class="link" href="#osd" title="4.4.&nbsp;Video Output Overlay Interface">Video Output Overlay</a>.</p></div></div><div class="refentry" lang="en"><div class="refentry.separator"><hr></div><a name="V4L2-PIX-FMT-GREY"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p><code class="constant">V4L2_PIX_FMT_GREY</code> — Grey-scale image</p></div><div class="refsect1" lang="en"><a name="id2797539"></a><h2>Description</h2><p>This is a grey-scale image. It is really a degenerate
Y'CbCr format which simply contains no Cb or Cr data.</p><div class="example"><a name="id2797550"></a><p class="title"><b>Example&nbsp;2.7.&nbsp;<code class="constant">V4L2_PIX_FMT_GREY</code> 4 × 4
pixel image</b></p><div class="example-contents"><p><b>Byte Order.&nbsp;</b>Each cell is one byte.
		</p><div class="informaltable"><table border="0"><colgroup><col align="left"><col><col><col><col></colgroup><tbody valign="top"><tr><td valign="top" align="left">start&nbsp;+&nbsp;0:</td><td valign="top" align="center">Y'<sub>00</sub></td><td valign="top" align="center">Y'<sub>01</sub></td><td valign="top" align="center">Y'<sub>02</sub></td><td valign="top" align="center">Y'<sub>03</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;4:</td><td valign="top" align="center">Y'<sub>10</sub></td><td valign="top" align="center">Y'<sub>11</sub></td><td valign="top" align="center">Y'<sub>12</sub></td><td valign="top" align="center">Y'<sub>13</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;8:</td><td valign="top" align="center">Y'<sub>20</sub></td><td valign="top" align="center">Y'<sub>21</sub></td><td valign="top" align="center">Y'<sub>22</sub></td><td valign="top" align="center">Y'<sub>23</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;12:</td><td valign="top" align="center">Y'<sub>30</sub></td><td valign="top" align="center">Y'<sub>31</sub></td><td valign="top" align="center">Y'<sub>32</sub></td><td valign="top" align="center">Y'<sub>33</sub></td></tr></tbody></table></div><p>
	      </p></div></div><br class="example-break"></div></div><div class="refentry" lang="en"><div class="refentry.separator"><hr></div><a name="V4L2-PIX-FMT-Y16"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p><code class="constant">V4L2_PIX_FMT_Y16</code> — Grey-scale image</p></div><div class="refsect1" lang="en"><a name="id2797992"></a><h2>Description</h2><p>This is a grey-scale image with a depth of 16 bits per
pixel. The least significant byte is stored at lower memory addresses
(little-endian). Note the actual sampling precision may be lower than
16 bits, for example 10 bits per pixel with values in range 0 to
1023.</p><div class="example"><a name="id2797635"></a><p class="title"><b>Example&nbsp;2.8.&nbsp;<code class="constant">V4L2_PIX_FMT_Y16</code> 4 × 4
pixel image</b></p><div class="example-contents"><p><b>Byte Order.&nbsp;</b>Each cell is one byte.
	  </p><div class="informaltable"><table border="0"><colgroup><col align="left"><col><col><col><col><col><col><col><col></colgroup><tbody valign="top"><tr><td valign="top" align="left">start&nbsp;+&nbsp;0:</td><td valign="top" align="center">Y'<sub>00low</sub></td><td valign="top" align="center">Y'<sub>00high</sub></td><td valign="top" align="center">Y'<sub>01low</sub></td><td valign="top" align="center">Y'<sub>01high</sub></td><td valign="top" align="center">Y'<sub>02low</sub></td><td valign="top" align="center">Y'<sub>02high</sub></td><td valign="top" align="center">Y'<sub>03low</sub></td><td valign="top" align="center">Y'<sub>03high</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;8:</td><td valign="top" align="center">Y'<sub>10low</sub></td><td valign="top" align="center">Y'<sub>10high</sub></td><td valign="top" align="center">Y'<sub>11low</sub></td><td valign="top" align="center">Y'<sub>11high</sub></td><td valign="top" align="center">Y'<sub>12low</sub></td><td valign="top" align="center">Y'<sub>12high</sub></td><td valign="top" align="center">Y'<sub>13low</sub></td><td valign="top" align="center">Y'<sub>13high</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;16:</td><td valign="top" align="center">Y'<sub>20low</sub></td><td valign="top" align="center">Y'<sub>20high</sub></td><td valign="top" align="center">Y'<sub>21low</sub></td><td valign="top" align="center">Y'<sub>21high</sub></td><td valign="top" align="center">Y'<sub>22low</sub></td><td valign="top" align="center">Y'<sub>22high</sub></td><td valign="top" align="center">Y'<sub>23low</sub></td><td valign="top" align="center">Y'<sub>23high</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;24:</td><td valign="top" align="center">Y'<sub>30low</sub></td><td valign="top" align="center">Y'<sub>30high</sub></td><td valign="top" align="center">Y'<sub>31low</sub></td><td valign="top" align="center">Y'<sub>31high</sub></td><td valign="top" align="center">Y'<sub>32low</sub></td><td valign="top" align="center">Y'<sub>32high</sub></td><td valign="top" align="center">Y'<sub>33low</sub></td><td valign="top" align="center">Y'<sub>33high</sub></td></tr></tbody></table></div><p>
	</p></div></div><br class="example-break"></div></div><div class="refentry" lang="en"><div class="refentry.separator"><hr></div><a name="V4L2-PIX-FMT-YUYV"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p><code class="constant">V4L2_PIX_FMT_YUYV</code> — Packed format with ½ horizontal chroma
resolution, also known as YUV 4:2:2</p></div><div class="refsect1" lang="en"><a name="id2798369"></a><h2>Description</h2><p>In this format each four bytes is two pixels. Each four
bytes is two Y's, a Cb and a Cr. Each Y goes to one of the pixels, and
the Cb and Cr belong to both pixels. As you can see, the Cr and Cb
components have half the horizontal resolution of the Y component.
<code class="constant">V4L2_PIX_FMT_YUYV </code> is known in the Windows
environment as YUY2.</p><div class="example"><a name="id2798584"></a><p class="title"><b>Example&nbsp;2.9.&nbsp;<code class="constant">V4L2_PIX_FMT_YUYV</code> 4 × 4
pixel image</b></p><div class="example-contents"><p><b>Byte Order.&nbsp;</b>Each cell is one byte.
		</p><div class="informaltable"><table border="0"><colgroup><col align="left"><col><col><col><col><col><col><col><col></colgroup><tbody valign="top"><tr><td valign="top" align="left">start&nbsp;+&nbsp;0:</td><td valign="top" align="center">Y'<sub>00</sub></td><td valign="top" align="center">Cb<sub>00</sub></td><td valign="top" align="center">Y'<sub>01</sub></td><td valign="top" align="center">Cr<sub>00</sub></td><td valign="top" align="center">Y'<sub>02</sub></td><td valign="top" align="center">Cb<sub>01</sub></td><td valign="top" align="center">Y'<sub>03</sub></td><td valign="top" align="center">Cr<sub>01</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;8:</td><td valign="top" align="center">Y'<sub>10</sub></td><td valign="top" align="center">Cb<sub>10</sub></td><td valign="top" align="center">Y'<sub>11</sub></td><td valign="top" align="center">Cr<sub>10</sub></td><td valign="top" align="center">Y'<sub>12</sub></td><td valign="top" align="center">Cb<sub>11</sub></td><td valign="top" align="center">Y'<sub>13</sub></td><td valign="top" align="center">Cr<sub>11</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;16:</td><td valign="top" align="center">Y'<sub>20</sub></td><td valign="top" align="center">Cb<sub>20</sub></td><td valign="top" align="center">Y'<sub>21</sub></td><td valign="top" align="center">Cr<sub>20</sub></td><td valign="top" align="center">Y'<sub>22</sub></td><td valign="top" align="center">Cb<sub>21</sub></td><td valign="top" align="center">Y'<sub>23</sub></td><td valign="top" align="center">Cr<sub>21</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;24:</td><td valign="top" align="center">Y'<sub>30</sub></td><td valign="top" align="center">Cb<sub>30</sub></td><td valign="top" align="center">Y'<sub>31</sub></td><td valign="top" align="center">Cr<sub>30</sub></td><td valign="top" align="center">Y'<sub>32</sub></td><td valign="top" align="center">Cb<sub>31</sub></td><td valign="top" align="center">Y'<sub>33</sub></td><td valign="top" align="center">Cr<sub>31</sub></td></tr></tbody></table></div><p>
	      </p><p><b>Color Sample Location.&nbsp;</b>
		</p><div class="informaltable"><table border="0"><colgroup><col><col><col><col><col><col><col></colgroup><tbody valign="top"><tr><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">0</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">1</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">2</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">3</td></tr><tr><td valign="top" align="center">0</td><td valign="top" align="center">Y</td><td valign="top" align="center">C</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">C</td><td valign="top" align="center">Y</td></tr><tr><td valign="top" align="center">1</td><td valign="top" align="center">Y</td><td valign="top" align="center">C</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">C</td><td valign="top" align="center">Y</td></tr><tr><td valign="top" align="center">2</td><td valign="top" align="center">Y</td><td valign="top" align="center">C</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">C</td><td valign="top" align="center">Y</td></tr><tr><td valign="top" align="center">3</td><td valign="top" align="center">Y</td><td valign="top" align="center">C</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">C</td><td valign="top" align="center">Y</td></tr></tbody></table></div><p>
	      </p></div></div><br class="example-break"></div></div><div class="refentry" lang="en"><div class="refentry.separator"><hr></div><a name="V4L2-PIX-FMT-UYVY"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p><code class="constant">V4L2_PIX_FMT_UYVY</code> — Variation of
<code class="constant">V4L2_PIX_FMT_YUYV</code> with different order of samples
in memory</p></div><div class="refsect1" lang="en"><a name="id2799172"></a><h2>Description</h2><p>In this format each four bytes is two pixels. Each four
bytes is two Y's, a Cb and a Cr. Each Y goes to one of the pixels, and
the Cb and Cr belong to both pixels. As you can see, the Cr and Cb
components have half the horizontal resolution of the Y
component.</p><div class="example"><a name="id2799185"></a><p class="title"><b>Example&nbsp;2.10.&nbsp;<code class="constant">V4L2_PIX_FMT_UYVY</code> 4 × 4
pixel image</b></p><div class="example-contents"><p><b>Byte Order.&nbsp;</b>Each cell is one byte.
		</p><div class="informaltable"><table border="0"><colgroup><col align="left"><col><col><col><col><col><col><col><col></colgroup><tbody valign="top"><tr><td valign="top" align="left">start&nbsp;+&nbsp;0:</td><td valign="top" align="center">Cb<sub>00</sub></td><td valign="top" align="center">Y'<sub>00</sub></td><td valign="top" align="center">Cr<sub>00</sub></td><td valign="top" align="center">Y'<sub>01</sub></td><td valign="top" align="center">Cb<sub>01</sub></td><td valign="top" align="center">Y'<sub>02</sub></td><td valign="top" align="center">Cr<sub>01</sub></td><td valign="top" align="center">Y'<sub>03</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;8:</td><td valign="top" align="center">Cb<sub>10</sub></td><td valign="top" align="center">Y'<sub>10</sub></td><td valign="top" align="center">Cr<sub>10</sub></td><td valign="top" align="center">Y'<sub>11</sub></td><td valign="top" align="center">Cb<sub>11</sub></td><td valign="top" align="center">Y'<sub>12</sub></td><td valign="top" align="center">Cr<sub>11</sub></td><td valign="top" align="center">Y'<sub>13</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;16:</td><td valign="top" align="center">Cb<sub>20</sub></td><td valign="top" align="center">Y'<sub>20</sub></td><td valign="top" align="center">Cr<sub>20</sub></td><td valign="top" align="center">Y'<sub>21</sub></td><td valign="top" align="center">Cb<sub>21</sub></td><td valign="top" align="center">Y'<sub>22</sub></td><td valign="top" align="center">Cr<sub>21</sub></td><td valign="top" align="center">Y'<sub>23</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;24:</td><td valign="top" align="center">Cb<sub>30</sub></td><td valign="top" align="center">Y'<sub>30</sub></td><td valign="top" align="center">Cr<sub>30</sub></td><td valign="top" align="center">Y'<sub>31</sub></td><td valign="top" align="center">Cb<sub>31</sub></td><td valign="top" align="center">Y'<sub>32</sub></td><td valign="top" align="center">Cr<sub>31</sub></td><td valign="top" align="center">Y'<sub>33</sub></td></tr></tbody></table></div><p>
	      </p><p><b>Color Sample Location.&nbsp;</b>
		</p><div class="informaltable"><table border="0"><colgroup><col><col><col><col><col><col><col></colgroup><tbody valign="top"><tr><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">0</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">1</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">2</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">3</td></tr><tr><td valign="top" align="center">0</td><td valign="top" align="center">Y</td><td valign="top" align="center">C</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">C</td><td valign="top" align="center">Y</td></tr><tr><td valign="top" align="center">1</td><td valign="top" align="center">Y</td><td valign="top" align="center">C</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">C</td><td valign="top" align="center">Y</td></tr><tr><td valign="top" align="center">2</td><td valign="top" align="center">Y</td><td valign="top" align="center">C</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">C</td><td valign="top" align="center">Y</td></tr><tr><td valign="top" align="center">3</td><td valign="top" align="center">Y</td><td valign="top" align="center">C</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">C</td><td valign="top" align="center">Y</td></tr></tbody></table></div><p>
	      </p></div></div><br class="example-break"></div></div><div class="refentry" lang="en"><div class="refentry.separator"><hr></div><a name="V4L2-PIX-FMT-YVYU"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p><code class="constant">V4L2_PIX_FMT_YVYU</code> — Variation of
<code class="constant">V4L2_PIX_FMT_YUYV</code> with different order of samples
in memory</p></div><div class="refsect1" lang="en"><a name="id2800093"></a><h2>Description</h2><p>In this format each four bytes is two pixels. Each four
bytes is two Y's, a Cb and a Cr. Each Y goes to one of the pixels, and
the Cb and Cr belong to both pixels. As you can see, the Cr and Cb
components have half the horizontal resolution of the Y
component.</p><div class="example"><a name="id2800106"></a><p class="title"><b>Example&nbsp;2.11.&nbsp;<code class="constant">V4L2_PIX_FMT_YVYU</code> 4 × 4
pixel image</b></p><div class="example-contents"><p><b>Byte Order.&nbsp;</b>Each cell is one byte.
		</p><div class="informaltable"><table border="0"><colgroup><col align="left"><col><col><col><col><col><col><col><col></colgroup><tbody valign="top"><tr><td valign="top" align="left">start&nbsp;+&nbsp;0:</td><td valign="top" align="center">Y'<sub>00</sub></td><td valign="top" align="center">Cr<sub>00</sub></td><td valign="top" align="center">Y'<sub>01</sub></td><td valign="top" align="center">Cb<sub>00</sub></td><td valign="top" align="center">Y'<sub>02</sub></td><td valign="top" align="center">Cr<sub>01</sub></td><td valign="top" align="center">Y'<sub>03</sub></td><td valign="top" align="center">Cb<sub>01</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;8:</td><td valign="top" align="center">Y'<sub>10</sub></td><td valign="top" align="center">Cr<sub>10</sub></td><td valign="top" align="center">Y'<sub>11</sub></td><td valign="top" align="center">Cb<sub>10</sub></td><td valign="top" align="center">Y'<sub>12</sub></td><td valign="top" align="center">Cr<sub>11</sub></td><td valign="top" align="center">Y'<sub>13</sub></td><td valign="top" align="center">Cb<sub>11</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;16:</td><td valign="top" align="center">Y'<sub>20</sub></td><td valign="top" align="center">Cr<sub>20</sub></td><td valign="top" align="center">Y'<sub>21</sub></td><td valign="top" align="center">Cb<sub>20</sub></td><td valign="top" align="center">Y'<sub>22</sub></td><td valign="top" align="center">Cr<sub>21</sub></td><td valign="top" align="center">Y'<sub>23</sub></td><td valign="top" align="center">Cb<sub>21</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;24:</td><td valign="top" align="center">Y'<sub>30</sub></td><td valign="top" align="center">Cr<sub>30</sub></td><td valign="top" align="center">Y'<sub>31</sub></td><td valign="top" align="center">Cb<sub>30</sub></td><td valign="top" align="center">Y'<sub>32</sub></td><td valign="top" align="center">Cr<sub>31</sub></td><td valign="top" align="center">Y'<sub>33</sub></td><td valign="top" align="center">Cb<sub>31</sub></td></tr></tbody></table></div><p>
	      </p><p><b>Color Sample Location.&nbsp;</b>
		</p><div class="informaltable"><table border="0"><colgroup><col><col><col><col><col><col><col></colgroup><tbody valign="top"><tr><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">0</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">1</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">2</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">3</td></tr><tr><td valign="top" align="center">0</td><td valign="top" align="center">Y</td><td valign="top" align="center">C</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">C</td><td valign="top" align="center">Y</td></tr><tr><td valign="top" align="center">1</td><td valign="top" align="center">Y</td><td valign="top" align="center">C</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">C</td><td valign="top" align="center">Y</td></tr><tr><td valign="top" align="center">2</td><td valign="top" align="center">Y</td><td valign="top" align="center">C</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">C</td><td valign="top" align="center">Y</td></tr><tr><td valign="top" align="center">3</td><td valign="top" align="center">Y</td><td valign="top" align="center">C</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">C</td><td valign="top" align="center">Y</td></tr></tbody></table></div><p>
	      </p></div></div><br class="example-break"></div></div><div class="refentry" lang="en"><div class="refentry.separator"><hr></div><a name="V4L2-PIX-FMT-VYUY"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p><code class="constant">V4L2_PIX_FMT_VYUY</code> — Variation of
<code class="constant">V4L2_PIX_FMT_YUYV</code> with different order of samples
in memory</p></div><div class="refsect1" lang="en"><a name="id2801014"></a><h2>Description</h2><p>In this format each four bytes is two pixels. Each four
bytes is two Y's, a Cb and a Cr. Each Y goes to one of the pixels, and
the Cb and Cr belong to both pixels. As you can see, the Cr and Cb
components have half the horizontal resolution of the Y
component.</p><div class="example"><a name="id2801028"></a><p class="title"><b>Example&nbsp;2.12.&nbsp;<code class="constant">V4L2_PIX_FMT_VYUY</code> 4 × 4
pixel image</b></p><div class="example-contents"><p><b>Byte Order.&nbsp;</b>Each cell is one byte.
		</p><div class="informaltable"><table border="0"><colgroup><col align="left"><col><col><col><col><col><col><col><col></colgroup><tbody valign="top"><tr><td valign="top" align="left">start&nbsp;+&nbsp;0:</td><td valign="top" align="center">Cr<sub>00</sub></td><td valign="top" align="center">Y'<sub>00</sub></td><td valign="top" align="center">Cb<sub>00</sub></td><td valign="top" align="center">Y'<sub>01</sub></td><td valign="top" align="center">Cr<sub>01</sub></td><td valign="top" align="center">Y'<sub>02</sub></td><td valign="top" align="center">Cb<sub>01</sub></td><td valign="top" align="center">Y'<sub>03</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;8:</td><td valign="top" align="center">Cr<sub>10</sub></td><td valign="top" align="center">Y'<sub>10</sub></td><td valign="top" align="center">Cb<sub>10</sub></td><td valign="top" align="center">Y'<sub>11</sub></td><td valign="top" align="center">Cr<sub>11</sub></td><td valign="top" align="center">Y'<sub>12</sub></td><td valign="top" align="center">Cb<sub>11</sub></td><td valign="top" align="center">Y'<sub>13</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;16:</td><td valign="top" align="center">Cr<sub>20</sub></td><td valign="top" align="center">Y'<sub>20</sub></td><td valign="top" align="center">Cb<sub>20</sub></td><td valign="top" align="center">Y'<sub>21</sub></td><td valign="top" align="center">Cr<sub>21</sub></td><td valign="top" align="center">Y'<sub>22</sub></td><td valign="top" align="center">Cb<sub>21</sub></td><td valign="top" align="center">Y'<sub>23</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;24:</td><td valign="top" align="center">Cr<sub>30</sub></td><td valign="top" align="center">Y'<sub>30</sub></td><td valign="top" align="center">Cb<sub>30</sub></td><td valign="top" align="center">Y'<sub>31</sub></td><td valign="top" align="center">Cr<sub>31</sub></td><td valign="top" align="center">Y'<sub>32</sub></td><td valign="top" align="center">Cb<sub>31</sub></td><td valign="top" align="center">Y'<sub>33</sub></td></tr></tbody></table></div><p>
	      </p><p><b>Color Sample Location.&nbsp;</b>
		</p><div class="informaltable"><table border="0"><colgroup><col><col><col><col><col><col><col></colgroup><tbody valign="top"><tr><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">0</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">1</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">2</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">3</td></tr><tr><td valign="top" align="center">0</td><td valign="top" align="center">Y</td><td valign="top" align="center">C</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">C</td><td valign="top" align="center">Y</td></tr><tr><td valign="top" align="center">1</td><td valign="top" align="center">Y</td><td valign="top" align="center">C</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">C</td><td valign="top" align="center">Y</td></tr><tr><td valign="top" align="center">2</td><td valign="top" align="center">Y</td><td valign="top" align="center">C</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">C</td><td valign="top" align="center">Y</td></tr><tr><td valign="top" align="center">3</td><td valign="top" align="center">Y</td><td valign="top" align="center">C</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">C</td><td valign="top" align="center">Y</td></tr></tbody></table></div><p>
	      </p></div></div><br class="example-break"></div></div><div class="refentry" lang="en"><div class="refentry.separator"><hr></div><a name="V4L2-PIX-FMT-Y41P"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p><code class="constant">V4L2_PIX_FMT_Y41P</code> — Format with ¼ horizontal chroma
resolution, also known as YUV 4:1:1</p></div><div class="refsect1" lang="en"><a name="id2801928"></a><h2>Description</h2><p>In this format each 12 bytes is eight pixels. In the
twelve bytes are two CbCr pairs and eight Y's. The first CbCr pair
goes with the first four Y's, and the second CbCr pair goes with the
other four Y's. The Cb and Cr components have one fourth the
horizontal resolution of the Y component.</p><p>Do not confuse this format with <a class="link" href="#V4L2-PIX-FMT-YUV411P" title="V4L2_PIX_FMT_YUV411P ('411P')"><code class="constant">V4L2_PIX_FMT_YUV411P</code></a>.
Y41P is derived from "YUV 4:1:1 <span class="emphasis"><em>packed</em></span>", while
YUV411P stands for "YUV 4:1:1 <span class="emphasis"><em>planar</em></span>".</p><div class="example"><a name="id2802002"></a><p class="title"><b>Example&nbsp;2.13.&nbsp;<code class="constant">V4L2_PIX_FMT_Y41P</code> 8 × 4
pixel image</b></p><div class="example-contents"><p><b>Byte Order.&nbsp;</b>Each cell is one byte.
		</p><div class="informaltable"><table border="0"><colgroup><col align="left"><col><col><col><col><col><col><col><col><col><col><col><col></colgroup><tbody valign="top"><tr><td valign="top" align="left">start&nbsp;+&nbsp;0:</td><td valign="top" align="center">Cb<sub>00</sub></td><td valign="top" align="center">Y'<sub>00</sub></td><td valign="top" align="center">Cr<sub>00</sub></td><td valign="top" align="center">Y'<sub>01</sub></td><td valign="top" align="center">Cb<sub>01</sub></td><td valign="top" align="center">Y'<sub>02</sub></td><td valign="top" align="center">Cr<sub>01</sub></td><td valign="top" align="center">Y'<sub>03</sub></td><td valign="top" align="center">Y'<sub>04</sub></td><td valign="top" align="center">Y'<sub>05</sub></td><td valign="top" align="center">Y'<sub>06</sub></td><td valign="top" align="center">Y'<sub>07</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;12:</td><td valign="top" align="center">Cb<sub>10</sub></td><td valign="top" align="center">Y'<sub>10</sub></td><td valign="top" align="center">Cr<sub>10</sub></td><td valign="top" align="center">Y'<sub>11</sub></td><td valign="top" align="center">Cb<sub>11</sub></td><td valign="top" align="center">Y'<sub>12</sub></td><td valign="top" align="center">Cr<sub>11</sub></td><td valign="top" align="center">Y'<sub>13</sub></td><td valign="top" align="center">Y'<sub>14</sub></td><td valign="top" align="center">Y'<sub>15</sub></td><td valign="top" align="center">Y'<sub>16</sub></td><td valign="top" align="center">Y'<sub>17</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;24:</td><td valign="top" align="center">Cb<sub>20</sub></td><td valign="top" align="center">Y'<sub>20</sub></td><td valign="top" align="center">Cr<sub>20</sub></td><td valign="top" align="center">Y'<sub>21</sub></td><td valign="top" align="center">Cb<sub>21</sub></td><td valign="top" align="center">Y'<sub>22</sub></td><td valign="top" align="center">Cr<sub>21</sub></td><td valign="top" align="center">Y'<sub>23</sub></td><td valign="top" align="center">Y'<sub>24</sub></td><td valign="top" align="center">Y'<sub>25</sub></td><td valign="top" align="center">Y'<sub>26</sub></td><td valign="top" align="center">Y'<sub>27</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;36:</td><td valign="top" align="center">Cb<sub>30</sub></td><td valign="top" align="center">Y'<sub>30</sub></td><td valign="top" align="center">Cr<sub>30</sub></td><td valign="top" align="center">Y'<sub>31</sub></td><td valign="top" align="center">Cb<sub>31</sub></td><td valign="top" align="center">Y'<sub>32</sub></td><td valign="top" align="center">Cr<sub>31</sub></td><td valign="top" align="center">Y'<sub>33</sub></td><td valign="top" align="center">Y'<sub>34</sub></td><td valign="top" align="center">Y'<sub>35</sub></td><td valign="top" align="center">Y'<sub>36</sub></td><td valign="top" align="center">Y'<sub>37</sub></td></tr></tbody></table></div><p><b>Color Sample Location.&nbsp;</b>
		</p><div class="informaltable"><table border="0"><colgroup><col><col><col><col><col><col><col><col><col><col><col><col><col><col><col></colgroup><tbody valign="top"><tr><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">0</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">1</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">2</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">3</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">4</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">5</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">6</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">7</td></tr><tr><td valign="top" align="center">0</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">C</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">C</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td></tr><tr><td valign="top" align="center">1</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">C</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">C</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td></tr><tr><td valign="top" align="center">2</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">C</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">C</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td></tr><tr><td valign="top" align="center">3</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">C</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">C</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td></tr></tbody></table></div><p>
	      </p></div></div><br class="example-break"></div></div><div class="refentry" lang="en"><div class="refentry.separator"><hr></div><a name="id2804176"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p><code class="constant">V4L2_PIX_FMT_YVU420</code>, <code class="constant">V4L2_PIX_FMT_YUV420</code> — Planar formats with ½ horizontal and
vertical chroma resolution, also known as YUV 4:2:0</p></div><div class="refsect1" lang="en"><a name="id2803582"></a><h2>Description</h2><p>These are planar formats, as opposed to a packed format.
The three components are separated into three sub- images or planes.
The Y plane is first. The Y plane has one byte per pixel. For
<code class="constant">V4L2_PIX_FMT_YVU420</code>, the Cr plane immediately
follows the Y plane in memory. The Cr plane is half the width and half
the height of the Y plane (and of the image). Each Cr belongs to four
pixels, a two-by-two square of the image. For example,
Cr<sub>0</sub> belongs to Y'<sub>00</sub>,
Y'<sub>01</sub>, Y'<sub>10</sub>, and
Y'<sub>11</sub>. Following the Cr plane is the Cb plane,
just like the Cr plane. <code class="constant">V4L2_PIX_FMT_YUV420</code> is
the same except the Cb plane comes first, then the Cr plane.</p><p>If the Y plane has pad bytes after each row, then the Cr
and Cb planes have half as many pad bytes after their rows. In other
words, two Cx rows (including padding) is exactly as long as one Y row
(including padding).</p><div class="example"><a name="id2804236"></a><p class="title"><b>Example&nbsp;2.14.&nbsp;<code class="constant">V4L2_PIX_FMT_YVU420</code> 4 × 4
pixel image</b></p><div class="example-contents"><p><b>Byte Order.&nbsp;</b>Each cell is one byte.
		</p><div class="informaltable"><table border="0"><colgroup><col align="left"><col><col><col><col></colgroup><tbody valign="top"><tr><td valign="top" align="left">start&nbsp;+&nbsp;0:</td><td valign="top" align="center">Y'<sub>00</sub></td><td valign="top" align="center">Y'<sub>01</sub></td><td valign="top" align="center">Y'<sub>02</sub></td><td valign="top" align="center">Y'<sub>03</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;4:</td><td valign="top" align="center">Y'<sub>10</sub></td><td valign="top" align="center">Y'<sub>11</sub></td><td valign="top" align="center">Y'<sub>12</sub></td><td valign="top" align="center">Y'<sub>13</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;8:</td><td valign="top" align="center">Y'<sub>20</sub></td><td valign="top" align="center">Y'<sub>21</sub></td><td valign="top" align="center">Y'<sub>22</sub></td><td valign="top" align="center">Y'<sub>23</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;12:</td><td valign="top" align="center">Y'<sub>30</sub></td><td valign="top" align="center">Y'<sub>31</sub></td><td valign="top" align="center">Y'<sub>32</sub></td><td valign="top" align="center">Y'<sub>33</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;16:</td><td valign="top" align="center">Cr<sub>00</sub></td><td valign="top" align="center">Cr<sub>01</sub></td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;18:</td><td valign="top" align="center">Cr<sub>10</sub></td><td valign="top" align="center">Cr<sub>11</sub></td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;20:</td><td valign="top" align="center">Cb<sub>00</sub></td><td valign="top" align="center">Cb<sub>01</sub></td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;22:</td><td valign="top" align="center">Cb<sub>10</sub></td><td valign="top" align="center">Cb<sub>11</sub></td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr></tbody></table></div><p>
	      </p><p><b>Color Sample Location.&nbsp;</b>
		</p><div class="informaltable"><table border="0"><colgroup><col><col><col><col><col><col><col></colgroup><tbody valign="top"><tr><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">0</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">1</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">2</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">3</td></tr><tr><td valign="top" align="center">0</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td></tr><tr><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">C</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">C</td><td valign="top" align="center">&nbsp;</td></tr><tr><td valign="top" align="center">1</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td></tr><tr><td valign="top" align="center">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td valign="top" align="center">2</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td></tr><tr><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">C</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">C</td><td valign="top" align="center">&nbsp;</td></tr><tr><td valign="top" align="center">3</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td></tr></tbody></table></div><p>
	      </p></div></div><br class="example-break"></div></div><div class="refentry" lang="en"><div class="refentry.separator"><hr></div><a name="id2805212"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p><code class="constant">V4L2_PIX_FMT_YVU410</code>, <code class="constant">V4L2_PIX_FMT_YUV410</code> — Planar formats with ¼ horizontal and
vertical chroma resolution, also known as YUV 4:1:0</p></div><div class="refsect1" lang="en"><a name="id2804145"></a><h2>Description</h2><p>These are planar formats, as opposed to a packed format.
The three components are separated into three sub-images or planes.
The Y plane is first. The Y plane has one byte per pixel. For
<code class="constant">V4L2_PIX_FMT_YVU410</code>, the Cr plane immediately
follows the Y plane in memory. The Cr plane is ¼ the width and
¼ the height of the Y plane (and of the image). Each Cr belongs
to 16 pixels, a four-by-four square of the image. Following the Cr
plane is the Cb plane, just like the Cr plane.
<code class="constant">V4L2_PIX_FMT_YUV410</code> is the same, except the Cb
plane comes first, then the Cr plane.</p><p>If the Y plane has pad bytes after each row, then the Cr
and Cb planes have ¼ as many pad bytes after their rows. In
other words, four Cx rows (including padding) are exactly as long as
one Y row (including padding).</p><div class="example"><a name="id2805248"></a><p class="title"><b>Example&nbsp;2.15.&nbsp;<code class="constant">V4L2_PIX_FMT_YVU410</code> 4 × 4
pixel image</b></p><div class="example-contents"><p><b>Byte Order.&nbsp;</b>Each cell is one byte.
		</p><div class="informaltable"><table border="0"><colgroup><col align="left"><col><col><col><col></colgroup><tbody valign="top"><tr><td valign="top" align="left">start&nbsp;+&nbsp;0:</td><td valign="top" align="center">Y'<sub>00</sub></td><td valign="top" align="center">Y'<sub>01</sub></td><td valign="top" align="center">Y'<sub>02</sub></td><td valign="top" align="center">Y'<sub>03</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;4:</td><td valign="top" align="center">Y'<sub>10</sub></td><td valign="top" align="center">Y'<sub>11</sub></td><td valign="top" align="center">Y'<sub>12</sub></td><td valign="top" align="center">Y'<sub>13</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;8:</td><td valign="top" align="center">Y'<sub>20</sub></td><td valign="top" align="center">Y'<sub>21</sub></td><td valign="top" align="center">Y'<sub>22</sub></td><td valign="top" align="center">Y'<sub>23</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;12:</td><td valign="top" align="center">Y'<sub>30</sub></td><td valign="top" align="center">Y'<sub>31</sub></td><td valign="top" align="center">Y'<sub>32</sub></td><td valign="top" align="center">Y'<sub>33</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;16:</td><td valign="top" align="center">Cr<sub>00</sub></td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;17:</td><td valign="top" align="center">Cb<sub>00</sub></td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr></tbody></table></div><p>
	      </p><p><b>Color Sample Location.&nbsp;</b>
		</p><div class="informaltable"><table border="0"><colgroup><col><col><col><col><col><col><col></colgroup><tbody valign="top"><tr><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">0</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">1</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">2</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">3</td></tr><tr><td valign="top" align="center">0</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td></tr><tr><td valign="top" align="center">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td valign="top" align="center">1</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td></tr><tr><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">C</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">&nbsp;</td></tr><tr><td valign="top" align="center">2</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td></tr><tr><td valign="top" align="center">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td valign="top" align="center">3</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td></tr></tbody></table></div><p>
	      </p></div></div><br class="example-break"></div></div><div class="refentry" lang="en"><div class="refentry.separator"><hr></div><a name="V4L2-PIX-FMT-YUV422P"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p><code class="constant">V4L2_PIX_FMT_YUV422P</code> — Format with ½ horizontal chroma resolution,
also known as YUV 4:2:2. Planar layout as opposed to
<code class="constant">V4L2_PIX_FMT_YUYV</code></p></div><div class="refsect1" lang="en"><a name="id2805094"></a><h2>Description</h2><p>This format is not commonly used. This is a planar
version of the YUYV format. The three components are separated into
three sub-images or planes. The Y plane is first. The Y plane has one
byte per pixel. The Cb plane immediately follows the Y plane in
memory. The Cb plane is half the width of the Y plane (and of the
image). Each Cb belongs to two pixels. For example,
Cb<sub>0</sub> belongs to Y'<sub>00</sub>,
Y'<sub>01</sub>. Following the Cb plane is the Cr plane,
just like the Cb plane.</p><p>If the Y plane has pad bytes after each row, then the Cr
and Cb planes have half as many pad bytes after their rows. In other
words, two Cx rows (including padding) is exactly as long as one Y row
(including padding).</p><div class="example"><a name="id2805168"></a><p class="title"><b>Example&nbsp;2.16.&nbsp;<code class="constant">V4L2_PIX_FMT_YUV422P</code> 4 × 4
pixel image</b></p><div class="example-contents"><p><b>Byte Order.&nbsp;</b>Each cell is one byte.
		</p><div class="informaltable"><table border="0"><colgroup><col align="left"><col><col><col><col></colgroup><tbody valign="top"><tr><td valign="top" align="left">start&nbsp;+&nbsp;0:</td><td valign="top" align="center">Y'<sub>00</sub></td><td valign="top" align="center">Y'<sub>01</sub></td><td valign="top" align="center">Y'<sub>02</sub></td><td valign="top" align="center">Y'<sub>03</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;4:</td><td valign="top" align="center">Y'<sub>10</sub></td><td valign="top" align="center">Y'<sub>11</sub></td><td valign="top" align="center">Y'<sub>12</sub></td><td valign="top" align="center">Y'<sub>13</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;8:</td><td valign="top" align="center">Y'<sub>20</sub></td><td valign="top" align="center">Y'<sub>21</sub></td><td valign="top" align="center">Y'<sub>22</sub></td><td valign="top" align="center">Y'<sub>23</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;12:</td><td valign="top" align="center">Y'<sub>30</sub></td><td valign="top" align="center">Y'<sub>31</sub></td><td valign="top" align="center">Y'<sub>32</sub></td><td valign="top" align="center">Y'<sub>33</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;16:</td><td valign="top" align="center">Cb<sub>00</sub></td><td valign="top" align="center">Cb<sub>01</sub></td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;18:</td><td valign="top" align="center">Cb<sub>10</sub></td><td valign="top" align="center">Cb<sub>11</sub></td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;20:</td><td valign="top" align="center">Cb<sub>20</sub></td><td valign="top" align="center">Cb<sub>21</sub></td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;22:</td><td valign="top" align="center">Cb<sub>30</sub></td><td valign="top" align="center">Cb<sub>31</sub></td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;24:</td><td valign="top" align="center">Cr<sub>00</sub></td><td valign="top" align="center">Cr<sub>01</sub></td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;26:</td><td valign="top" align="center">Cr<sub>10</sub></td><td valign="top" align="center">Cr<sub>11</sub></td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;28:</td><td valign="top" align="center">Cr<sub>20</sub></td><td valign="top" align="center">Cr<sub>21</sub></td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;30:</td><td valign="top" align="center">Cr<sub>30</sub></td><td valign="top" align="center">Cr<sub>31</sub></td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr></tbody></table></div><p>
	      </p><p><b>Color Sample Location.&nbsp;</b>
		</p><div class="informaltable"><table border="0"><colgroup><col><col><col><col><col><col><col></colgroup><tbody valign="top"><tr><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">0</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">1</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">2</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">3</td></tr><tr><td valign="top" align="center">0</td><td valign="top" align="center">Y</td><td valign="top" align="center">C</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">C</td><td valign="top" align="center">Y</td></tr><tr><td valign="top" align="center">1</td><td valign="top" align="center">Y</td><td valign="top" align="center">C</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">C</td><td valign="top" align="center">Y</td></tr><tr><td valign="top" align="center">2</td><td valign="top" align="center">Y</td><td valign="top" align="center">C</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">C</td><td valign="top" align="center">Y</td></tr><tr><td valign="top" align="center">3</td><td valign="top" align="center">Y</td><td valign="top" align="center">C</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">C</td><td valign="top" align="center">Y</td></tr></tbody></table></div><p>
	      </p></div></div><br class="example-break"></div></div><div class="refentry" lang="en"><div class="refentry.separator"><hr></div><a name="V4L2-PIX-FMT-YUV411P"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p><code class="constant">V4L2_PIX_FMT_YUV411P</code> — Format with ¼ horizontal chroma resolution,
also known as YUV 4:1:1. Planar layout as opposed to
<code class="constant">V4L2_PIX_FMT_Y41P</code></p></div><div class="refsect1" lang="en"><a name="id2806594"></a><h2>Description</h2><p>This format is not commonly used. This is a planar
format similar to the 4:2:2 planar format except with half as many
chroma. The three components are separated into three sub-images or
planes. The Y plane is first. The Y plane has one byte per pixel. The
Cb plane immediately follows the Y plane in memory. The Cb plane is
¼ the width of the Y plane (and of the image). Each Cb belongs
to 4 pixels all on the same row. For example,
Cb<sub>0</sub> belongs to Y'<sub>00</sub>,
Y'<sub>01</sub>, Y'<sub>02</sub> and
Y'<sub>03</sub>. Following the Cb plane is the Cr plane,
just like the Cb plane.</p><p>If the Y plane has pad bytes after each row, then the Cr
and Cb planes have ¼ as many pad bytes after their rows. In
other words, four C x rows (including padding) is exactly as long as
one Y row (including padding).</p><div class="example"><a name="id2807201"></a><p class="title"><b>Example&nbsp;2.17.&nbsp;<code class="constant">V4L2_PIX_FMT_YUV411P</code> 4 × 4
pixel image</b></p><div class="example-contents"><p><b>Byte Order.&nbsp;</b>Each cell is one byte.
		</p><div class="informaltable"><table border="0"><colgroup><col align="left"><col><col><col><col></colgroup><tbody valign="top"><tr><td valign="top" align="left">start&nbsp;+&nbsp;0:</td><td valign="top" align="center">Y'<sub>00</sub></td><td valign="top" align="center">Y'<sub>01</sub></td><td valign="top" align="center">Y'<sub>02</sub></td><td valign="top" align="center">Y'<sub>03</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;4:</td><td valign="top" align="center">Y'<sub>10</sub></td><td valign="top" align="center">Y'<sub>11</sub></td><td valign="top" align="center">Y'<sub>12</sub></td><td valign="top" align="center">Y'<sub>13</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;8:</td><td valign="top" align="center">Y'<sub>20</sub></td><td valign="top" align="center">Y'<sub>21</sub></td><td valign="top" align="center">Y'<sub>22</sub></td><td valign="top" align="center">Y'<sub>23</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;12:</td><td valign="top" align="center">Y'<sub>30</sub></td><td valign="top" align="center">Y'<sub>31</sub></td><td valign="top" align="center">Y'<sub>32</sub></td><td valign="top" align="center">Y'<sub>33</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;16:</td><td valign="top" align="center">Cb<sub>00</sub></td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;17:</td><td valign="top" align="center">Cb<sub>10</sub></td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;18:</td><td valign="top" align="center">Cb<sub>20</sub></td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;19:</td><td valign="top" align="center">Cb<sub>30</sub></td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;20:</td><td valign="top" align="center">Cr<sub>00</sub></td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;21:</td><td valign="top" align="center">Cr<sub>10</sub></td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;22:</td><td valign="top" align="center">Cr<sub>20</sub></td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;23:</td><td valign="top" align="center">Cr<sub>30</sub></td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr></tbody></table></div><p>
	      </p><p><b>Color Sample Location.&nbsp;</b>
		</p><div class="informaltable"><table border="0"><colgroup><col><col><col><col><col><col><col></colgroup><tbody valign="top"><tr><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">0</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">1</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">2</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">3</td></tr><tr><td valign="top" align="center">0</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">C</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td></tr><tr><td valign="top" align="center">1</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">C</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td></tr><tr><td valign="top" align="center">2</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">C</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td></tr><tr><td valign="top" align="center">3</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">C</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td></tr></tbody></table></div><p>
	      </p></div></div><br class="example-break"></div></div><div class="refentry" lang="en"><div class="refentry.separator"><hr></div><a name="id2807164"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p><code class="constant">V4L2_PIX_FMT_NV12</code>, <code class="constant">V4L2_PIX_FMT_NV21</code> — Formats with ½ horizontal and vertical
chroma resolution, also known as YUV 4:2:0. One luminance and one
chrominance plane with alternating chroma samples as opposed to
<code class="constant">V4L2_PIX_FMT_YVU420</code></p></div><div class="refsect1" lang="en"><a name="id2807119"></a><h2>Description</h2><p>These are two-plane versions of the YUV 4:2:0 format.
The three components are separated into two sub-images or planes. The
Y plane is first. The Y plane has one byte per pixel. For
<code class="constant">V4L2_PIX_FMT_NV12</code>, a combined CbCr plane
immediately follows the Y plane in memory.  The CbCr plane is the same
width, in bytes, as the Y plane (and of the image), but is half as
tall in pixels. Each CbCr pair belongs to four pixels. For example,
Cb<sub>0</sub>/Cr<sub>0</sub> belongs to
Y'<sub>00</sub>, Y'<sub>01</sub>,
Y'<sub>10</sub>, Y'<sub>11</sub>.
<code class="constant">V4L2_PIX_FMT_NV21</code> is the same except the Cb and
Cr bytes are swapped, the CrCb plane starts with a Cr byte.</p><p>If the Y plane has pad bytes after each row, then the
CbCr plane has as many pad bytes after its rows.</p><div class="example"><a name="id2808213"></a><p class="title"><b>Example&nbsp;2.18.&nbsp;<code class="constant">V4L2_PIX_FMT_NV12</code> 4 × 4
pixel image</b></p><div class="example-contents"><p><b>Byte Order.&nbsp;</b>Each cell is one byte.
		</p><div class="informaltable"><table border="0"><colgroup><col align="left"><col><col><col><col></colgroup><tbody valign="top"><tr><td valign="top" align="left">start&nbsp;+&nbsp;0:</td><td valign="top" align="center">Y'<sub>00</sub></td><td valign="top" align="center">Y'<sub>01</sub></td><td valign="top" align="center">Y'<sub>02</sub></td><td valign="top" align="center">Y'<sub>03</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;4:</td><td valign="top" align="center">Y'<sub>10</sub></td><td valign="top" align="center">Y'<sub>11</sub></td><td valign="top" align="center">Y'<sub>12</sub></td><td valign="top" align="center">Y'<sub>13</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;8:</td><td valign="top" align="center">Y'<sub>20</sub></td><td valign="top" align="center">Y'<sub>21</sub></td><td valign="top" align="center">Y'<sub>22</sub></td><td valign="top" align="center">Y'<sub>23</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;12:</td><td valign="top" align="center">Y'<sub>30</sub></td><td valign="top" align="center">Y'<sub>31</sub></td><td valign="top" align="center">Y'<sub>32</sub></td><td valign="top" align="center">Y'<sub>33</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;16:</td><td valign="top" align="center">Cb<sub>00</sub></td><td valign="top" align="center">Cr<sub>00</sub></td><td valign="top" align="center">Cb<sub>01</sub></td><td valign="top" align="center">Cr<sub>01</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;20:</td><td valign="top" align="center">Cb<sub>10</sub></td><td valign="top" align="center">Cr<sub>10</sub></td><td valign="top" align="center">Cb<sub>11</sub></td><td valign="top" align="center">Cr<sub>11</sub></td></tr></tbody></table></div><p>
	      </p><p><b>Color Sample Location.&nbsp;</b>
		</p><div class="informaltable"><table border="0"><colgroup><col><col><col><col><col><col><col></colgroup><tbody valign="top"><tr><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">0</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">1</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">2</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">3</td></tr><tr><td valign="top" align="center">0</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td></tr><tr><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">C</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">C</td><td valign="top" align="center">&nbsp;</td></tr><tr><td valign="top" align="center">1</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td></tr><tr><td valign="top" align="center">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td valign="top" align="center">2</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td></tr><tr><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">C</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">C</td><td valign="top" align="center">&nbsp;</td></tr><tr><td valign="top" align="center">3</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td></tr></tbody></table></div><p>
	      </p></div></div><br class="example-break"></div></div><div class="refentry" lang="en"><div class="refentry.separator"><hr></div><a name="id2808162"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p><code class="constant">V4L2_PIX_FMT_NV16</code>, <code class="constant">V4L2_PIX_FMT_NV61</code> — Formats with ½ horizontal
chroma resolution, also known as YUV 4:2:2. One luminance and one
chrominance plane with alternating chroma samples as opposed to
<code class="constant">V4L2_PIX_FMT_YVU420</code></p></div><div class="refsect1" lang="en"><a name="id2809178"></a><h2>Description</h2><p>These are two-plane versions of the YUV 4:2:2 format.
The three components are separated into two sub-images or planes. The
Y plane is first. The Y plane has one byte per pixel. For
<code class="constant">V4L2_PIX_FMT_NV16</code>, a combined CbCr plane
immediately follows the Y plane in memory.  The CbCr plane is the same
width and height, in bytes, as the Y plane (and of the image).
Each CbCr pair belongs to two pixels. For example,
Cb<sub>0</sub>/Cr<sub>0</sub> belongs to
Y'<sub>00</sub>, Y'<sub>01</sub>.
<code class="constant">V4L2_PIX_FMT_NV61</code> is the same except the Cb and
Cr bytes are swapped, the CrCb plane starts with a Cr byte.</p><p>If the Y plane has pad bytes after each row, then the
CbCr plane has as many pad bytes after its rows.</p><div class="example"><a name="id2809220"></a><p class="title"><b>Example&nbsp;2.19.&nbsp;<code class="constant">V4L2_PIX_FMT_NV16</code> 4 × 4
pixel image</b></p><div class="example-contents"><p><b>Byte Order.&nbsp;</b>Each cell is one byte.
		</p><div class="informaltable"><table border="0"><colgroup><col align="left"><col><col><col><col></colgroup><tbody valign="top"><tr><td valign="top" align="left">start&nbsp;+&nbsp;0:</td><td valign="top" align="center">Y'<sub>00</sub></td><td valign="top" align="center">Y'<sub>01</sub></td><td valign="top" align="center">Y'<sub>02</sub></td><td valign="top" align="center">Y'<sub>03</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;4:</td><td valign="top" align="center">Y'<sub>10</sub></td><td valign="top" align="center">Y'<sub>11</sub></td><td valign="top" align="center">Y'<sub>12</sub></td><td valign="top" align="center">Y'<sub>13</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;8:</td><td valign="top" align="center">Y'<sub>20</sub></td><td valign="top" align="center">Y'<sub>21</sub></td><td valign="top" align="center">Y'<sub>22</sub></td><td valign="top" align="center">Y'<sub>23</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;12:</td><td valign="top" align="center">Y'<sub>30</sub></td><td valign="top" align="center">Y'<sub>31</sub></td><td valign="top" align="center">Y'<sub>32</sub></td><td valign="top" align="center">Y'<sub>33</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;16:</td><td valign="top" align="center">Cb<sub>00</sub></td><td valign="top" align="center">Cr<sub>00</sub></td><td valign="top" align="center">Cb<sub>01</sub></td><td valign="top" align="center">Cr<sub>01</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;20:</td><td valign="top" align="center">Cb<sub>10</sub></td><td valign="top" align="center">Cr<sub>10</sub></td><td valign="top" align="center">Cb<sub>11</sub></td><td valign="top" align="center">Cr<sub>11</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;24:</td><td valign="top" align="center">Cb<sub>20</sub></td><td valign="top" align="center">Cr<sub>20</sub></td><td valign="top" align="center">Cb<sub>21</sub></td><td valign="top" align="center">Cr<sub>21</sub></td></tr><tr><td valign="top" align="left">start&nbsp;+&nbsp;28:</td><td valign="top" align="center">Cb<sub>30</sub></td><td valign="top" align="center">Cr<sub>30</sub></td><td valign="top" align="center">Cb<sub>31</sub></td><td valign="top" align="center">Cr<sub>31</sub></td></tr></tbody></table></div><p>
	      </p><p><b>Color Sample Location.&nbsp;</b>
		</p><div class="informaltable"><table border="0"><colgroup><col><col><col><col><col><col><col></colgroup><tbody valign="top"><tr><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">0</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">1</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">2</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">3</td></tr><tr><td valign="top" align="center">0</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td></tr><tr><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">C</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">C</td><td valign="top" align="center">&nbsp;</td></tr><tr><td valign="top" align="center">1</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td></tr><tr><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">C</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">C</td><td valign="top" align="center">&nbsp;</td></tr><tr><td valign="top" align="center">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td valign="top" align="center">2</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td></tr><tr><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">C</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">C</td><td valign="top" align="center">&nbsp;</td></tr><tr><td valign="top" align="center">3</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">Y</td></tr><tr><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">C</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">&nbsp;</td><td valign="top" align="center">C</td><td valign="top" align="center">&nbsp;</td></tr></tbody></table></div><p>
	      </p></div></div><br class="example-break"></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id2809728"></a>2.6.&nbsp;Compressed Formats</h2></div></div></div><div class="table"><a name="compressed-formats"></a><p class="title"><b>Table&nbsp;2.7.&nbsp;Compressed Image Formats</b></p><div class="table-contents"><table summary="Compressed Image Formats" width="100%" border="0"><colgroup><col align="left"><col align="left"><col align="left"></colgroup><thead><tr><th align="left">Identifier</th><th align="left">Code</th><th align="left">Details</th></tr></thead><tbody valign="top"><tr><td valign="top" align="left"><a name="V4L2-PIX-FMT-JPEG"></a><code class="constant">V4L2_PIX_FMT_JPEG</code></td><td valign="top" align="left">'JPEG'</td><td valign="top" align="left">TBD. See also <a class="link" href="#vidioc-g-jpegcomp" title="ioctl VIDIOC_G_JPEGCOMP, VIDIOC_S_JPEGCOMP"><code class="constant">VIDIOC_G_JPEGCOMP</code></a>,
	    <a class="link" href="#vidioc-g-jpegcomp" title="ioctl VIDIOC_G_JPEGCOMP, VIDIOC_S_JPEGCOMP"><code class="constant">VIDIOC_S_JPEGCOMP</code></a>.</td></tr><tr><td valign="top" align="left"><a name="V4L2-PIX-FMT-MPEG"></a><code class="constant">V4L2_PIX_FMT_MPEG</code></td><td valign="top" align="left">'MPEG'</td><td valign="top" align="left">MPEG stream. The actual format is determined by
extended control <code class="constant">V4L2_CID_MPEG_STREAM_TYPE</code>, see
<a class="xref" href="#mpeg-control-id" title="Table&nbsp;1.2.&nbsp;MPEG Control IDs">Table&nbsp;1.2, “MPEG Control IDs”</a>.</td></tr></tbody></table></div></div><br class="table-break"></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="pixfmt-reserved"></a>2.7.&nbsp;Reserved Format Identifiers</h2></div></div></div><p>These formats are not defined by this specification, they
are just listed for reference and to avoid naming conflicts. If you
want to register your own format, send an e-mail to the linux-media mailing
list <a class="ulink" href="https://www.linuxtv.org/lists.php" target="_top">https://linuxtv.org/lists.php</a> for inclusion in the <code class="filename">videodev2.h</code>
file. If you want to share your format with other developers add a
link to your documentation and send a copy to the linux-media mailing list
for inclusion in this section. If you think your format should be listed
in a standard format section please make a proposal on the linux-media mailing
list.</p><div class="table"><a name="reserved-formats"></a><p class="title"><b>Table&nbsp;2.8.&nbsp;Reserved Image Formats</b></p><div class="table-contents"><table summary="Reserved Image Formats" width="100%" border="0"><colgroup><col align="left"><col align="left"><col align="left"></colgroup><thead><tr><th align="left">Identifier</th><th align="left">Code</th><th align="left">Details</th></tr></thead><tbody valign="top"><tr><td valign="top" align="left"><a name="V4L2-PIX-FMT-DV"></a><code class="constant">V4L2_PIX_FMT_DV</code></td><td valign="top" align="left">'dvsd'</td><td valign="top" align="left">unknown</td></tr><tr><td valign="top" align="left"><a name="V4L2-PIX-FMT-ET61X251"></a><code class="constant">V4L2_PIX_FMT_ET61X251</code></td><td valign="top" align="left">'E625'</td><td valign="top" align="left">Compressed format of the ET61X251 driver.</td></tr><tr><td valign="top" align="left"><a name="V4L2-PIX-FMT-HI240"></a><code class="constant">V4L2_PIX_FMT_HI240</code></td><td valign="top" align="left">'HI24'</td><td valign="top" align="left"><p>8 bit RGB format used by the BTTV driver.</p></td></tr><tr><td valign="top" align="left"><a name="V4L2-PIX-FMT-HM12"></a><code class="constant">V4L2_PIX_FMT_HM12</code></td><td valign="top" align="left">'HM12'</td><td valign="top" align="left"><p>YUV 4:2:0 format used by the
IVTV driver, <a class="ulink" href="http://www.ivtvdriver.org/" target="_top">
http://www.ivtvdriver.org/</a></p><p>The format is documented in the
kernel sources in the file <code class="filename">Documentation/video4linux/cx2341x/README.hm12</code>
</p></td></tr><tr><td valign="top" align="left"><a name="V4L2-PIX-FMT-SPCA501"></a><code class="constant">V4L2_PIX_FMT_SPCA501</code></td><td valign="top" align="left">'S501'</td><td valign="top" align="left">YUYV per line used by the gspca driver.</td></tr><tr><td valign="top" align="left"><a name="V4L2-PIX-FMT-SPCA505"></a><code class="constant">V4L2_PIX_FMT_SPCA505</code></td><td valign="top" align="left">'S505'</td><td valign="top" align="left">YYUV per line used by the gspca driver.</td></tr><tr><td valign="top" align="left"><a name="V4L2-PIX-FMT-SPCA508"></a><code class="constant">V4L2_PIX_FMT_SPCA508</code></td><td valign="top" align="left">'S508'</td><td valign="top" align="left">YUVY per line used by the gspca driver.</td></tr><tr><td valign="top" align="left"><a name="V4L2-PIX-FMT-SPCA561"></a><code class="constant">V4L2_PIX_FMT_SPCA561</code></td><td valign="top" align="left">'S561'</td><td valign="top" align="left">Compressed GBRG Bayer format used by the gspca driver.</td></tr><tr><td valign="top" align="left"><a name="V4L2-PIX-FMT-SGRBG10"></a><code class="constant">V4L2_PIX_FMT_SGRBG10</code></td><td valign="top" align="left">'DA10'</td><td valign="top" align="left">10 bit raw Bayer, expanded to 16 bits.</td></tr><tr><td valign="top" align="left"><a name="V4L2-PIX-FMT-SGRBG10DPCM8"></a><code class="constant">V4L2_PIX_FMT_SGRBG10DPCM8</code></td><td valign="top" align="left">'DB10'</td><td valign="top" align="left">10 bit raw Bayer DPCM compressed to 8 bits.</td></tr><tr><td valign="top" align="left"><a name="V4L2-PIX-FMT-PAC207"></a><code class="constant">V4L2_PIX_FMT_PAC207</code></td><td valign="top" align="left">'P207'</td><td valign="top" align="left">Compressed BGGR Bayer format used by the gspca driver.</td></tr><tr><td valign="top" align="left"><a name="V4L2-PIX-FMT-MR97310A"></a><code class="constant">V4L2_PIX_FMT_MR97310A</code></td><td valign="top" align="left">'M310'</td><td valign="top" align="left">Compressed BGGR Bayer format used by the gspca driver.</td></tr><tr><td valign="top" align="left"><a name="V4L2-PIX-FMT-OV511"></a><code class="constant">V4L2_PIX_FMT_OV511</code></td><td valign="top" align="left">'O511'</td><td valign="top" align="left">OV511 JPEG format used by the gspca driver.</td></tr><tr><td valign="top" align="left"><a name="V4L2-PIX-FMT-OV518"></a><code class="constant">V4L2_PIX_FMT_OV518</code></td><td valign="top" align="left">'O518'</td><td valign="top" align="left">OV518 JPEG format used by the gspca driver.</td></tr><tr><td valign="top" align="left"><a name="V4L2-PIX-FMT-PJPG"></a><code class="constant">V4L2_PIX_FMT_PJPG</code></td><td valign="top" align="left">'PJPG'</td><td valign="top" align="left">Pixart 73xx JPEG format used by the gspca driver.</td></tr><tr><td valign="top" align="left"><a name="V4L2-PIX-FMT-SQ905C"></a><code class="constant">V4L2_PIX_FMT_SQ905C</code></td><td valign="top" align="left">'905C'</td><td valign="top" align="left">Compressed RGGB bayer format used by the gspca driver.</td></tr><tr><td valign="top" align="left"><a name="V4L2-PIX-FMT-MJPEG"></a><code class="constant">V4L2_PIX_FMT_MJPEG</code></td><td valign="top" align="left">'MJPG'</td><td valign="top" align="left">Compressed format used by the Zoran driver</td></tr><tr><td valign="top" align="left"><a name="V4L2-PIX-FMT-PWC1"></a><code class="constant">V4L2_PIX_FMT_PWC1</code></td><td valign="top" align="left">'PWC1'</td><td valign="top" align="left">Compressed format of the PWC driver.</td></tr><tr><td valign="top" align="left"><a name="V4L2-PIX-FMT-PWC2"></a><code class="constant">V4L2_PIX_FMT_PWC2</code></td><td valign="top" align="left">'PWC2'</td><td valign="top" align="left">Compressed format of the PWC driver.</td></tr><tr><td valign="top" align="left"><a name="V4L2-PIX-FMT-SN9C10X"></a><code class="constant">V4L2_PIX_FMT_SN9C10X</code></td><td valign="top" align="left">'S910'</td><td valign="top" align="left">Compressed format of the SN9C102 driver.</td></tr><tr><td valign="top" align="left"><a name="V4L2-PIX-FMT-SN9C20X-I420"></a><code class="constant">V4L2_PIX_FMT_SN9C20X_I420</code></td><td valign="top" align="left">'S920'</td><td valign="top" align="left">YUV 4:2:0 format of the gspca sn9c20x driver.</td></tr><tr><td valign="top" align="left"><a name="V4L2-PIX-FMT-WNVA"></a><code class="constant">V4L2_PIX_FMT_WNVA</code></td><td valign="top" align="left">'WNVA'</td><td valign="top" align="left"><p>Used by the Winnov Videum driver, <a class="ulink" href="http://www.thedirks.org/winnov/" target="_top">
http://www.thedirks.org/winnov/</a></p></td></tr><tr><td valign="top" align="left"><a name="V4L2-PIX-FMT-YYUV"></a><code class="constant">V4L2_PIX_FMT_YYUV</code></td><td valign="top" align="left">'YYUV'</td><td valign="top" align="left">unknown</td></tr></tbody></table></div></div><br class="table-break"></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="io"></a>Chapter&nbsp;3.&nbsp;Input/Output</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#rw">3.1. Read/Write</a></span></dt><dt><span class="section"><a href="#mmap">3.2. Streaming I/O (Memory Mapping)</a></span></dt><dt><span class="section"><a href="#userp">3.3. Streaming I/O (User Pointers)</a></span></dt><dt><span class="section"><a href="#async">3.4. Asynchronous I/O</a></span></dt><dt><span class="section"><a href="#buffer">3.5. Buffers</a></span></dt><dd><dl><dt><span class="section"><a href="#id2828863">3.5.1. Timecodes</a></span></dt></dl></dd><dt><span class="section"><a href="#field-order">3.6. Field Order</a></span></dt></dl></div><p>The V4L2 API defines several different methods to read from or
write to a device. All drivers exchanging data with applications must
support at least one of them.</p><p>The classic I/O method using the <code class="function">read()</code>
and <code class="function">write()</code> function is automatically selected
after opening a V4L2 device. When the driver does not support this
method attempts to read or write will fail at any time.</p><p>Other methods must be negotiated. To select the streaming I/O
method with memory mapped or user buffers applications call the
<a class="link" href="#vidioc-reqbufs" title="ioctl VIDIOC_REQBUFS"><code class="constant">VIDIOC_REQBUFS</code></a> ioctl. The asynchronous I/O method is not defined
yet.</p><p>Video overlay can be considered another I/O method, although
the application does not directly receive the image data. It is
selected by initiating video overlay with the <a class="link" href="#vidioc-g-fmt" title="ioctl VIDIOC_G_FMT, VIDIOC_S_FMT, VIDIOC_TRY_FMT"><code class="constant">VIDIOC_S_FMT</code></a> ioctl.
For more information see <a class="xref" href="#overlay" title="4.2.&nbsp;Video Overlay Interface">Section&nbsp;4.2, “Video Overlay Interface”</a>.</p><p>Generally exactly one I/O method, including overlay, is
associated with each file descriptor. The only exceptions are
applications not exchanging data with a driver ("panel applications",
see <a class="xref" href="#open" title="1.1.&nbsp;Opening and Closing Devices">Section&nbsp;1.1, “Opening and Closing Devices”</a>) and drivers permitting simultaneous video capturing
and overlay using the same file descriptor, for compatibility with V4L
and earlier versions of V4L2.</p><p><code class="constant">VIDIOC_S_FMT</code> and
<code class="constant">VIDIOC_REQBUFS</code> would permit this to some degree,
but for simplicity drivers need not support switching the I/O method
(after first switching away from read/write) other than by closing
and reopening the device.</p><p>The following sections describe the various I/O methods in
more detail.</p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="rw"></a>3.1.&nbsp;Read/Write</h2></div></div></div><p>Input and output devices support the
<code class="function">read()</code> and <code class="function">write()</code> function,
respectively, when the <code class="constant">V4L2_CAP_READWRITE</code> flag in
the <em class="structfield"><code>capabilities</code></em> field of struct&nbsp;<a class="link" href="#v4l2-capability" title="Table&nbsp;104.&nbsp;struct v4l2_capability">v4l2_capability</a>
returned by the <a class="link" href="#vidioc-querycap" title="ioctl VIDIOC_QUERYCAP"><code class="constant">VIDIOC_QUERYCAP</code></a> ioctl is set.</p><p>Drivers may need the CPU to copy the data, but they may also
support DMA to or from user memory, so this I/O method is not
necessarily less efficient than other methods merely exchanging buffer
pointers. It is considered inferior though because no meta-information
like frame counters or timestamps are passed. This information is
necessary to recognize frame dropping and to synchronize with other
data streams. However this is also the simplest I/O method, requiring
little or no setup to exchange data. It permits command line stunts
like this (the <span class="application">vidctrl</span> tool is
fictitious):</p><div class="informalexample"><pre class="screen">&gt; vidctrl /dev/video --input=0 --format=YUYV --size=352x288
&gt; dd if=/dev/video of=myimage.422 bs=202752 count=1
</pre></div><p>To read from the device applications use the
<a class="link" href="#func-read" title="V4L2 read()"><code class="function">read()</code></a> function, to write the <a class="link" href="#func-write" title="V4L2 write()"><code class="function">write()</code></a> function.
Drivers must implement one I/O method if they
exchange data with applications, but it need not be this.<sup>[<a name="id2826488" href="#ftn.id2826488" class="footnote">12</a>]</sup> When reading or writing is supported, the driver
must also support the <a class="link" href="#func-select" title="V4L2 select()"><code class="function">select()</code></a> and <a class="link" href="#func-poll" title="V4L2 poll()"><code class="function">poll()</code></a>
function.<sup>[<a name="id2826519" href="#ftn.id2826519" class="footnote">13</a>]</sup></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mmap"></a>3.2.&nbsp;Streaming I/O (Memory Mapping)</h2></div></div></div><p>Input and output devices support this I/O method when the
<code class="constant">V4L2_CAP_STREAMING</code> flag in the
<em class="structfield"><code>capabilities</code></em> field of struct&nbsp;<a class="link" href="#v4l2-capability" title="Table&nbsp;104.&nbsp;struct v4l2_capability">v4l2_capability</a>
returned by the <a class="link" href="#vidioc-querycap" title="ioctl VIDIOC_QUERYCAP"><code class="constant">VIDIOC_QUERYCAP</code></a> ioctl is set. There are two
streaming methods, to determine if the memory mapping flavor is
supported applications must call the <a class="link" href="#vidioc-reqbufs" title="ioctl VIDIOC_REQBUFS"><code class="constant">VIDIOC_REQBUFS</code></a> ioctl.</p><p>Streaming is an I/O method where only pointers to buffers
are exchanged between application and driver, the data itself is not
copied. Memory mapping is primarily intended to map buffers in device
memory into the application's address space. Device memory can be for
example the video memory on a graphics card with a video capture
add-on. However, being the most efficient I/O method available for a
long time, many other drivers support streaming as well, allocating
buffers in DMA-able main memory.</p><p>A driver can support many sets of buffers. Each set is
identified by a unique buffer type value. The sets are independent and
each set can hold a different type of data. To access different sets
at the same time different file descriptors must be used.<sup>[<a name="id2826611" href="#ftn.id2826611" class="footnote">14</a>]</sup></p><p>To allocate device buffers applications call the
<a class="link" href="#vidioc-reqbufs" title="ioctl VIDIOC_REQBUFS"><code class="constant">VIDIOC_REQBUFS</code></a> ioctl with the desired number of buffers and buffer
type, for example <code class="constant">V4L2_BUF_TYPE_VIDEO_CAPTURE</code>.
This ioctl can also be used to change the number of buffers or to free
the allocated memory, provided none of the buffers are still
mapped.</p><p>Before applications can access the buffers they must map
them into their address space with the <a class="link" href="#func-mmap" title="V4L2 mmap()"><code class="function">mmap()</code></a> function. The
location of the buffers in device memory can be determined with the
<a class="link" href="#vidioc-querybuf" title="ioctl VIDIOC_QUERYBUF"><code class="constant">VIDIOC_QUERYBUF</code></a> ioctl. The <em class="structfield"><code>m.offset</code></em> and
<em class="structfield"><code>length</code></em> returned in a struct&nbsp;<a class="link" href="#v4l2-buffer" title="Table&nbsp;3.1.&nbsp;struct v4l2_buffer">v4l2_buffer</a> are
passed as sixth and second parameter to the
<code class="function">mmap()</code> function. The offset and length values
must not be modified. Remember the buffers are allocated in physical
memory, as opposed to virtual memory which can be swapped out to disk.
Applications should free the buffers as soon as possible with the
<a class="link" href="#func-munmap" title="V4L2 munmap()"><code class="function">munmap()</code></a> function.</p><div class="example"><a name="id2826704"></a><p class="title"><b>Example&nbsp;3.1.&nbsp;Mapping buffers</b></p><div class="example-contents"><pre class="programlisting">struct&nbsp;<a class="link" href="#v4l2-requestbuffers" title="Table&nbsp;110.&nbsp;struct v4l2_requestbuffers">v4l2_requestbuffers</a> reqbuf;
struct {
	void *start;
	size_t length;
} *buffers;
unsigned int i;

memset (&amp;reqbuf, 0, sizeof (reqbuf));
reqbuf.type = V4L2_BUF_TYPE_VIDEO_CAPTURE;
reqbuf.memory = V4L2_MEMORY_MMAP;
reqbuf.count = 20;

if (-1 == ioctl (fd, <a class="link" href="#vidioc-reqbufs" title="ioctl VIDIOC_REQBUFS"><code class="constant">VIDIOC_REQBUFS</code></a>, &amp;reqbuf)) {
	if (errno == EINVAL)
		printf ("Video capturing or mmap-streaming is not supported\n");
	else
		perror ("VIDIOC_REQBUFS");

	exit (EXIT_FAILURE);
}

/* We want at least five buffers. */

if (reqbuf.count &lt; 5) {
	/* You may need to free the buffers here. */
	printf ("Not enough buffer memory\n");
	exit (EXIT_FAILURE);
}

buffers = calloc (reqbuf.count, sizeof (*buffers));
assert (buffers != NULL);

for (i = 0; i &lt; reqbuf.count; i++) {
	struct&nbsp;<a class="link" href="#v4l2-buffer" title="Table&nbsp;3.1.&nbsp;struct v4l2_buffer">v4l2_buffer</a> buffer;

	memset (&amp;buffer, 0, sizeof (buffer));
	buffer.type = reqbuf.type;
	buffer.memory = V4L2_MEMORY_MMAP;
	buffer.index = i;

	if (-1 == ioctl (fd, <a class="link" href="#vidioc-querybuf" title="ioctl VIDIOC_QUERYBUF"><code class="constant">VIDIOC_QUERYBUF</code></a>, &amp;buffer)) {
		perror ("VIDIOC_QUERYBUF");
		exit (EXIT_FAILURE);
	}

	buffers[i].length = buffer.length; /* remember for munmap() */

	buffers[i].start = mmap (NULL, buffer.length,
				 PROT_READ | PROT_WRITE, /* recommended */
				 MAP_SHARED,             /* recommended */
				 fd, buffer.m.offset);

	if (MAP_FAILED == buffers[i].start) {
		/* If you do not exit here you should unmap() and free()
		   the buffers mapped so far. */
		perror ("mmap");
		exit (EXIT_FAILURE);
	}
}

/* Cleanup. */

for (i = 0; i &lt; reqbuf.count; i++)
	munmap (buffers[i].start, buffers[i].length);
      </pre></div></div><br class="example-break"><p>Conceptually streaming drivers maintain two buffer queues, an incoming
and an outgoing queue. They separate the synchronous capture or output
operation locked to a video clock from the application which is
subject to random disk or network delays and preemption by
other processes, thereby reducing the probability of data loss.
The queues are organized as FIFOs, buffers will be
output in the order enqueued in the incoming FIFO, and were
captured in the order dequeued from the outgoing FIFO.</p><p>The driver may require a minimum number of buffers enqueued
at all times to function, apart of this no limit exists on the number
of buffers applications can enqueue in advance, or dequeue and
process. They can also enqueue in a different order than buffers have
been dequeued, and the driver can <span class="emphasis"><em>fill</em></span> enqueued
<span class="emphasis"><em>empty</em></span> buffers in any order. <sup>[<a name="id2826836" href="#ftn.id2826836" class="footnote">15</a>]</sup> The index number of a buffer (struct&nbsp;<a class="link" href="#v4l2-buffer" title="Table&nbsp;3.1.&nbsp;struct v4l2_buffer">v4l2_buffer</a>
<em class="structfield"><code>index</code></em>) plays no role here, it only
identifies the buffer.</p><p>Initially all mapped buffers are in dequeued state,
inaccessible by the driver. For capturing applications it is customary
to first enqueue all mapped buffers, then to start capturing and enter
the read loop. Here the application waits until a filled buffer can be
dequeued, and re-enqueues the buffer when the data is no longer
needed. Output applications fill and enqueue buffers, when enough
buffers are stacked up the output is started with
<code class="constant">VIDIOC_STREAMON</code>. In the write loop, when
the application runs out of free buffers, it must wait until an empty
buffer can be dequeued and reused.</p><p>To enqueue and dequeue a buffer applications use the
<a class="link" href="#vidioc-qbuf" title="ioctl VIDIOC_QBUF, VIDIOC_DQBUF"><code class="constant">VIDIOC_QBUF</code></a> and <a class="link" href="#vidioc-qbuf" title="ioctl VIDIOC_QBUF, VIDIOC_DQBUF"><code class="constant">VIDIOC_DQBUF</code></a> ioctl. The status of a buffer being
mapped, enqueued, full or empty can be determined at any time using the
<a class="link" href="#vidioc-querybuf" title="ioctl VIDIOC_QUERYBUF"><code class="constant">VIDIOC_QUERYBUF</code></a> ioctl. Two methods exist to suspend execution of the
application until one or more buffers can be dequeued. By default
<code class="constant">VIDIOC_DQBUF</code> blocks when no buffer is in the
outgoing queue. When the <code class="constant">O_NONBLOCK</code> flag was
given to the <a class="link" href="#func-open" title="V4L2 open()"><code class="function">open()</code></a> function, <code class="constant">VIDIOC_DQBUF</code>
returns immediately with an <span class="errorcode">EAGAIN</span> error code when no buffer is available. The
<a class="link" href="#func-select" title="V4L2 select()"><code class="function">select()</code></a> or <a class="link" href="#func-poll" title="V4L2 poll()"><code class="function">poll()</code></a> function are always available.</p><p>To start and stop capturing or output applications call the
<a class="link" href="#vidioc-streamon" title="ioctl VIDIOC_STREAMON, VIDIOC_STREAMOFF"><code class="constant">VIDIOC_STREAMON</code></a> and <a class="link" href="#vidioc-streamon" title="ioctl VIDIOC_STREAMON, VIDIOC_STREAMOFF"><code class="constant">VIDIOC_STREAMOFF</code></a> ioctl. Note
<code class="constant">VIDIOC_STREAMOFF</code> removes all buffers from both
queues as a side effect. Since there is no notion of doing anything
"now" on a multitasking system, if an application needs to synchronize
with another event it should examine the struct&nbsp;<a class="link" href="#v4l2-buffer" title="Table&nbsp;3.1.&nbsp;struct v4l2_buffer">v4l2_buffer</a>
<em class="structfield"><code>timestamp</code></em> of captured buffers, or set the
field before enqueuing buffers for output.</p><p>Drivers implementing memory mapping I/O must
support the <code class="constant">VIDIOC_REQBUFS</code>,
<code class="constant">VIDIOC_QUERYBUF</code>,
<code class="constant">VIDIOC_QBUF</code>, <code class="constant">VIDIOC_DQBUF</code>,
<code class="constant">VIDIOC_STREAMON</code> and
<code class="constant">VIDIOC_STREAMOFF</code> ioctl, the
<code class="function">mmap()</code>, <code class="function">munmap()</code>,
<code class="function">select()</code> and <code class="function">poll()</code>
function.<sup>[<a name="id2827179" href="#ftn.id2827179" class="footnote">16</a>]</sup></p><p>[capture example]</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="userp"></a>3.3.&nbsp;Streaming I/O (User Pointers)</h2></div></div></div><p>Input and output devices support this I/O method when the
<code class="constant">V4L2_CAP_STREAMING</code> flag in the
<em class="structfield"><code>capabilities</code></em> field of struct&nbsp;<a class="link" href="#v4l2-capability" title="Table&nbsp;104.&nbsp;struct v4l2_capability">v4l2_capability</a>
returned by the <a class="link" href="#vidioc-querycap" title="ioctl VIDIOC_QUERYCAP"><code class="constant">VIDIOC_QUERYCAP</code></a> ioctl is set. If the particular user
pointer method (not only memory mapping) is supported must be
determined by calling the <a class="link" href="#vidioc-reqbufs" title="ioctl VIDIOC_REQBUFS"><code class="constant">VIDIOC_REQBUFS</code></a> ioctl.</p><p>This I/O method combines advantages of the read/write and
memory mapping methods. Buffers are allocated by the application
itself, and can reside for example in virtual or shared memory. Only
pointers to data are exchanged, these pointers and meta-information
are passed in struct&nbsp;<a class="link" href="#v4l2-buffer" title="Table&nbsp;3.1.&nbsp;struct v4l2_buffer">v4l2_buffer</a>. The driver must be switched
into user pointer I/O mode by calling the <a class="link" href="#vidioc-reqbufs" title="ioctl VIDIOC_REQBUFS"><code class="constant">VIDIOC_REQBUFS</code></a> with the
desired buffer type. No buffers are allocated beforehands,
consequently they are not indexed and cannot be queried like mapped
buffers with the <code class="constant">VIDIOC_QUERYBUF</code> ioctl.</p><div class="example"><a name="id2827286"></a><p class="title"><b>Example&nbsp;3.2.&nbsp;Initiating streaming I/O with user pointers</b></p><div class="example-contents"><pre class="programlisting">struct&nbsp;<a class="link" href="#v4l2-requestbuffers" title="Table&nbsp;110.&nbsp;struct v4l2_requestbuffers">v4l2_requestbuffers</a> reqbuf;

memset (&amp;reqbuf, 0, sizeof (reqbuf));
reqbuf.type = V4L2_BUF_TYPE_VIDEO_CAPTURE;
reqbuf.memory = V4L2_MEMORY_USERPTR;

if (ioctl (fd, <a class="link" href="#vidioc-reqbufs" title="ioctl VIDIOC_REQBUFS"><code class="constant">VIDIOC_REQBUFS</code></a>, &amp;reqbuf) == -1) {
	if (errno == EINVAL)
		printf ("Video capturing or user pointer streaming is not supported\n");
	else
		perror ("VIDIOC_REQBUFS");

	exit (EXIT_FAILURE);
}
      </pre></div></div><br class="example-break"><p>Buffer addresses and sizes are passed on the fly with the
<a class="link" href="#vidioc-qbuf" title="ioctl VIDIOC_QBUF, VIDIOC_DQBUF"><code class="constant">VIDIOC_QBUF</code></a> ioctl. Although buffers are commonly cycled,
applications can pass different addresses and sizes at each
<code class="constant">VIDIOC_QBUF</code> call. If required by the hardware the
driver swaps memory pages within physical memory to create a
continuous area of memory. This happens transparently to the
application in the virtual memory subsystem of the kernel. When buffer
pages have been swapped out to disk they are brought back and finally
locked in physical memory for DMA.<sup>[<a name="id2827345" href="#ftn.id2827345" class="footnote">17</a>]</sup></p><p>Filled or displayed buffers are dequeued with the
<a class="link" href="#vidioc-qbuf" title="ioctl VIDIOC_QBUF, VIDIOC_DQBUF"><code class="constant">VIDIOC_DQBUF</code></a> ioctl. The driver can unlock the memory pages at any
time between the completion of the DMA and this ioctl. The memory is
also unlocked when <a class="link" href="#vidioc-streamon" title="ioctl VIDIOC_STREAMON, VIDIOC_STREAMOFF"><code class="constant">VIDIOC_STREAMOFF</code></a> is called, <a class="link" href="#vidioc-reqbufs" title="ioctl VIDIOC_REQBUFS"><code class="constant">VIDIOC_REQBUFS</code></a>, or
when the device is closed. Applications must take care not to free
buffers without dequeuing. For once, the buffers remain locked until
further, wasting physical memory. Second the driver will not be
notified when the memory is returned to the application's free list
and subsequently reused for other purposes, possibly completing the
requested DMA and overwriting valuable data.</p><p>For capturing applications it is customary to enqueue a
number of empty buffers, to start capturing and enter the read loop.
Here the application waits until a filled buffer can be dequeued, and
re-enqueues the buffer when the data is no longer needed. Output
applications fill and enqueue buffers, when enough buffers are stacked
up output is started. In the write loop, when the application
runs out of free buffers it must wait until an empty buffer can be
dequeued and reused. Two methods exist to suspend execution of the
application until one or more buffers can be dequeued. By default
<code class="constant">VIDIOC_DQBUF</code> blocks when no buffer is in the
outgoing queue. When the <code class="constant">O_NONBLOCK</code> flag was
given to the <a class="link" href="#func-open" title="V4L2 open()"><code class="function">open()</code></a> function, <code class="constant">VIDIOC_DQBUF</code>
returns immediately with an <span class="errorcode">EAGAIN</span> error code when no buffer is available. The
<a class="link" href="#func-select" title="V4L2 select()"><code class="function">select()</code></a> or <a class="link" href="#func-poll" title="V4L2 poll()"><code class="function">poll()</code></a> function are always available.</p><p>To start and stop capturing or output applications call the
<a class="link" href="#vidioc-streamon" title="ioctl VIDIOC_STREAMON, VIDIOC_STREAMOFF"><code class="constant">VIDIOC_STREAMON</code></a> and <a class="link" href="#vidioc-streamon" title="ioctl VIDIOC_STREAMON, VIDIOC_STREAMOFF"><code class="constant">VIDIOC_STREAMOFF</code></a> ioctl. Note
<code class="constant">VIDIOC_STREAMOFF</code> removes all buffers from both
queues and unlocks all buffers as a side effect. Since there is no
notion of doing anything "now" on a multitasking system, if an
application needs to synchronize with another event it should examine
the struct&nbsp;<a class="link" href="#v4l2-buffer" title="Table&nbsp;3.1.&nbsp;struct v4l2_buffer">v4l2_buffer</a> <em class="structfield"><code>timestamp</code></em> of captured
buffers, or set the field before enqueuing buffers for output.</p><p>Drivers implementing user pointer I/O must
support the <code class="constant">VIDIOC_REQBUFS</code>,
<code class="constant">VIDIOC_QBUF</code>, <code class="constant">VIDIOC_DQBUF</code>,
<code class="constant">VIDIOC_STREAMON</code> and
<code class="constant">VIDIOC_STREAMOFF</code> ioctl, the
<code class="function">select()</code> and <code class="function">poll()</code> function.<sup>[<a name="id2827539" href="#ftn.id2827539" class="footnote">18</a>]</sup></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="async"></a>3.4.&nbsp;Asynchronous I/O</h2></div></div></div><p>This method is not defined yet.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="buffer"></a>3.5.&nbsp;Buffers</h2></div></div></div><p>A buffer contains data exchanged by application and
driver using one of the Streaming I/O methods. Only pointers to
buffers are exchanged, the data itself is not copied. These pointers,
together with meta-information like timestamps or field parity, are
stored in a struct <span class="structname">v4l2_buffer</span>, argument to
the <a class="link" href="#vidioc-querybuf" title="ioctl VIDIOC_QUERYBUF"><code class="constant">VIDIOC_QUERYBUF</code></a>, <a class="link" href="#vidioc-qbuf" title="ioctl VIDIOC_QBUF, VIDIOC_DQBUF"><code class="constant">VIDIOC_QBUF</code></a> and <a class="link" href="#vidioc-qbuf" title="ioctl VIDIOC_QBUF, VIDIOC_DQBUF"><code class="constant">VIDIOC_DQBUF</code></a> ioctl.</p><p>Nominally timestamps refer to the first data byte transmitted.
In practice however the wide range of hardware covered by the V4L2 API
limits timestamp accuracy. Often an interrupt routine will
sample the system clock shortly after the field or frame was stored
completely in memory. So applications must expect a constant
difference up to one field or frame period plus a small (few scan
lines) random error. The delay and error can be much
larger due to compression or transmission over an external bus when
the frames are not properly stamped by the sender. This is frequently
the case with USB cameras. Here timestamps refer to the instant the
field or frame was received by the driver, not the capture time. These
devices identify by not enumerating any video standards, see <a class="xref" href="#standard" title="1.7.&nbsp;Video Standards">Section&nbsp;1.7, “Video Standards”</a>.</p><p>Similar limitations apply to output timestamps. Typically
the video hardware locks to a clock controlling the video timing, the
horizontal and vertical synchronization pulses. At some point in the
line sequence, possibly the vertical blanking, an interrupt routine
samples the system clock, compares against the timestamp and programs
the hardware to repeat the previous field or frame, or to display the
buffer contents.</p><p>Apart of limitations of the video device and natural
inaccuracies of all clocks, it should be noted system time itself is
not perfectly stable. It can be affected by power saving cycles,
warped to insert leap seconds, or even turned back or forth by the
system administrator affecting long term measurements. <sup>[<a name="id2827663" href="#ftn.id2827663" class="footnote">19</a>]</sup></p><div class="table"><a name="v4l2-buffer"></a><p class="title"><b>Table&nbsp;3.1.&nbsp;struct <span class="structname">v4l2_buffer</span></b></p><div class="table-contents"><table summary="struct v4l2_buffer" width="100%" border="0"><colgroup><col><col><col><col></colgroup><tbody valign="top"><tr><td valign="top">__u32</td><td valign="top"><em class="structfield"><code>index</code></em></td><td valign="top">&nbsp;</td><td valign="top">Number of the buffer, set by the application. This
field is only used for <a class="link" href="#mmap" title="3.2.&nbsp;Streaming I/O (Memory Mapping)">memory mapping</a> I/O
and can range from zero to the number of buffers allocated
with the <a class="link" href="#vidioc-reqbufs" title="ioctl VIDIOC_REQBUFS"><code class="constant">VIDIOC_REQBUFS</code></a> ioctl (struct&nbsp;<a class="link" href="#v4l2-requestbuffers" title="Table&nbsp;110.&nbsp;struct v4l2_requestbuffers">v4l2_requestbuffers</a> <em class="structfield"><code>count</code></em>) minus one.</td></tr><tr><td valign="top">enum&nbsp;<a class="link" href="#v4l2-buf-type" title="Table&nbsp;3.2.&nbsp;enum v4l2_buf_type">v4l2_buf_type</a></td><td valign="top"><em class="structfield"><code>type</code></em></td><td valign="top">&nbsp;</td><td valign="top">Type of the buffer, same as struct&nbsp;<a class="link" href="#v4l2-format" title="Table&nbsp;84.&nbsp;struct v4l2_format">v4l2_format</a>
<em class="structfield"><code>type</code></em> or struct&nbsp;<a class="link" href="#v4l2-requestbuffers" title="Table&nbsp;110.&nbsp;struct v4l2_requestbuffers">v4l2_requestbuffers</a>
<em class="structfield"><code>type</code></em>, set by the application.</td></tr><tr><td valign="top">__u32</td><td valign="top"><em class="structfield"><code>bytesused</code></em></td><td valign="top">&nbsp;</td><td valign="top">The number of bytes occupied by the data in the
buffer. It depends on the negotiated data format and may change with
each buffer for compressed variable size data like JPEG images.
Drivers must set this field when <em class="structfield"><code>type</code></em>
refers to an input stream, applications when an output stream.</td></tr><tr><td valign="top">__u32</td><td valign="top"><em class="structfield"><code>flags</code></em></td><td valign="top">&nbsp;</td><td valign="top">Flags set by the application or driver, see <a class="xref" href="#buffer-flags" title="Table&nbsp;3.3.&nbsp;Buffer Flags">Table&nbsp;3.3, “Buffer Flags”</a>.</td></tr><tr><td valign="top">enum&nbsp;<a class="link" href="#v4l2-field" title="Table&nbsp;3.8.&nbsp;enum v4l2_field">v4l2_field</a></td><td valign="top"><em class="structfield"><code>field</code></em></td><td valign="top">&nbsp;</td><td valign="top">Indicates the field order of the image in the
buffer, see <a class="xref" href="#v4l2-field" title="Table&nbsp;3.8.&nbsp;enum v4l2_field">Table&nbsp;3.8, “enum v4l2_field”</a>. This field is not used when
the buffer contains VBI data. Drivers must set it when
<em class="structfield"><code>type</code></em> refers to an input stream,
applications when an output stream.</td></tr><tr><td valign="top">struct timeval</td><td valign="top"><em class="structfield"><code>timestamp</code></em></td><td valign="top">&nbsp;</td><td valign="top"><p>For input streams this is the
system time (as returned by the <code class="function">gettimeofday()</code>
function) when the first data byte was captured. For output streams
the data will not be displayed before this time, secondary to the
nominal frame rate determined by the current video standard in
enqueued order. Applications can for example zero this field to
display frames as soon as possible. The driver stores the time at
which the first data byte was actually sent out in the
<em class="structfield"><code>timestamp</code></em> field. This permits
applications to monitor the drift between the video and system
clock.</p></td></tr><tr><td valign="top">struct&nbsp;<a class="link" href="#v4l2-timecode" title="Table&nbsp;3.5.&nbsp;struct v4l2_timecode">v4l2_timecode</a></td><td valign="top"><em class="structfield"><code>timecode</code></em></td><td valign="top">&nbsp;</td><td valign="top">When <em class="structfield"><code>type</code></em> is
<code class="constant">V4L2_BUF_TYPE_VIDEO_CAPTURE</code> and the
<code class="constant">V4L2_BUF_FLAG_TIMECODE</code> flag is set in
<em class="structfield"><code>flags</code></em>, this structure contains a frame
timecode. In <a class="link" href="#v4l2-field" title="Table&nbsp;3.8.&nbsp;enum v4l2_field">V4L2_FIELD_ALTERNATE</a>
mode the top and bottom field contain the same timecode.
Timecodes are intended to help video editing and are typically recorded on
video tapes, but also embedded in compressed formats like MPEG. This
field is independent of the <em class="structfield"><code>timestamp</code></em> and
<em class="structfield"><code>sequence</code></em> fields.</td></tr><tr><td valign="top">__u32</td><td valign="top"><em class="structfield"><code>sequence</code></em></td><td valign="top">&nbsp;</td><td valign="top">Set by the driver, counting the frames in the
sequence.</td></tr><tr><td colspan="4" valign="top"><p>In <a class="link" href="#v4l2-field" title="Table&nbsp;3.8.&nbsp;enum v4l2_field">V4L2_FIELD_ALTERNATE</a> mode the top and
bottom field have the same sequence number. The count starts at zero
and includes dropped or repeated frames. A dropped frame was received
by an input device but could not be stored due to lack of free buffer
space. A repeated frame was displayed again by an output device
because the application did not pass new data in
time.</p><p>Note this may count the frames received
e.g. over USB, without taking into account the frames dropped by the
remote hardware due to limited compression throughput or bus
bandwidth. These devices identify by not enumerating any video
standards, see <a class="xref" href="#standard" title="1.7.&nbsp;Video Standards">Section&nbsp;1.7, “Video Standards”</a>.</p></td></tr><tr><td valign="top">enum&nbsp;<a class="link" href="#v4l2-memory" title="Table&nbsp;3.4.&nbsp;enum v4l2_memory">v4l2_memory</a></td><td valign="top"><em class="structfield"><code>memory</code></em></td><td valign="top">&nbsp;</td><td valign="top">This field must be set by applications and/or drivers
in accordance with the selected I/O method.</td></tr><tr><td valign="top">union</td><td valign="top"><em class="structfield"><code>m</code></em></td><td class="auto-generated">&nbsp;</td><td class="auto-generated">&nbsp;</td></tr><tr><td valign="top">&nbsp;</td><td valign="top">__u32</td><td valign="top"><em class="structfield"><code>offset</code></em></td><td valign="top">When <em class="structfield"><code>memory</code></em> is
<code class="constant">V4L2_MEMORY_MMAP</code> this is the offset of the buffer
from the start of the device memory. The value is returned by the
driver and apart of serving as parameter to the <a class="link" href="#func-mmap" title="V4L2 mmap()"><code class="function">mmap()</code></a> function
not useful for applications. See <a class="xref" href="#mmap" title="3.2.&nbsp;Streaming I/O (Memory Mapping)">Section&nbsp;3.2, “Streaming I/O (Memory Mapping)”</a> for details.</td></tr><tr><td valign="top">&nbsp;</td><td valign="top">unsigned long</td><td valign="top"><em class="structfield"><code>userptr</code></em></td><td valign="top">When <em class="structfield"><code>memory</code></em> is
<code class="constant">V4L2_MEMORY_USERPTR</code> this is a pointer to the
buffer (casted to unsigned long type) in virtual memory, set by the
application. See <a class="xref" href="#userp" title="3.3.&nbsp;Streaming I/O (User Pointers)">Section&nbsp;3.3, “Streaming I/O (User Pointers)”</a> for details.</td></tr><tr><td valign="top">__u32</td><td valign="top"><em class="structfield"><code>length</code></em></td><td valign="top">&nbsp;</td><td valign="top">Size of the buffer (not the payload) in bytes.</td></tr><tr><td valign="top">__u32</td><td valign="top"><em class="structfield"><code>input</code></em></td><td valign="top">&nbsp;</td><td valign="top">Some video capture drivers support rapid and
synchronous video input changes, a function useful for example in
video surveillance applications. For this purpose applications set the
<code class="constant">V4L2_BUF_FLAG_INPUT</code> flag, and this field to the
number of a video input as in struct&nbsp;<a class="link" href="#v4l2-input" title="Table&nbsp;60.&nbsp;struct v4l2_input">v4l2_input</a> field
<em class="structfield"><code>index</code></em>.</td></tr><tr><td valign="top">__u32</td><td valign="top"><em class="structfield"><code>reserved</code></em></td><td valign="top">&nbsp;</td><td valign="top">A place holder for future extensions and custom
(driver defined) buffer types
<code class="constant">V4L2_BUF_TYPE_PRIVATE</code> and higher.</td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="v4l2-buf-type"></a><p class="title"><b>Table&nbsp;3.2.&nbsp;enum v4l2_buf_type</b></p><div class="table-contents"><table summary="enum v4l2_buf_type" width="100%" border="0"><colgroup><col><col><col></colgroup><tbody valign="top"><tr><td valign="top"><code class="constant">V4L2_BUF_TYPE_VIDEO_CAPTURE</code></td><td valign="top">1</td><td valign="top">Buffer of a video capture stream, see <a class="xref" href="#capture" title="4.1.&nbsp;Video Capture Interface">Section&nbsp;4.1, “Video Capture Interface”</a>.</td></tr><tr><td valign="top"><code class="constant">V4L2_BUF_TYPE_VIDEO_OUTPUT</code></td><td valign="top">2</td><td valign="top">Buffer of a video output stream, see <a class="xref" href="#output" title="4.3.&nbsp;Video Output Interface">Section&nbsp;4.3, “Video Output Interface”</a>.</td></tr><tr><td valign="top"><code class="constant">V4L2_BUF_TYPE_VIDEO_OVERLAY</code></td><td valign="top">3</td><td valign="top">Buffer for video overlay, see <a class="xref" href="#overlay" title="4.2.&nbsp;Video Overlay Interface">Section&nbsp;4.2, “Video Overlay Interface”</a>.</td></tr><tr><td valign="top"><code class="constant">V4L2_BUF_TYPE_VBI_CAPTURE</code></td><td valign="top">4</td><td valign="top">Buffer of a raw VBI capture stream, see <a class="xref" href="#raw-vbi" title="4.7.&nbsp;Raw VBI Data Interface">Section&nbsp;4.7, “Raw VBI Data Interface”</a>.</td></tr><tr><td valign="top"><code class="constant">V4L2_BUF_TYPE_VBI_OUTPUT</code></td><td valign="top">5</td><td valign="top">Buffer of a raw VBI output stream, see <a class="xref" href="#raw-vbi" title="4.7.&nbsp;Raw VBI Data Interface">Section&nbsp;4.7, “Raw VBI Data Interface”</a>.</td></tr><tr><td valign="top"><code class="constant">V4L2_BUF_TYPE_SLICED_VBI_CAPTURE</code></td><td valign="top">6</td><td valign="top">Buffer of a sliced VBI capture stream, see <a class="xref" href="#sliced" title="4.8.&nbsp;Sliced VBI Data Interface">Section&nbsp;4.8, “Sliced VBI Data Interface”</a>.</td></tr><tr><td valign="top"><code class="constant">V4L2_BUF_TYPE_SLICED_VBI_OUTPUT</code></td><td valign="top">7</td><td valign="top">Buffer of a sliced VBI output stream, see <a class="xref" href="#sliced" title="4.8.&nbsp;Sliced VBI Data Interface">Section&nbsp;4.8, “Sliced VBI Data Interface”</a>.</td></tr><tr><td valign="top"><code class="constant">V4L2_BUF_TYPE_VIDEO_OUTPUT_OVERLAY</code></td><td valign="top">8</td><td valign="top">Buffer for video output overlay (OSD), see <a class="xref" href="#osd" title="4.4.&nbsp;Video Output Overlay Interface">Section&nbsp;4.4, “Video Output Overlay Interface”</a>. Status: <a class="link" href="#experimental" title="8.4.&nbsp;Experimental API Elements">Experimental</a>.</td></tr><tr><td valign="top"><code class="constant">V4L2_BUF_TYPE_PRIVATE</code></td><td valign="top">0x80</td><td valign="top">This and higher values are reserved for custom
(driver defined) buffer types.</td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="buffer-flags"></a><p class="title"><b>Table&nbsp;3.3.&nbsp;Buffer Flags</b></p><div class="table-contents"><table summary="Buffer Flags" width="100%" border="0"><colgroup><col><col><col></colgroup><tbody valign="top"><tr><td valign="top"><code class="constant">V4L2_BUF_FLAG_MAPPED</code></td><td valign="top">0x0001</td><td valign="top">The buffer resides in device memory and has been mapped
into the application's address space, see <a class="xref" href="#mmap" title="3.2.&nbsp;Streaming I/O (Memory Mapping)">Section&nbsp;3.2, “Streaming I/O (Memory Mapping)”</a> for details.
Drivers set or clear this flag when the
<a class="link" href="#vidioc-querybuf" title="ioctl VIDIOC_QUERYBUF">VIDIOC_QUERYBUF</a>, <a class="link" href="#vidioc-qbuf" title="ioctl VIDIOC_QBUF, VIDIOC_DQBUF">VIDIOC_QBUF</a> or <a class="link" href="#vidioc-qbuf" title="ioctl VIDIOC_QBUF, VIDIOC_DQBUF">VIDIOC_DQBUF</a> ioctl is called. Set by the driver.</td></tr><tr><td valign="top"><code class="constant">V4L2_BUF_FLAG_QUEUED</code></td><td valign="top">0x0002</td><td valign="top">Internally drivers maintain two buffer queues, an
incoming and outgoing queue. When this flag is set, the buffer is
currently on the incoming queue. It automatically moves to the
outgoing queue after the buffer has been filled (capture devices) or
displayed (output devices). Drivers set or clear this flag when the
<code class="constant">VIDIOC_QUERYBUF</code> ioctl is called. After
(successful) calling the <code class="constant">VIDIOC_QBUF </code>ioctl it is
always set and after <code class="constant">VIDIOC_DQBUF</code> always
cleared.</td></tr><tr><td valign="top"><code class="constant">V4L2_BUF_FLAG_DONE</code></td><td valign="top">0x0004</td><td valign="top">When this flag is set, the buffer is currently on
the outgoing queue, ready to be dequeued from the driver. Drivers set
or clear this flag when the <code class="constant">VIDIOC_QUERYBUF</code> ioctl
is called. After calling the <code class="constant">VIDIOC_QBUF</code> or
<code class="constant">VIDIOC_DQBUF</code> it is always cleared. Of course a
buffer cannot be on both queues at the same time, the
<code class="constant">V4L2_BUF_FLAG_QUEUED</code> and
<code class="constant">V4L2_BUF_FLAG_DONE</code> flag are mutually exclusive.
They can be both cleared however, then the buffer is in "dequeued"
state, in the application domain to say so.</td></tr><tr><td valign="top"><code class="constant">V4L2_BUF_FLAG_KEYFRAME</code></td><td valign="top">0x0008</td><td valign="top">Drivers set or clear this flag when calling the
<code class="constant">VIDIOC_DQBUF</code> ioctl. It may be set by video
capture devices when the buffer contains a compressed image which is a
key frame (or field), i.&nbsp;e. can be decompressed on its own.</td></tr><tr><td valign="top"><code class="constant">V4L2_BUF_FLAG_PFRAME</code></td><td valign="top">0x0010</td><td valign="top">Similar to <code class="constant">V4L2_BUF_FLAG_KEYFRAME</code>
this flags predicted frames or fields which contain only differences to a
previous key frame.</td></tr><tr><td valign="top"><code class="constant">V4L2_BUF_FLAG_BFRAME</code></td><td valign="top">0x0020</td><td valign="top">Similar to <code class="constant">V4L2_BUF_FLAG_PFRAME</code>
	this is a bidirectional predicted frame or field. [ooc tbd]</td></tr><tr><td valign="top"><code class="constant">V4L2_BUF_FLAG_TIMECODE</code></td><td valign="top">0x0100</td><td valign="top">The <em class="structfield"><code>timecode</code></em> field is valid.
Drivers set or clear this flag when the <code class="constant">VIDIOC_DQBUF</code>
ioctl is called.</td></tr><tr><td valign="top"><code class="constant">V4L2_BUF_FLAG_INPUT</code></td><td valign="top">0x0200</td><td valign="top">The <em class="structfield"><code>input</code></em> field is valid.
Applications set or clear this flag before calling the
<code class="constant">VIDIOC_QBUF</code> ioctl.</td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="v4l2-memory"></a><p class="title"><b>Table&nbsp;3.4.&nbsp;enum v4l2_memory</b></p><div class="table-contents"><table summary="enum v4l2_memory" width="100%" border="0"><colgroup><col><col><col></colgroup><tbody valign="top"><tr><td valign="top"><code class="constant">V4L2_MEMORY_MMAP</code></td><td valign="top">1</td><td valign="top">The buffer is used for <a class="link" href="#mmap" title="3.2.&nbsp;Streaming I/O (Memory Mapping)">memory
mapping</a> I/O.</td></tr><tr><td valign="top"><code class="constant">V4L2_MEMORY_USERPTR</code></td><td valign="top">2</td><td valign="top">The buffer is used for <a class="link" href="#userp" title="3.3.&nbsp;Streaming I/O (User Pointers)">user
pointer</a> I/O.</td></tr><tr><td valign="top"><code class="constant">V4L2_MEMORY_OVERLAY</code></td><td valign="top">3</td><td valign="top">[to do]</td></tr></tbody></table></div></div><br class="table-break"><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2828863"></a>3.5.1.&nbsp;Timecodes</h3></div></div></div><p>The <span class="structname">v4l2_timecode</span> structure is
designed to hold a <a class="xref" href="#smpte12m" title="SMPTE 12M-1999 &quot;Television, Audio and Film - Time and Control Code&quot;">[<abbr class="abbrev">SMPTE&nbsp;12M</abbr>]</a> or similar timecode.
(struct <span class="structname">timeval</span> timestamps are stored in
struct&nbsp;<a class="link" href="#v4l2-buffer" title="Table&nbsp;3.1.&nbsp;struct v4l2_buffer">v4l2_buffer</a> field <em class="structfield"><code>timestamp</code></em>.)</p><div class="table"><a name="v4l2-timecode"></a><p class="title"><b>Table&nbsp;3.5.&nbsp;struct <span class="structname">v4l2_timecode</span></b></p><div class="table-contents"><table summary="struct v4l2_timecode" width="100%" border="0"><colgroup><col><col><col></colgroup><tbody valign="top"><tr><td valign="top">__u32</td><td valign="top"><em class="structfield"><code>type</code></em></td><td valign="top">Frame rate the timecodes are based on, see <a class="xref" href="#timecode-type" title="Table&nbsp;3.6.&nbsp;Timecode Types">Table&nbsp;3.6, “Timecode Types”</a>.</td></tr><tr><td valign="top">__u32</td><td valign="top"><em class="structfield"><code>flags</code></em></td><td valign="top">Timecode flags, see <a class="xref" href="#timecode-flags" title="Table&nbsp;3.7.&nbsp;Timecode Flags">Table&nbsp;3.7, “Timecode Flags”</a>.</td></tr><tr><td valign="top">__u8</td><td valign="top"><em class="structfield"><code>frames</code></em></td><td valign="top">Frame count, 0 ... 23/24/29/49/59, depending on the
	    type of timecode.</td></tr><tr><td valign="top">__u8</td><td valign="top"><em class="structfield"><code>seconds</code></em></td><td valign="top">Seconds count, 0 ... 59. This is a binary, not BCD number.</td></tr><tr><td valign="top">__u8</td><td valign="top"><em class="structfield"><code>minutes</code></em></td><td valign="top">Minutes count, 0 ... 59. This is a binary, not BCD number.</td></tr><tr><td valign="top">__u8</td><td valign="top"><em class="structfield"><code>hours</code></em></td><td valign="top">Hours count, 0 ... 29. This is a binary, not BCD number.</td></tr><tr><td valign="top">__u8</td><td valign="top"><em class="structfield"><code>userbits</code></em>[4]</td><td valign="top">The "user group" bits from the timecode.</td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="timecode-type"></a><p class="title"><b>Table&nbsp;3.6.&nbsp;Timecode Types</b></p><div class="table-contents"><table summary="Timecode Types" width="100%" border="0"><colgroup><col><col><col></colgroup><tbody valign="top"><tr><td valign="top"><code class="constant">V4L2_TC_TYPE_24FPS</code></td><td valign="top">1</td><td valign="top">24 frames per second, i.&nbsp;e. film.</td></tr><tr><td valign="top"><code class="constant">V4L2_TC_TYPE_25FPS</code></td><td valign="top">2</td><td valign="top">25 frames per second, i.&nbsp;e. PAL or SECAM video.</td></tr><tr><td valign="top"><code class="constant">V4L2_TC_TYPE_30FPS</code></td><td valign="top">3</td><td valign="top">30 frames per second, i.&nbsp;e. NTSC video.</td></tr><tr><td valign="top"><code class="constant">V4L2_TC_TYPE_50FPS</code></td><td valign="top">4</td><td valign="top">&nbsp;</td></tr><tr><td valign="top"><code class="constant">V4L2_TC_TYPE_60FPS</code></td><td valign="top">5</td><td valign="top">&nbsp;</td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="timecode-flags"></a><p class="title"><b>Table&nbsp;3.7.&nbsp;Timecode Flags</b></p><div class="table-contents"><table summary="Timecode Flags" width="100%" border="0"><colgroup><col><col><col></colgroup><tbody valign="top"><tr><td valign="top"><code class="constant">V4L2_TC_FLAG_DROPFRAME</code></td><td valign="top">0x0001</td><td valign="top">Indicates "drop frame" semantics for counting frames
in 29.97 fps material. When set, frame numbers 0 and 1 at the start of
each minute, except minutes 0, 10, 20, 30, 40, 50 are omitted from the
count.</td></tr><tr><td valign="top"><code class="constant">V4L2_TC_FLAG_COLORFRAME</code></td><td valign="top">0x0002</td><td valign="top">The "color frame" flag.</td></tr><tr><td valign="top"><code class="constant">V4L2_TC_USERBITS_field</code></td><td valign="top">0x000C</td><td valign="top">Field mask for the "binary group flags".</td></tr><tr><td valign="top"><code class="constant">V4L2_TC_USERBITS_USERDEFINED</code></td><td valign="top">0x0000</td><td valign="top">Unspecified format.</td></tr><tr><td valign="top"><code class="constant">V4L2_TC_USERBITS_8BITCHARS</code></td><td valign="top">0x0008</td><td valign="top">8-bit ISO characters.</td></tr></tbody></table></div></div><br class="table-break"></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="field-order"></a>3.6.&nbsp;Field Order</h2></div></div></div><p>We have to distinguish between progressive and interlaced
video. Progressive video transmits all lines of a video image
sequentially. Interlaced video divides an image into two fields,
containing only the odd and even lines of the image, respectively.
Alternating the so called odd and even field are transmitted, and due
to a small delay between fields a cathode ray TV displays the lines
interleaved, yielding the original frame. This curious technique was
invented because at refresh rates similar to film the image would
fade</p></div></div></div></body></html>